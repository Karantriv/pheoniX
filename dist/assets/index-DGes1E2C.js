(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Em={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function Vb(){if(Pv)return Gl;Pv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Gl.Fragment=e,Gl.jsx=t,Gl.jsxs=t,Gl}var Uv;function Lb(){return Uv||(Uv=1,Em.exports=Vb()),Em.exports}var v=Lb(),Am={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function jb(){if(Vv)return xe;Vv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.iterator;function C(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,G={};function U(P,te,Ee){this.props=P,this.context=te,this.refs=G,this.updater=Ee||D}U.prototype.isReactComponent={},U.prototype.setState=function(P,te){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,te,"setState")},U.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function z(){}z.prototype=U.prototype;function H(P,te,Ee){this.props=P,this.context=te,this.refs=G,this.updater=Ee||D}var Y=H.prototype=new z;Y.constructor=H,k(Y,U.prototype),Y.isPureReactComponent=!0;var ie=Array.isArray,re={H:null,A:null,T:null,S:null},pe=Object.prototype.hasOwnProperty;function M(P,te,Ee,oe,le,ue){return Ee=ue.ref,{$$typeof:i,type:P,key:te,ref:Ee!==void 0?Ee:null,props:ue}}function R(P,te){return M(P.type,te,void 0,void 0,void 0,P.props)}function b(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function I(P){var te={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Ee){return te[Ee]})}var O=/\/+/g;function j(P,te){return typeof P=="object"&&P!==null&&P.key!=null?I(""+P.key):te.toString(36)}function N(){}function Be(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(N,N):(P.status="pending",P.then(function(te){P.status==="pending"&&(P.status="fulfilled",P.value=te)},function(te){P.status==="pending"&&(P.status="rejected",P.reason=te)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function et(P,te,Ee,oe,le){var ue=typeof P;(ue==="undefined"||ue==="boolean")&&(P=null);var fe=!1;if(P===null)fe=!0;else switch(ue){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(P.$$typeof){case i:case e:fe=!0;break;case A:return fe=P._init,et(fe(P._payload),te,Ee,oe,le)}}if(fe)return le=le(P),fe=oe===""?"."+j(P,0):oe,ie(le)?(Ee="",fe!=null&&(Ee=fe.replace(O,"$&/")+"/"),et(le,te,Ee,"",function(de){return de})):le!=null&&(b(le)&&(le=R(le,Ee+(le.key==null||P&&P.key===le.key?"":(""+le.key).replace(O,"$&/")+"/")+fe)),te.push(le)),1;fe=0;var rt=oe===""?".":oe+":";if(ie(P))for(var Ue=0;Ue<P.length;Ue++)oe=P[Ue],ue=rt+j(oe,Ue),fe+=et(oe,te,Ee,ue,le);else if(Ue=C(P),typeof Ue=="function")for(P=Ue.call(P),Ue=0;!(oe=P.next()).done;)oe=oe.value,ue=rt+j(oe,Ue++),fe+=et(oe,te,Ee,ue,le);else if(ue==="object"){if(typeof P.then=="function")return et(Be(P),te,Ee,oe,le);throw te=String(P),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return fe}function ae(P,te,Ee){if(P==null)return P;var oe=[],le=0;return et(P,oe,"","",function(ue){return te.call(Ee,ue,le++)}),oe}function _e(P){if(P._status===-1){var te=P._result;te=te(),te.then(function(Ee){(P._status===0||P._status===-1)&&(P._status=1,P._result=Ee)},function(Ee){(P._status===0||P._status===-1)&&(P._status=2,P._result=Ee)}),P._status===-1&&(P._status=0,P._result=te)}if(P._status===1)return P._result.default;throw P._result}var ve=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ge(){}return xe.Children={map:ae,forEach:function(P,te,Ee){ae(P,function(){te.apply(this,arguments)},Ee)},count:function(P){var te=0;return ae(P,function(){te++}),te},toArray:function(P){return ae(P,function(te){return te})||[]},only:function(P){if(!b(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},xe.Component=U,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=H,xe.StrictMode=s,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,xe.act=function(){throw Error("act(...) is not supported in production builds of React.")},xe.cache=function(P){return function(){return P.apply(null,arguments)}},xe.cloneElement=function(P,te,Ee){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var oe=k({},P.props),le=P.key,ue=void 0;if(te!=null)for(fe in te.ref!==void 0&&(ue=void 0),te.key!==void 0&&(le=""+te.key),te)!pe.call(te,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&te.ref===void 0||(oe[fe]=te[fe]);var fe=arguments.length-2;if(fe===1)oe.children=Ee;else if(1<fe){for(var rt=Array(fe),Ue=0;Ue<fe;Ue++)rt[Ue]=arguments[Ue+2];oe.children=rt}return M(P.type,le,void 0,void 0,ue,oe)},xe.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},xe.createElement=function(P,te,Ee){var oe,le={},ue=null;if(te!=null)for(oe in te.key!==void 0&&(ue=""+te.key),te)pe.call(te,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(le[oe]=te[oe]);var fe=arguments.length-2;if(fe===1)le.children=Ee;else if(1<fe){for(var rt=Array(fe),Ue=0;Ue<fe;Ue++)rt[Ue]=arguments[Ue+2];le.children=rt}if(P&&P.defaultProps)for(oe in fe=P.defaultProps,fe)le[oe]===void 0&&(le[oe]=fe[oe]);return M(P,ue,void 0,void 0,null,le)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(P){return{$$typeof:d,render:P}},xe.isValidElement=b,xe.lazy=function(P){return{$$typeof:A,_payload:{_status:-1,_result:P},_init:_e}},xe.memo=function(P,te){return{$$typeof:g,type:P,compare:te===void 0?null:te}},xe.startTransition=function(P){var te=re.T,Ee={};re.T=Ee;try{var oe=P(),le=re.S;le!==null&&le(Ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ge,ve)}catch(ue){ve(ue)}finally{re.T=te}},xe.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},xe.use=function(P){return re.H.use(P)},xe.useActionState=function(P,te,Ee){return re.H.useActionState(P,te,Ee)},xe.useCallback=function(P,te){return re.H.useCallback(P,te)},xe.useContext=function(P){return re.H.useContext(P)},xe.useDebugValue=function(){},xe.useDeferredValue=function(P,te){return re.H.useDeferredValue(P,te)},xe.useEffect=function(P,te){return re.H.useEffect(P,te)},xe.useId=function(){return re.H.useId()},xe.useImperativeHandle=function(P,te,Ee){return re.H.useImperativeHandle(P,te,Ee)},xe.useInsertionEffect=function(P,te){return re.H.useInsertionEffect(P,te)},xe.useLayoutEffect=function(P,te){return re.H.useLayoutEffect(P,te)},xe.useMemo=function(P,te){return re.H.useMemo(P,te)},xe.useOptimistic=function(P,te){return re.H.useOptimistic(P,te)},xe.useReducer=function(P,te,Ee){return re.H.useReducer(P,te,Ee)},xe.useRef=function(P){return re.H.useRef(P)},xe.useState=function(P){return re.H.useState(P)},xe.useSyncExternalStore=function(P,te,Ee){return re.H.useSyncExternalStore(P,te,Ee)},xe.useTransition=function(){return re.H.useTransition()},xe.version="19.0.0",xe}var Lv;function _p(){return Lv||(Lv=1,Am.exports=jb()),Am.exports}var V=_p(),Tm={exports:{}},Kl={},wm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function Bb(){return jv||(jv=1,function(i){function e(ae,_e){var ve=ae.length;ae.push(_e);e:for(;0<ve;){var ge=ve-1>>>1,P=ae[ge];if(0<o(P,_e))ae[ge]=_e,ae[ve]=P,ve=ge;else break e}}function t(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var _e=ae[0],ve=ae.pop();if(ve!==_e){ae[0]=ve;e:for(var ge=0,P=ae.length,te=P>>>1;ge<te;){var Ee=2*(ge+1)-1,oe=ae[Ee],le=Ee+1,ue=ae[le];if(0>o(oe,ve))le<P&&0>o(ue,oe)?(ae[ge]=ue,ae[le]=ve,ge=le):(ae[ge]=oe,ae[Ee]=ve,ge=Ee);else if(le<P&&0>o(ue,ve))ae[ge]=ue,ae[le]=ve,ge=le;else break e}}return _e}function o(ae,_e){var ve=ae.sortIndex-_e.sortIndex;return ve!==0?ve:ae.id-_e.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();i.unstable_now=function(){return h.now()-d}}var p=[],g=[],A=1,T=null,C=3,D=!1,k=!1,G=!1,U=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function Y(ae){for(var _e=t(g);_e!==null;){if(_e.callback===null)s(g);else if(_e.startTime<=ae)s(g),_e.sortIndex=_e.expirationTime,e(p,_e);else break;_e=t(g)}}function ie(ae){if(G=!1,Y(ae),!k)if(t(p)!==null)k=!0,Be();else{var _e=t(g);_e!==null&&et(ie,_e.startTime-ae)}}var re=!1,pe=-1,M=5,R=-1;function b(){return!(i.unstable_now()-R<M)}function I(){if(re){var ae=i.unstable_now();R=ae;var _e=!0;try{e:{k=!1,G&&(G=!1,z(pe),pe=-1),D=!0;var ve=C;try{t:{for(Y(ae),T=t(p);T!==null&&!(T.expirationTime>ae&&b());){var ge=T.callback;if(typeof ge=="function"){T.callback=null,C=T.priorityLevel;var P=ge(T.expirationTime<=ae);if(ae=i.unstable_now(),typeof P=="function"){T.callback=P,Y(ae),_e=!0;break t}T===t(p)&&s(p),Y(ae)}else s(p);T=t(p)}if(T!==null)_e=!0;else{var te=t(g);te!==null&&et(ie,te.startTime-ae),_e=!1}}break e}finally{T=null,C=ve,D=!1}_e=void 0}}finally{_e?O():re=!1}}}var O;if(typeof H=="function")O=function(){H(I)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,N=j.port2;j.port1.onmessage=I,O=function(){N.postMessage(null)}}else O=function(){U(I,0)};function Be(){re||(re=!0,O())}function et(ae,_e){pe=U(function(){ae(i.unstable_now())},_e)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ae){ae.callback=null},i.unstable_continueExecution=function(){k||D||(k=!0,Be())},i.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ae?Math.floor(1e3/ae):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(ae){switch(C){case 1:case 2:case 3:var _e=3;break;default:_e=C}var ve=C;C=_e;try{return ae()}finally{C=ve}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ae,_e){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ve=C;C=ae;try{return _e()}finally{C=ve}},i.unstable_scheduleCallback=function(ae,_e,ve){var ge=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ge+ve:ge):ve=ge,ae){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ve+P,ae={id:A++,callback:_e,priorityLevel:ae,startTime:ve,expirationTime:P,sortIndex:-1},ve>ge?(ae.sortIndex=ve,e(g,ae),t(p)===null&&ae===t(g)&&(G?(z(pe),pe=-1):G=!0,et(ie,ve-ge))):(ae.sortIndex=P,e(p,ae),k||D||(k=!0,Be())),ae},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(ae){var _e=C;return function(){var ve=C;C=_e;try{return ae.apply(this,arguments)}finally{C=ve}}}}(Sm)),Sm}var Bv;function zb(){return Bv||(Bv=1,wm.exports=Bb()),wm.exports}var bm={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function qb(){if(zv)return Zt;zv=1;var i=_p();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)g+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,A){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:A}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(p,g){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,A)},Zt.flushSync=function(p){var g=h.T,A=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=A,s.d.f()}},Zt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Zt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Zt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var A=g.as,T=d(A,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;A==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:D}):A==="script"&&s.d.X(p,{crossOrigin:T,integrity:C,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Zt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var A=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Zt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var A=g.as,T=d(A,g.crossOrigin);s.d.L(p,A,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Zt.preloadModule=function(p,g){if(typeof p=="string")if(g){var A=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Zt.requestFormReset=function(p){s.d.r(p)},Zt.unstable_batchedUpdates=function(p,g){return p(g)},Zt.useFormState=function(p,g,A){return h.H.useFormState(p,g,A)},Zt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Zt.version="19.0.0",Zt}var qv;function Hb(){if(qv)return bm.exports;qv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),bm.exports=qb(),bm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Fb(){if(Hv)return Kl;Hv=1;var i=zb(),e=_p(),t=Hb();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),D=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),ie=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var M=Symbol.for("react.client.reference");function R(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===M?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case p:return"Fragment";case d:return"Portal";case A:return"Profiler";case g:return"StrictMode";case G:return"Suspense";case U:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Provider";case C:return(n._context.displayName||"Context")+".Consumer";case k:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return r=n.displayName||null,r!==null?r:R(n.type)||"Memo";case H:r=n._payload,n=n._init;try{return R(n(r))}catch{}}return null}var b=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,O,j;function N(n){if(O===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||"",j=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+O+n+j}var Be=!1;function et(n,r){if(!n||Be)return"";Be=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch($){var Q=$}Reflect.construct(n,[],ne)}else{try{ne.call()}catch($){Q=$}n.call(ne.prototype)}}else{try{throw Error()}catch($){Q=$}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch($){if($&&Q&&typeof $.stack=="string")return[$.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),E=m[0],w=m[1];if(E&&w){var x=E.split(`
`),B=w.split(`
`);for(f=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===x.length||f===B.length)for(l=x.length-1,f=B.length-1;1<=l&&0<=f&&x[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(x[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||x[l]!==B[f]){var W=`
`+x[l].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=l&&0<=f);break}}}finally{Be=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?N(a):""}function ae(n){switch(n.tag){case 26:case 27:case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return n=et(n.type,!1),n;case 11:return n=et(n.type.render,!1),n;case 1:return n=et(n.type,!0),n;default:return""}}function _e(n){try{var r="";do r+=ae(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ve(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function ge(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function P(n){if(ve(n)!==n)throw Error(s(188))}function te(n){var r=n.alternate;if(!r){if(r=ve(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return P(f),n;if(m===l)return P(f),r;m=m.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=m;else{for(var E=!1,w=f.child;w;){if(w===a){E=!0,a=f,l=m;break}if(w===l){E=!0,l=f,a=m;break}w=w.sibling}if(!E){for(w=m.child;w;){if(w===a){E=!0,a=m,l=f;break}if(w===l){E=!0,l=m,a=f;break}w=w.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function Ee(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=Ee(n),r!==null)return r;n=n.sibling}return null}var oe=Array.isArray,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},fe=[],rt=-1;function Ue(n){return{current:n}}function de(n){0>rt||(n.current=fe[rt],fe[rt]=null,rt--)}function me(n,r){rt++,fe[rt]=n.current,n.current=r}var De=Ue(null),Xe=Ue(null),ze=Ue(null),Kn=Ue(null);function Qn(n,r){switch(me(ze,r),me(Xe,n),me(De,null),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?cv(r):0;break;default:if(n=n===8?r.parentNode:r,r=n.tagName,n=n.namespaceURI)n=cv(n),r=hv(n,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}de(De),me(De,r)}function vn(){de(De),de(Xe),de(ze)}function Oi(n){n.memoizedState!==null&&me(Kn,n);var r=De.current,a=hv(r,n.type);r!==a&&(me(Xe,n),me(De,a))}function Rs(n){Xe.current===n&&(de(De),de(Xe)),Kn.current===n&&(de(Kn),Bl._currentValue=ue)}var ki=Object.prototype.hasOwnProperty,ht=i.unstable_scheduleCallback,Yn=i.unstable_cancelCallback,Cs=i.unstable_shouldYield,zo=i.unstable_requestPaint,hn=i.unstable_now,Uu=i.unstable_getCurrentPriorityLevel,Ct=i.unstable_ImmediatePriority,Pt=i.unstable_UserBlockingPriority,Mi=i.unstable_NormalPriority,Vu=i.unstable_LowPriority,qo=i.unstable_IdlePriority,wf=i.log,Is=i.unstable_setDisableYieldValue,Er=null,$t=null;function Ho(n){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Er,n,void 0,(n.current.flags&128)===128)}catch{}}function oi(n){if(typeof wf=="function"&&Is(n),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Er,n)}catch{}}var sn=Math.clz32?Math.clz32:ju,Fo=Math.log,Lu=Math.LN2;function ju(n){return n>>>=0,n===0?32:31-(Fo(n)/Lu|0)|0}var li=128,Ar=4194304;function Xn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function In(n,r){var a=n.pendingLanes;if(a===0)return 0;var l=0,f=n.suspendedLanes,m=n.pingedLanes,E=n.warmLanes;n=n.finishedLanes!==0;var w=a&134217727;return w!==0?(a=w&~f,a!==0?l=Xn(a):(m&=w,m!==0?l=Xn(m):n||(E=w&~E,E!==0&&(l=Xn(E))))):(w=a&~f,w!==0?l=Xn(w):m!==0?l=Xn(m):n||(E=a&~E,E!==0&&(l=Xn(E)))),l===0?0:r!==0&&r!==l&&(r&f)===0&&(f=l&-l,E=r&-r,f>=E||f===32&&(E&4194176)!==0)?r:l}function Tr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Sa(n,r){switch(n){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Go(){var n=li;return li<<=1,(li&4194176)===0&&(li=128),n}function wr(){var n=Ar;return Ar<<=1,(Ar&62914560)===0&&(Ar=4194304),n}function ba(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function _t(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bu(n,r,a,l,f,m){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,x=n.expirationTimes,B=n.hiddenUpdates;for(a=E&~a;0<a;){var W=31-sn(a),ne=1<<W;w[W]=0,x[W]=-1;var Q=B[W];if(Q!==null)for(B[W]=null,W=0;W<Q.length;W++){var $=Q[W];$!==null&&($.lane&=-536870913)}a&=~ne}l!==0&&Sr(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~r))}function Sr(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-sn(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194218}function br(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-sn(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function zu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function qu(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:Nv(n.type))}function Rr(n,r){var a=le.p;try{return le.p=n,r()}finally{le.p=a}}var ui=Math.random().toString(36).slice(2),Ut="__reactFiber$"+ui,It="__reactProps$"+ui,Pi="__reactContainer$"+ui,Ns="__reactEvents$"+ui,Ra="__reactListeners$"+ui,ci="__reactHandles$"+ui,Ko="__reactResources$"+ui,Cr="__reactMarker$"+ui;function xs(n){delete n[Ut],delete n[It],delete n[Ns],delete n[Ra],delete n[ci]}function $n(n){var r=n[Ut];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Pi]||a[Ut]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=mv(n);n!==null;){if(a=n[Ut])return a;n=mv(n)}return r}n=a,a=n.parentNode}return null}function Ui(n){if(n=n[Ut]||n[Pi]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Ir(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Nr(n){var r=n[Ko];return r||(r=n[Ko]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ot(n){n[Cr]=!0}var Qo=new Set,Ca={};function En(n,r){fn(n,r),fn(n+"Capture",r)}function fn(n,r){for(Ca[n]=r,n=0;n<r.length;n++)Qo.add(r[n])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yo={},Xo={};function Hu(n){return ki.call(Xo,n)?!0:ki.call(Yo,n)?!1:Sf.test(n)?Xo[n]=!0:(Yo[n]=!0,!1)}function xr(n,r,a){if(Hu(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Dr(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Nn(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}function an(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Fu(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function bf(n){var r=Fu(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,m.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ds(n){n._valueTracker||(n._valueTracker=bf(n))}function $o(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Fu(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function Ia(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Vi=/[\n"\\]/g;function ft(n){return n.replace(Vi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Or(n,r,a,l,f,m,E,w){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+an(r)):n.value!==""+an(r)&&(n.value=""+an(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?Na(n,E,an(r)):a!=null?Na(n,E,an(a)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+an(w):n.removeAttribute("name")}function Os(n,r,a,l,f,m,E,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;a=a!=null?""+an(a):"",r=r!=null?""+an(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Na(n,r,a){r==="number"&&Ia(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ke(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+an(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function ks(n,r,a){if(r!=null&&(r=""+an(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+an(a):""}function kr(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=an(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function xn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Rf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wo(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||Rf.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function Gu(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Wo(n,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Wo(n,m,r[m])}function Zo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),If=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hi(n){return If.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Dn=null;function xa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Li=null,ji=null;function Bi(n){var r=Ui(n);if(r&&(n=r.stateNode)){var a=n[It]||null;e:switch(n=r.stateNode,r.type){case"input":if(Or(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ft(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[It]||null;if(!f)throw Error(s(90));Or(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&$o(l)}break e;case"textarea":ks(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ke(n,!!a.multiple,r,!1)}}}var Jo=!1;function Ku(n,r,a){if(Jo)return n(r,a);Jo=!0;try{var l=n(r);return l}finally{if(Jo=!1,(Li!==null||ji!==null)&&(Vc(),Li&&(r=Li,n=ji,ji=Li=null,Bi(r),n)))for(r=0;r<n.length;r++)Bi(n[r])}}function Ms(n,r){var a=n.stateNode;if(a===null)return null;var l=a[It]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var On=!1;if(An)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){On=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{On=!1}var fi=null,Mr=null,zi=null;function el(){if(zi)return zi;var n,r=Mr,a=r.length,l,f="value"in fi?fi.value:fi.textContent,m=f.length;for(n=0;n<a&&r[n]===f[n];n++);var E=a-n;for(l=1;l<=E&&r[a-l]===f[m-l];l++);return zi=f.slice(n,1<l?1-l:void 0)}function di(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function mi(){return!0}function tl(){return!1}function Vt(n){function r(a,l,f,m,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?mi:tl,this.isPropagationStopped=tl,this}return I(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),r}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=Vt($e),Us=I({},$e,{view:0,detail:0}),Qu=Vt(Us),Oa,ka,pi,Vs=I({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pi&&(pi&&n.type==="mousemove"?(Oa=n.screenX-pi.screenX,ka=n.screenY-pi.screenY):ka=Oa=0,pi=n),Oa)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),kn=Vt(Vs),Yu=I({},Vs,{dataTransfer:0}),Nf=Vt(Yu),Ls=I({},Us,{relatedTarget:0}),Ma=Vt(Ls),nl=I({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),Pa=Vt(nl),Xu=I({},$e,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ua=Vt(Xu),xf=I({},$e,{data:0}),il=Vt(xf),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Wu[n])?!!r[n]:!1}function Bs(){return rl}var Zu=I({},Us,{key:function(n){if(n.key){var r=js[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=di(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$u[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(n){return n.type==="keypress"?di(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?di(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Va=Vt(Zu),Ju=I({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sl=Vt(Ju),qi=I({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),ec=Vt(qi),tc=I({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=Vt(tc),ic=I({},Vs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),La=Vt(ic),on=I({},$e,{newState:0,oldState:0}),rc=Vt(on),sc=[9,13,27,32],gi=An&&"CompositionEvent"in window,c=null;An&&"documentMode"in document&&(c=document.documentMode);var y=An&&"TextEvent"in window&&!c,_=An&&(!gi||c&&8<c&&11>=c),S=" ",F=!1;function X(n,r){switch(n){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qe=!1;function Nt(n,r){switch(n){case"compositionend":return se(r);case"keypress":return r.which!==32?null:(F=!0,S);case"textInput":return n=r.data,n===S&&F?null:n;default:return null}}function He(n,r){if(qe)return n==="compositionend"||!gi&&X(n,r)?(n=el(),zi=Mr=fi=null,qe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Lt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Lt[n.type]:r==="textarea"}function Hi(n,r,a,l){Li?ji?ji.push(l):ji=[l]:Li=l,r=qc(r,"onChange"),0<r.length&&(a=new Da("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var Ht=null,yi=null;function al(n){sv(n,0)}function ac(n){var r=Ir(n);if($o(r))return n}function Mg(n,r){if(n==="change")return r}var Pg=!1;if(An){var Df;if(An){var Of="oninput"in document;if(!Of){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Of=typeof Ug.oninput=="function"}Df=Of}else Df=!1;Pg=Df&&(!document.documentMode||9<document.documentMode)}function Vg(){Ht&&(Ht.detachEvent("onpropertychange",Lg),yi=Ht=null)}function Lg(n){if(n.propertyName==="value"&&ac(yi)){var r=[];Hi(r,yi,n,xa(n)),Ku(al,r)}}function dS(n,r,a){n==="focusin"?(Vg(),Ht=r,yi=a,Ht.attachEvent("onpropertychange",Lg)):n==="focusout"&&Vg()}function mS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ac(yi)}function pS(n,r){if(n==="click")return ac(r)}function gS(n,r){if(n==="input"||n==="change")return ac(r)}function yS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Tn=typeof Object.is=="function"?Object.is:yS;function ol(n,r){if(Tn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ki.call(r,f)||!Tn(n[f],r[f]))return!1}return!0}function jg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bg(n,r){var a=jg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jg(a)}}function zg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?zg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function qg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ia(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Ia(n.document)}return r}function kf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function _S(n,r){var a=qg(r);r=n.focusedElem;var l=n.selectionRange;if(a!==r&&r&&r.ownerDocument&&zg(r.ownerDocument.documentElement,r)){if(l!==null&&kf(r)){if(n=l.start,a=l.end,a===void 0&&(a=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(a,r.value.length);else if(a=(n=r.ownerDocument||document)&&n.defaultView||window,a.getSelection){a=a.getSelection();var f=r.textContent.length,m=Math.min(l.start,f);l=l.end===void 0?m:Math.min(l.end,f),!a.extend&&m>l&&(f=l,l=m,m=f),f=Bg(r,m);var E=Bg(r,l);f&&E&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==E.node||a.focusOffset!==E.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),a.removeAllRanges(),m>l?(a.addRange(n),a.extend(E.node,E.offset)):(n.setEnd(E.node,E.offset),a.addRange(n)))}}for(n=[],a=r;a=a.parentNode;)a.nodeType===1&&n.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)a=n[r],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var vS=An&&"documentMode"in document&&11>=document.documentMode,ja=null,Mf=null,ll=null,Pf=!1;function Hg(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pf||ja==null||ja!==Ia(l)||(l=ja,"selectionStart"in l&&kf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&ol(ll,l)||(ll=l,l=qc(Mf,"onSelect"),0<l.length&&(r=new Da("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=ja)))}function zs(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ba={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},Uf={},Fg={};An&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function qs(n){if(Uf[n])return Uf[n];if(!Ba[n])return n;var r=Ba[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Fg)return Uf[n]=r[a];return n}var Gg=qs("animationend"),Kg=qs("animationiteration"),Qg=qs("animationstart"),ES=qs("transitionrun"),AS=qs("transitionstart"),TS=qs("transitioncancel"),Yg=qs("transitionend"),Xg=new Map,$g="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Wn(n,r){Xg.set(n,r),En(r,[n])}var Mn=[],za=0,Vf=0;function oc(){for(var n=za,r=Vf=za=0;r<n;){var a=Mn[r];Mn[r++]=null;var l=Mn[r];Mn[r++]=null;var f=Mn[r];Mn[r++]=null;var m=Mn[r];if(Mn[r++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}m!==0&&Wg(a,f,m)}}function lc(n,r,a,l){Mn[za++]=n,Mn[za++]=r,Mn[za++]=a,Mn[za++]=l,Vf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Lf(n,r,a,l){return lc(n,r,a,l),uc(n)}function Pr(n,r){return lc(n,null,null,r),uc(n)}function Wg(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;f&&r!==null&&n.tag===3&&(m=n.stateNode,f=31-sn(a),m=m.hiddenUpdates,n=m[f],n===null?m[f]=[r]:n.push(r),r.lane=a|536870912)}function uc(n){if(50<kl)throw kl=0,Fd=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var qa={},Zg=new WeakMap;function Pn(n,r){if(typeof n=="object"&&n!==null){var a=Zg.get(n);return a!==void 0?a:(r={value:n,source:r,stack:_e(r)},Zg.set(n,r),r)}return{value:n,source:r,stack:_e(r)}}var Ha=[],Fa=0,cc=null,hc=0,Un=[],Vn=0,Hs=null,Fi=1,Gi="";function Fs(n,r){Ha[Fa++]=hc,Ha[Fa++]=cc,cc=n,hc=r}function Jg(n,r,a){Un[Vn++]=Fi,Un[Vn++]=Gi,Un[Vn++]=Hs,Hs=n;var l=Fi;n=Gi;var f=32-sn(l)-1;l&=~(1<<f),a+=1;var m=32-sn(r)+f;if(30<m){var E=f-f%5;m=(l&(1<<E)-1).toString(32),l>>=E,f-=E,Fi=1<<32-sn(r)+f|a<<f|l,Gi=m+n}else Fi=1<<m|a<<f|l,Gi=n}function jf(n){n.return!==null&&(Fs(n,1),Jg(n,1,0))}function Bf(n){for(;n===cc;)cc=Ha[--Fa],Ha[Fa]=null,hc=Ha[--Fa],Ha[Fa]=null;for(;n===Hs;)Hs=Un[--Vn],Un[Vn]=null,Gi=Un[--Vn],Un[Vn]=null,Fi=Un[--Vn],Un[Vn]=null}var ln=null,Ft=null,Qe=!1,Zn=null,_i=!1,zf=Error(s(519));function Gs(n){var r=Error(s(418,""));throw hl(Pn(r,n)),zf}function ey(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Ut]=n,r[It]=l,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<Pl.length;a++)je(Pl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),Os(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ds(r);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),kr(r,l.value,l.defaultValue,l.children),Ds(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||uv(r.textContent,a)?(l.popover!=null&&(je("beforetoggle",r),je("toggle",r)),l.onScroll!=null&&je("scroll",r),l.onScrollEnd!=null&&je("scrollend",r),l.onClick!=null&&(r.onclick=Hc),r=!0):r=!1,r||Gs(n)}function ty(n){for(ln=n.return;ln;)switch(ln.tag){case 3:case 27:_i=!0;return;case 5:case 13:_i=!1;return;default:ln=ln.return}}function ul(n){if(n!==ln)return!1;if(!Qe)return ty(n),Qe=!0,!1;var r=!1,a;if((a=n.tag!==3&&n.tag!==27)&&((a=n.tag===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||om(n.type,n.memoizedProps)),a=!a),a&&(r=!0),r&&Ft&&Gs(n),ty(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){Ft=ei(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}Ft=null}}else Ft=ln?ei(n.stateNode.nextSibling):null;return!0}function cl(){Ft=ln=null,Qe=!1}function hl(n){Zn===null?Zn=[n]:Zn.push(n)}var fl=Error(s(460)),ny=Error(s(474)),qf={then:function(){}};function iy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function fc(){}function ry(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(fc,fc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===fl?Error(s(483)):n;default:if(typeof r.status=="string")r.then(fc,fc);else{if(n=nt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===fl?Error(s(483)):n}throw dl=r,fl}}var dl=null;function sy(){if(dl===null)throw Error(s(459));var n=dl;return dl=null,n}var Ga=null,ml=0;function dc(n){var r=ml;return ml+=1,Ga===null&&(Ga=[]),ry(Ga,n,r)}function pl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function mc(n,r){throw r.$$typeof===u?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function ay(n){var r=n._init;return r(n._payload)}function oy(n){function r(q,L){if(n){var K=q.deletions;K===null?(q.deletions=[L],q.flags|=16):K.push(L)}}function a(q,L){if(!n)return null;for(;L!==null;)r(q,L),L=L.sibling;return null}function l(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function f(q,L){return q=Qr(q,L),q.index=0,q.sibling=null,q}function m(q,L,K){return q.index=K,n?(K=q.alternate,K!==null?(K=K.index,K<L?(q.flags|=33554434,L):K):(q.flags|=33554434,L)):(q.flags|=1048576,L)}function E(q){return n&&q.alternate===null&&(q.flags|=33554434),q}function w(q,L,K,Z){return L===null||L.tag!==6?(L=Ud(K,q.mode,Z),L.return=q,L):(L=f(L,K),L.return=q,L)}function x(q,L,K,Z){var ye=K.type;return ye===p?W(q,L,K.props.children,Z,K.key):L!==null&&(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===H&&ay(ye)===L.type)?(L=f(L,K.props),pl(L,K),L.return=q,L):(L=Oc(K.type,K.key,K.props,null,q.mode,Z),pl(L,K),L.return=q,L)}function B(q,L,K,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==K.containerInfo||L.stateNode.implementation!==K.implementation?(L=Vd(K,q.mode,Z),L.return=q,L):(L=f(L,K.children||[]),L.return=q,L)}function W(q,L,K,Z,ye){return L===null||L.tag!==7?(L=ta(K,q.mode,Z,ye),L.return=q,L):(L=f(L,K),L.return=q,L)}function ne(q,L,K){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ud(""+L,q.mode,K),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case h:return K=Oc(L.type,L.key,L.props,null,q.mode,K),pl(K,L),K.return=q,K;case d:return L=Vd(L,q.mode,K),L.return=q,L;case H:var Z=L._init;return L=Z(L._payload),ne(q,L,K)}if(oe(L)||pe(L))return L=ta(L,q.mode,K,null),L.return=q,L;if(typeof L.then=="function")return ne(q,dc(L),K);if(L.$$typeof===D)return ne(q,Nc(q,L),K);mc(q,L)}return null}function Q(q,L,K,Z){var ye=L!==null?L.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ye!==null?null:w(q,L,""+K,Z);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case h:return K.key===ye?x(q,L,K,Z):null;case d:return K.key===ye?B(q,L,K,Z):null;case H:return ye=K._init,K=ye(K._payload),Q(q,L,K,Z)}if(oe(K)||pe(K))return ye!==null?null:W(q,L,K,Z,null);if(typeof K.then=="function")return Q(q,L,dc(K),Z);if(K.$$typeof===D)return Q(q,L,Nc(q,K),Z);mc(q,K)}return null}function $(q,L,K,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return q=q.get(K)||null,w(L,q,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case h:return q=q.get(Z.key===null?K:Z.key)||null,x(L,q,Z,ye);case d:return q=q.get(Z.key===null?K:Z.key)||null,B(L,q,Z,ye);case H:var Me=Z._init;return Z=Me(Z._payload),$(q,L,K,Z,ye)}if(oe(Z)||pe(Z))return q=q.get(K)||null,W(L,q,Z,ye,null);if(typeof Z.then=="function")return $(q,L,K,dc(Z),ye);if(Z.$$typeof===D)return $(q,L,K,Nc(L,Z),ye);mc(L,Z)}return null}function Ae(q,L,K,Z){for(var ye=null,Me=null,Te=L,Se=L=0,zt=null;Te!==null&&Se<K.length;Se++){Te.index>Se?(zt=Te,Te=null):zt=Te.sibling;var Ye=Q(q,Te,K[Se],Z);if(Ye===null){Te===null&&(Te=zt);break}n&&Te&&Ye.alternate===null&&r(q,Te),L=m(Ye,L,Se),Me===null?ye=Ye:Me.sibling=Ye,Me=Ye,Te=zt}if(Se===K.length)return a(q,Te),Qe&&Fs(q,Se),ye;if(Te===null){for(;Se<K.length;Se++)Te=ne(q,K[Se],Z),Te!==null&&(L=m(Te,L,Se),Me===null?ye=Te:Me.sibling=Te,Me=Te);return Qe&&Fs(q,Se),ye}for(Te=l(Te);Se<K.length;Se++)zt=$(Te,q,Se,K[Se],Z),zt!==null&&(n&&zt.alternate!==null&&Te.delete(zt.key===null?Se:zt.key),L=m(zt,L,Se),Me===null?ye=zt:Me.sibling=zt,Me=zt);return n&&Te.forEach(function(es){return r(q,es)}),Qe&&Fs(q,Se),ye}function Ie(q,L,K,Z){if(K==null)throw Error(s(151));for(var ye=null,Me=null,Te=L,Se=L=0,zt=null,Ye=K.next();Te!==null&&!Ye.done;Se++,Ye=K.next()){Te.index>Se?(zt=Te,Te=null):zt=Te.sibling;var es=Q(q,Te,Ye.value,Z);if(es===null){Te===null&&(Te=zt);break}n&&Te&&es.alternate===null&&r(q,Te),L=m(es,L,Se),Me===null?ye=es:Me.sibling=es,Me=es,Te=zt}if(Ye.done)return a(q,Te),Qe&&Fs(q,Se),ye;if(Te===null){for(;!Ye.done;Se++,Ye=K.next())Ye=ne(q,Ye.value,Z),Ye!==null&&(L=m(Ye,L,Se),Me===null?ye=Ye:Me.sibling=Ye,Me=Ye);return Qe&&Fs(q,Se),ye}for(Te=l(Te);!Ye.done;Se++,Ye=K.next())Ye=$(Te,q,Se,Ye.value,Z),Ye!==null&&(n&&Ye.alternate!==null&&Te.delete(Ye.key===null?Se:Ye.key),L=m(Ye,L,Se),Me===null?ye=Ye:Me.sibling=Ye,Me=Ye);return n&&Te.forEach(function(Ub){return r(q,Ub)}),Qe&&Fs(q,Se),ye}function pt(q,L,K,Z){if(typeof K=="object"&&K!==null&&K.type===p&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case h:e:{for(var ye=K.key;L!==null;){if(L.key===ye){if(ye=K.type,ye===p){if(L.tag===7){a(q,L.sibling),Z=f(L,K.props.children),Z.return=q,q=Z;break e}}else if(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===H&&ay(ye)===L.type){a(q,L.sibling),Z=f(L,K.props),pl(Z,K),Z.return=q,q=Z;break e}a(q,L);break}else r(q,L);L=L.sibling}K.type===p?(Z=ta(K.props.children,q.mode,Z,K.key),Z.return=q,q=Z):(Z=Oc(K.type,K.key,K.props,null,q.mode,Z),pl(Z,K),Z.return=q,q=Z)}return E(q);case d:e:{for(ye=K.key;L!==null;){if(L.key===ye)if(L.tag===4&&L.stateNode.containerInfo===K.containerInfo&&L.stateNode.implementation===K.implementation){a(q,L.sibling),Z=f(L,K.children||[]),Z.return=q,q=Z;break e}else{a(q,L);break}else r(q,L);L=L.sibling}Z=Vd(K,q.mode,Z),Z.return=q,q=Z}return E(q);case H:return ye=K._init,K=ye(K._payload),pt(q,L,K,Z)}if(oe(K))return Ae(q,L,K,Z);if(pe(K)){if(ye=pe(K),typeof ye!="function")throw Error(s(150));return K=ye.call(K),Ie(q,L,K,Z)}if(typeof K.then=="function")return pt(q,L,dc(K),Z);if(K.$$typeof===D)return pt(q,L,Nc(q,K),Z);mc(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,L!==null&&L.tag===6?(a(q,L.sibling),Z=f(L,K),Z.return=q,q=Z):(a(q,L),Z=Ud(K,q.mode,Z),Z.return=q,q=Z),E(q)):a(q,L)}return function(q,L,K,Z){try{ml=0;var ye=pt(q,L,K,Z);return Ga=null,ye}catch(Te){if(Te===fl)throw Te;var Me=zn(29,Te,null,q.mode);return Me.lanes=Z,Me.return=q,Me}finally{}}}var Ks=oy(!0),ly=oy(!1),Ka=Ue(null),pc=Ue(0);function uy(n,r){n=nr,me(pc,n),me(Ka,r),nr=n|r.baseLanes}function Hf(){me(pc,nr),me(Ka,Ka.current)}function Ff(){nr=pc.current,de(Ka),de(pc)}var Ln=Ue(null),vi=null;function Ur(n){var r=n.alternate;me(Dt,Dt.current&1),me(Ln,n),vi===null&&(r===null||Ka.current!==null||r.memoizedState!==null)&&(vi=n)}function cy(n){if(n.tag===22){if(me(Dt,Dt.current),me(Ln,n),vi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(vi=n)}}else Vr()}function Vr(){me(Dt,Dt.current),me(Ln,Ln.current)}function Ki(n){de(Ln),vi===n&&(vi=null),de(Dt)}var Dt=Ue(0);function gc(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var wS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},SS=i.unstable_scheduleCallback,bS=i.unstable_NormalPriority,Ot={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gf(){return{controller:new wS,data:new Map,refCount:0}}function gl(n){n.refCount--,n.refCount===0&&SS(bS,function(){n.controller.abort()})}var yl=null,Kf=0,Qa=0,Ya=null;function RS(n,r){if(yl===null){var a=yl=[];Kf=0,Qa=Zd(),Ya={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Kf++,r.then(hy,hy),r}function hy(){if(--Kf===0&&yl!==null){Ya!==null&&(Ya.status="fulfilled");var n=yl;yl=null,Qa=0,Ya=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function CS(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var fy=b.S;b.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&RS(n,r),fy!==null&&fy(n,r)};var Qs=Ue(null);function Qf(){var n=Qs.current;return n!==null?n:nt.pooledCache}function yc(n,r){r===null?me(Qs,Qs.current):me(Qs,r.pool)}function dy(){var n=Qf();return n===null?null:{parent:Ot._currentValue,pool:n}}var Lr=0,Oe=null,Ze=null,Tt=null,_c=!1,Xa=!1,Ys=!1,vc=0,_l=0,$a=null,IS=0;function vt(){throw Error(s(321))}function Yf(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Tn(n[a],r[a]))return!1;return!0}function Xf(n,r,a,l,f,m){return Lr=m,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,b.H=n===null||n.memoizedState===null?Xs:jr,Ys=!1,m=a(l,f),Ys=!1,Xa&&(m=py(r,a,l,f)),my(n),m}function my(n){b.H=Ei;var r=Ze!==null&&Ze.next!==null;if(Lr=0,Tt=Ze=Oe=null,_c=!1,_l=0,$a=null,r)throw Error(s(300));n===null||jt||(n=n.dependencies,n!==null&&Ic(n)&&(jt=!0))}function py(n,r,a,l){Oe=n;var f=0;do{if(Xa&&($a=null),_l=0,Xa=!1,25<=f)throw Error(s(301));if(f+=1,Tt=Ze=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}b.H=$s,m=r(a,l)}while(Xa);return m}function NS(){var n=b.H,r=n.useState()[0];return r=typeof r.then=="function"?vl(r):r,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(Oe.flags|=1024),r}function $f(){var n=vc!==0;return vc=0,n}function Wf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function Zf(n){if(_c){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}_c=!1}Lr=0,Tt=Ze=Oe=null,Xa=!1,_l=vc=0,$a=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Oe.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function wt(){if(Ze===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var r=Tt===null?Oe.memoizedState:Tt.next;if(r!==null)Tt=r,Ze=n;else{if(n===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Tt===null?Oe.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}var Ec;Ec=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function vl(n){var r=_l;return _l+=1,$a===null&&($a=[]),n=ry($a,n,r),r=Oe,(Tt===null?r.memoizedState:Tt.next)===null&&(r=r.alternate,b.H=r===null||r.memoizedState===null?Xs:jr),n}function Ac(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vl(n);if(n.$$typeof===D)return Wt(n)}throw Error(s(438,String(n)))}function Jf(n){var r=null,a=Oe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ec(),Oe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=ie;return r.index++,a}function Qi(n,r){return typeof r=="function"?r(n):r}function Tc(n){var r=wt();return ed(r,Ze,n)}function ed(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}r.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var w=E=null,x=null,B=r,W=!1;do{var ne=B.lane&-536870913;if(ne!==B.lane?(Fe&ne)===ne:(Lr&ne)===ne){var Q=B.revertLane;if(Q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ne===Qa&&(W=!0);else if((Lr&Q)===Q){B=B.next,Q===Qa&&(W=!0);continue}else ne={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(w=x=ne,E=m):x=x.next=ne,Oe.lanes|=Q,Yr|=Q;ne=B.action,Ys&&a(m,ne),m=B.hasEagerState?B.eagerState:a(m,ne)}else Q={lane:ne,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(w=x=Q,E=m):x=x.next=Q,Oe.lanes|=ne,Yr|=ne;B=B.next}while(B!==null&&B!==r);if(x===null?E=m:x.next=w,!Tn(m,n.memoizedState)&&(jt=!0,W&&(a=Ya,a!==null)))throw a;n.memoizedState=m,n.baseState=E,n.baseQueue=x,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function td(n){var r=wt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);Tn(m,r.memoizedState)||(jt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,l]}function gy(n,r,a){var l=Oe,f=wt(),m=Qe;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!Tn((Ze||f).memoizedState,a);if(E&&(f.memoizedState=a,jt=!0),f=f.queue,rd(vy.bind(null,l,f,n),[n]),f.getSnapshot!==r||E||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Wa(9,_y.bind(null,l,f,a,r),{destroy:void 0},null),nt===null)throw Error(s(349));m||(Lr&60)!==0||yy(l,r,a)}return a}function yy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Oe.updateQueue,r===null?(r=Ec(),Oe.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function _y(n,r,a,l){r.value=a,r.getSnapshot=l,Ey(r)&&Ay(n)}function vy(n,r,a){return a(function(){Ey(r)&&Ay(n)})}function Ey(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Tn(n,a)}catch{return!0}}function Ay(n){var r=Pr(n,2);r!==null&&un(r,n,2)}function nd(n){var r=dn();if(typeof n=="function"){var a=n;if(n=a(),Ys){oi(!0);try{a()}finally{oi(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:n},r}function Ty(n,r,a,l){return n.baseState=a,ed(n,Ze,typeof l=="function"?l:Qi)}function xS(n,r,a,l,f){if(bc(n))throw Error(s(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};b.T!==null?a(!0):m.isTransition=!1,l(m),a=r.pending,a===null?(m.next=r.pending=m,wy(r,m)):(m.next=a.next,r.pending=a.next=m)}}function wy(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var m=b.T,E={};b.T=E;try{var w=a(f,l),x=b.S;x!==null&&x(E,w),Sy(n,r,w)}catch(B){id(n,r,B)}finally{b.T=m}}else try{m=a(f,l),Sy(n,r,m)}catch(B){id(n,r,B)}}function Sy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){by(n,r,l)},function(l){return id(n,r,l)}):by(n,r,a)}function by(n,r,a){r.status="fulfilled",r.value=a,Ry(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,wy(n,a)))}function id(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Ry(r),r=r.next;while(r!==l)}n.action=null}function Ry(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Cy(n,r){return r}function Iy(n,r){if(Qe){var a=nt.formState;if(a!==null){e:{var l=Oe;if(Qe){if(Ft){t:{for(var f=Ft,m=_i;f.nodeType!==8;){if(!m){f=null;break t}if(f=ei(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ft=ei(f.nextSibling),l=f.data==="F!";break e}}Gs(l)}l=!1}l&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:r},a.queue=l,a=Ky.bind(null,Oe,l),l.dispatch=a,l=nd(!1),m=ud.bind(null,Oe,!1,l.queue),l=dn(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=xS.bind(null,Oe,f,m,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function Ny(n){var r=wt();return xy(r,Ze,n)}function xy(n,r,a){r=ed(n,r,Cy)[0],n=Tc(Qi)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?vl(r):r;var l=wt(),f=l.queue,m=f.dispatch;return a!==l.memoizedState&&(Oe.flags|=2048,Wa(9,DS.bind(null,f,a),{destroy:void 0},null)),[r,m,n]}function DS(n,r){n.action=r}function Dy(n){var r=wt(),a=Ze;if(a!==null)return xy(r,a,n);wt(),r=r.memoizedState,a=wt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Wa(n,r,a,l){return n={tag:n,create:r,inst:a,deps:l,next:null},r=Oe.updateQueue,r===null&&(r=Ec(),Oe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Oy(){return wt().memoizedState}function wc(n,r,a,l){var f=dn();Oe.flags|=n,f.memoizedState=Wa(1|r,a,{destroy:void 0},l===void 0?null:l)}function Sc(n,r,a,l){var f=wt();l=l===void 0?null:l;var m=f.memoizedState.inst;Ze!==null&&l!==null&&Yf(l,Ze.memoizedState.deps)?f.memoizedState=Wa(r,a,m,l):(Oe.flags|=n,f.memoizedState=Wa(1|r,a,m,l))}function ky(n,r){wc(8390656,8,n,r)}function rd(n,r){Sc(2048,8,n,r)}function My(n,r){return Sc(4,2,n,r)}function Py(n,r){return Sc(4,4,n,r)}function Uy(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Vy(n,r,a){a=a!=null?a.concat([n]):null,Sc(4,4,Uy.bind(null,r,n),a)}function sd(){}function Ly(n,r){var a=wt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Yf(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function jy(n,r){var a=wt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Yf(r,l[1]))return l[0];if(l=n(),Ys){oi(!0);try{n()}finally{oi(!1)}}return a.memoizedState=[l,r],l}function ad(n,r,a){return a===void 0||(Lr&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=z_(),Oe.lanes|=n,Yr|=n,a)}function By(n,r,a,l){return Tn(a,r)?a:Ka.current!==null?(n=ad(n,a,l),Tn(n,r)||(jt=!0),n):(Lr&42)===0?(jt=!0,n.memoizedState=a):(n=z_(),Oe.lanes|=n,Yr|=n,r)}function zy(n,r,a,l,f){var m=le.p;le.p=m!==0&&8>m?m:8;var E=b.T,w={};b.T=w,ud(n,!1,r,a);try{var x=f(),B=b.S;if(B!==null&&B(w,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var W=CS(x,l);El(n,r,W,Rn(n))}else El(n,r,l,Rn(n))}catch(ne){El(n,r,{then:function(){},status:"rejected",reason:ne},Rn())}finally{le.p=m,b.T=E}}function OS(){}function od(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=qy(n).queue;zy(n,f,r,ue,a===null?OS:function(){return Hy(n),a(l)})}function qy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ue},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Hy(n){var r=qy(n).next.queue;El(n,r,{},Rn())}function ld(){return Wt(Bl)}function Fy(){return wt().memoizedState}function Gy(){return wt().memoizedState}function kS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Rn();n=qr(a);var l=Hr(r,n,a);l!==null&&(un(l,r,a),wl(l,r,a)),r={cache:Gf()},n.payload=r;return}r=r.return}}function MS(n,r,a){var l=Rn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},bc(n)?Qy(r,a):(a=Lf(n,r,a,l),a!==null&&(un(a,n,l),Yy(a,r,l)))}function Ky(n,r,a){var l=Rn();El(n,r,a,l)}function El(n,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(bc(n))Qy(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,w=m(E,a);if(f.hasEagerState=!0,f.eagerState=w,Tn(w,E))return lc(n,r,f,0),nt===null&&oc(),!1}catch{}finally{}if(a=Lf(n,r,f,l),a!==null)return un(a,n,l),Yy(a,r,l),!0}return!1}function ud(n,r,a,l){if(l={lane:2,revertLane:Zd(),action:l,hasEagerState:!1,eagerState:null,next:null},bc(n)){if(r)throw Error(s(479))}else r=Lf(n,a,l,2),r!==null&&un(r,n,2)}function bc(n){var r=n.alternate;return n===Oe||r!==null&&r===Oe}function Qy(n,r){Xa=_c=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Yy(n,r,a){if((a&4194176)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,br(n,a)}}var Ei={readContext:Wt,use:Ac,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt};Ei.useCacheRefresh=vt,Ei.useMemoCache=vt,Ei.useHostTransitionStatus=vt,Ei.useFormState=vt,Ei.useActionState=vt,Ei.useOptimistic=vt;var Xs={readContext:Wt,use:Ac,useCallback:function(n,r){return dn().memoizedState=[n,r===void 0?null:r],n},useContext:Wt,useEffect:ky,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,wc(4194308,4,Uy.bind(null,r,n),a)},useLayoutEffect:function(n,r){return wc(4194308,4,n,r)},useInsertionEffect:function(n,r){wc(4,2,n,r)},useMemo:function(n,r){var a=dn();r=r===void 0?null:r;var l=n();if(Ys){oi(!0);try{n()}finally{oi(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=dn();if(a!==void 0){var f=a(r);if(Ys){oi(!0);try{a(r)}finally{oi(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=MS.bind(null,Oe,n),[l.memoizedState,n]},useRef:function(n){var r=dn();return n={current:n},r.memoizedState=n},useState:function(n){n=nd(n);var r=n.queue,a=Ky.bind(null,Oe,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:sd,useDeferredValue:function(n,r){var a=dn();return ad(a,n,r)},useTransition:function(){var n=nd(!1);return n=zy.bind(null,Oe,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Oe,f=dn();if(Qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(Fe&60)!==0||yy(l,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,ky(vy.bind(null,l,m,n),[n]),l.flags|=2048,Wa(9,_y.bind(null,l,m,a,r),{destroy:void 0},null),a},useId:function(){var n=dn(),r=nt.identifierPrefix;if(Qe){var a=Gi,l=Fi;a=(l&~(1<<32-sn(l)-1)).toString(32)+a,r=":"+r+"R"+a,a=vc++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=IS++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},useCacheRefresh:function(){return dn().memoizedState=kS.bind(null,Oe)}};Xs.useMemoCache=Jf,Xs.useHostTransitionStatus=ld,Xs.useFormState=Iy,Xs.useActionState=Iy,Xs.useOptimistic=function(n){var r=dn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ud.bind(null,Oe,!0,a),a.dispatch=r,[n,r]};var jr={readContext:Wt,use:Ac,useCallback:Ly,useContext:Wt,useEffect:rd,useImperativeHandle:Vy,useInsertionEffect:My,useLayoutEffect:Py,useMemo:jy,useReducer:Tc,useRef:Oy,useState:function(){return Tc(Qi)},useDebugValue:sd,useDeferredValue:function(n,r){var a=wt();return By(a,Ze.memoizedState,n,r)},useTransition:function(){var n=Tc(Qi)[0],r=wt().memoizedState;return[typeof n=="boolean"?n:vl(n),r]},useSyncExternalStore:gy,useId:Fy};jr.useCacheRefresh=Gy,jr.useMemoCache=Jf,jr.useHostTransitionStatus=ld,jr.useFormState=Ny,jr.useActionState=Ny,jr.useOptimistic=function(n,r){var a=wt();return Ty(a,Ze,n,r)};var $s={readContext:Wt,use:Ac,useCallback:Ly,useContext:Wt,useEffect:rd,useImperativeHandle:Vy,useInsertionEffect:My,useLayoutEffect:Py,useMemo:jy,useReducer:td,useRef:Oy,useState:function(){return td(Qi)},useDebugValue:sd,useDeferredValue:function(n,r){var a=wt();return Ze===null?ad(a,n,r):By(a,Ze.memoizedState,n,r)},useTransition:function(){var n=td(Qi)[0],r=wt().memoizedState;return[typeof n=="boolean"?n:vl(n),r]},useSyncExternalStore:gy,useId:Fy};$s.useCacheRefresh=Gy,$s.useMemoCache=Jf,$s.useHostTransitionStatus=ld,$s.useFormState=Dy,$s.useActionState=Dy,$s.useOptimistic=function(n,r){var a=wt();return Ze!==null?Ty(a,Ze,n,r):(a.baseState=n,[n,a.queue.dispatch])};function cd(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:I({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var hd={isMounted:function(n){return(n=n._reactInternals)?ve(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Rn(),f=qr(l);f.payload=r,a!=null&&(f.callback=a),r=Hr(n,f,l),r!==null&&(un(r,n,l),wl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Rn(),f=qr(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Hr(n,f,l),r!==null&&(un(r,n,l),wl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Rn(),l=qr(a);l.tag=2,r!=null&&(l.callback=r),r=Hr(n,l,a),r!==null&&(un(r,n,a),wl(r,n,a))}};function Xy(n,r,a,l,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,E):r.prototype&&r.prototype.isPureReactComponent?!ol(a,l)||!ol(f,m):!0}function $y(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&hd.enqueueReplaceState(r,r.state,null)}function Ws(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=I({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Rc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Wy(n){Rc(n)}function Zy(n){console.error(n)}function Jy(n){Rc(n)}function Cc(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function e_(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function fd(n,r,a){return a=qr(a),a.tag=3,a.payload={element:null},a.callback=function(){Cc(n,r)},a}function t_(n){return n=qr(n),n.tag=3,n}function n_(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){e_(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){e_(r,a,l),typeof f!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function PS(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Tl(r,a,f,!0),a=Ln.current,a!==null){switch(a.tag){case 13:return vi===null?Qd():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===qf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Xd(n,l,f)),!1;case 22:return a.flags|=65536,l===qf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Xd(n,l,f)),!1}throw Error(s(435,a.tag))}return Xd(n,l,f),Qd(),!1}if(Qe)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==zf&&(n=Error(s(422),{cause:l}),hl(Pn(n,a)))):(l!==zf&&(r=Error(s(423),{cause:l}),hl(Pn(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Pn(l,a),f=fd(n.stateNode,l,f),Cd(n,f),mt!==4&&(mt=2)),!1;var m=Error(s(520),{cause:l});if(m=Pn(m,a),Dl===null?Dl=[m]:Dl.push(m),mt!==4&&(mt=2),r===null)return!0;l=Pn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=fd(a.stateNode,l,n),Cd(a,n),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xr===null||!Xr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=t_(f),n_(f,n,a,l),Cd(a,f),!1}a=a.return}while(a!==null);return!1}var i_=Error(s(461)),jt=!1;function Gt(n,r,a,l){r.child=n===null?ly(r,null,a,l):Ks(r,n.child,a,l)}function r_(n,r,a,l,f){a=a.render;var m=r.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return Js(r),l=Xf(n,r,a,E,m,f),w=$f(),n!==null&&!jt?(Wf(n,r,f),Yi(n,r,f)):(Qe&&w&&jf(r),r.flags|=1,Gt(n,r,l,f),r.child)}function s_(n,r,a,l,f){if(n===null){var m=a.type;return typeof m=="function"&&!Pd(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,a_(n,r,m,l,f)):(n=Oc(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Ad(n,f)){var E=m.memoizedProps;if(a=a.compare,a=a!==null?a:ol,a(E,l)&&n.ref===r.ref)return Yi(n,r,f)}return r.flags|=1,n=Qr(m,l),n.ref=r.ref,n.return=r,r.child=n}function a_(n,r,a,l,f){if(n!==null){var m=n.memoizedProps;if(ol(m,l)&&n.ref===r.ref)if(jt=!1,r.pendingProps=l=m,Ad(n,f))(n.flags&131072)!==0&&(jt=!0);else return r.lanes=n.lanes,Yi(n,r,f)}return dd(n,r,a,l,f)}function o_(n,r,a){var l=r.pendingProps,f=l.children,m=(r.stateNode._pendingVisibility&2)!==0,E=n!==null?n.memoizedState:null;if(Al(n,r),l.mode==="hidden"||m){if((r.flags&128)!==0){if(l=E!==null?E.baseLanes|a:a,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return l_(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&yc(r,E!==null?E.cachePool:null),E!==null?uy(r,E):Hf(),cy(r);else return r.lanes=r.childLanes=536870912,l_(n,r,E!==null?E.baseLanes|a:a,a)}else E!==null?(yc(r,E.cachePool),uy(r,E),Vr(),r.memoizedState=null):(n!==null&&yc(r,null),Hf(),Vr());return Gt(n,r,f,a),r.child}function l_(n,r,a,l){var f=Qf();return f=f===null?null:{parent:Ot._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},n!==null&&yc(r,null),Hf(),cy(r),n!==null&&Tl(n,r,l,!0),null}function Al(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=2097664)}}function dd(n,r,a,l,f){return Js(r),a=Xf(n,r,a,l,void 0,f),l=$f(),n!==null&&!jt?(Wf(n,r,f),Yi(n,r,f)):(Qe&&l&&jf(r),r.flags|=1,Gt(n,r,a,f),r.child)}function u_(n,r,a,l,f,m){return Js(r),r.updateQueue=null,a=py(r,l,a,f),my(n),l=$f(),n!==null&&!jt?(Wf(n,r,m),Yi(n,r,m)):(Qe&&l&&jf(r),r.flags|=1,Gt(n,r,a,m),r.child)}function c_(n,r,a,l,f){if(Js(r),r.stateNode===null){var m=qa,E=a.contextType;typeof E=="object"&&E!==null&&(m=Wt(E)),m=new a(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},bd(r),E=a.contextType,m.context=typeof E=="object"&&E!==null?Wt(E):qa,m.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(cd(r,a,E,l),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&hd.enqueueReplaceState(m,m.state,null),bl(r,l,m,f),Sl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){m=r.stateNode;var w=r.memoizedProps,x=Ws(a,w);m.props=x;var B=m.context,W=a.contextType;E=qa,typeof W=="object"&&W!==null&&(E=Wt(W));var ne=a.getDerivedStateFromProps;W=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||B!==E)&&$y(r,m,l,E),zr=!1;var Q=r.memoizedState;m.state=Q,bl(r,l,m,f),Sl(),B=r.memoizedState,w||Q!==B||zr?(typeof ne=="function"&&(cd(r,a,ne,l),B=r.memoizedState),(x=zr||Xy(r,a,x,l,Q,B,E))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=B),m.props=l,m.state=B,m.context=E,l=x):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Rd(n,r),E=r.memoizedProps,W=Ws(a,E),m.props=W,ne=r.pendingProps,Q=m.context,B=a.contextType,x=qa,typeof B=="object"&&B!==null&&(x=Wt(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==ne||Q!==x)&&$y(r,m,l,x),zr=!1,Q=r.memoizedState,m.state=Q,bl(r,l,m,f),Sl();var $=r.memoizedState;E!==ne||Q!==$||zr||n!==null&&n.dependencies!==null&&Ic(n.dependencies)?(typeof w=="function"&&(cd(r,a,w,l),$=r.memoizedState),(W=zr||Xy(r,a,W,l,Q,$,x)||n!==null&&n.dependencies!==null&&Ic(n.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,$,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,$,x)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),m.props=l,m.state=$,m.context=x,l=W):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),l=!1)}return m=l,Al(n,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&l?(r.child=Ks(r,n.child,null,f),r.child=Ks(r,null,a,f)):Gt(n,r,a,f),r.memoizedState=m.state,n=r.child):n=Yi(n,r,f),n}function h_(n,r,a,l){return cl(),r.flags|=256,Gt(n,r,a,l),r.child}var md={dehydrated:null,treeContext:null,retryLane:0};function pd(n){return{baseLanes:n,cachePool:dy()}}function gd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=qn),n}function f_(n,r,a){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(Dt.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(Qe){if(f?Ur(r):Vr(),Qe){var w=Ft,x;if(x=w){e:{for(x=w,w=_i;x.nodeType!==8;){if(!w){w=null;break e}if(x=ei(x.nextSibling),x===null){w=null;break e}}w=x}w!==null?(r.memoizedState={dehydrated:w,treeContext:Hs!==null?{id:Fi,overflow:Gi}:null,retryLane:536870912},x=zn(18,null,null,0),x.stateNode=w,x.return=r,r.child=x,ln=r,Ft=null,x=!0):x=!1}x||Gs(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?r.lanes=16:r.lanes=536870912,null;Ki(r)}return w=l.children,l=l.fallback,f?(Vr(),f=r.mode,w=_d({mode:"hidden",children:w},f),l=ta(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,f=r.child,f.memoizedState=pd(a),f.childLanes=gd(n,E,a),r.memoizedState=md,l):(Ur(r),yd(r,w))}if(x=n.memoizedState,x!==null&&(w=x.dehydrated,w!==null)){if(m)r.flags&256?(Ur(r),r.flags&=-257,r=vd(n,r,a)):r.memoizedState!==null?(Vr(),r.child=n.child,r.flags|=128,r=null):(Vr(),f=l.fallback,w=r.mode,l=_d({mode:"visible",children:l.children},w),f=ta(f,w,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,Ks(r,n.child,null,a),l=r.child,l.memoizedState=pd(a),l.childLanes=gd(n,E,a),r.memoizedState=md,r=f);else if(Ur(r),w.data==="$!"){if(E=w.nextSibling&&w.nextSibling.dataset,E)var B=E.dgst;E=B,l=Error(s(419)),l.stack="",l.digest=E,hl({value:l,source:null,stack:null}),r=vd(n,r,a)}else if(jt||Tl(n,r,a,!1),E=(a&n.childLanes)!==0,jt||E){if(E=nt,E!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane)throw x.retryLane=l,Pr(n,l),un(E,n,l),i_}w.data==="$?"||Qd(),r=vd(n,r,a)}else w.data==="$?"?(r.flags|=128,r.child=n.child,r=$S.bind(null,n),w._reactRetry=r,r=null):(n=x.treeContext,Ft=ei(w.nextSibling),ln=r,Qe=!0,Zn=null,_i=!1,n!==null&&(Un[Vn++]=Fi,Un[Vn++]=Gi,Un[Vn++]=Hs,Fi=n.id,Gi=n.overflow,Hs=r),r=yd(r,l.children),r.flags|=4096);return r}return f?(Vr(),f=l.fallback,w=r.mode,x=n.child,B=x.sibling,l=Qr(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&31457280,B!==null?f=Qr(B,f):(f=ta(f,w,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,w=n.child.memoizedState,w===null?w=pd(a):(x=w.cachePool,x!==null?(B=Ot._currentValue,x=x.parent!==B?{parent:B,pool:B}:x):x=dy(),w={baseLanes:w.baseLanes|a,cachePool:x}),f.memoizedState=w,f.childLanes=gd(n,E,a),r.memoizedState=md,l):(Ur(r),a=n.child,n=a.sibling,a=Qr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=a,r.memoizedState=null,a)}function yd(n,r){return r=_d({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function _d(n,r){return L_(n,r,0,null)}function vd(n,r,a){return Ks(r,n.child,null,a),n=yd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function d_(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),wd(n.return,r,a)}function Ed(n,r,a,l,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function m_(n,r,a){var l=r.pendingProps,f=l.revealOrder,m=l.tail;if(Gt(n,r,l.children,a),l=Dt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&d_(n,a,r);else if(n.tag===19)d_(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(me(Dt,l),f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&gc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Ed(r,!1,f,a,m);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&gc(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Ed(r,!0,a,null,m);break;case"together":Ed(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Yi(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Yr|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(Tl(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=Qr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Qr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Ad(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Ic(n)))}function US(n,r,a){switch(r.tag){case 3:Qn(r,r.stateNode.containerInfo),Br(r,Ot,n.memoizedState.cache),cl();break;case 27:case 5:Oi(r);break;case 4:Qn(r,r.stateNode.containerInfo);break;case 10:Br(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ur(r),r.flags|=128,null):(a&r.child.childLanes)!==0?f_(n,r,a):(Ur(r),n=Yi(n,r,a),n!==null?n.sibling:null);Ur(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Tl(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return m_(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Dt,Dt.current),l)break;return null;case 22:case 23:return r.lanes=0,o_(n,r,a);case 24:Br(r,Ot,n.memoizedState.cache)}return Yi(n,r,a)}function p_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)jt=!0;else{if(!Ad(n,a)&&(r.flags&128)===0)return jt=!1,US(n,r,a);jt=(n.flags&131072)!==0}else jt=!1,Qe&&(r.flags&1048576)!==0&&Jg(r,hc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Pd(l)?(n=Ws(l,n),r.tag=1,r=c_(null,r,l,n,a)):(r.tag=0,r=dd(null,r,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===k){r.tag=11,r=r_(null,r,l,n,a);break e}else if(f===z){r.tag=14,r=s_(null,r,l,n,a);break e}}throw r=R(l)||l,Error(s(306,r,""))}}return r;case 0:return dd(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Ws(l,r.pendingProps),c_(n,r,l,f,a);case 3:e:{if(Qn(r,r.stateNode.containerInfo),n===null)throw Error(s(387));var m=r.pendingProps;f=r.memoizedState,l=f.element,Rd(n,r),bl(r,m,null,a);var E=r.memoizedState;if(m=E.cache,Br(r,Ot,m),m!==f.cache&&Sd(r,[Ot],a,!0),Sl(),m=E.element,f.isDehydrated)if(f={element:m,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=h_(n,r,m,a);break e}else if(m!==l){l=Pn(Error(s(424)),r),hl(l),r=h_(n,r,m,a);break e}else for(Ft=ei(r.stateNode.containerInfo.firstChild),ln=r,Qe=!0,Zn=null,_i=!0,a=ly(r,null,m,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(cl(),m===l){r=Yi(n,r,a);break e}Gt(n,r,m,a)}r=r.child}return r;case 26:return Al(n,r),n===null?(a=_v(r.type,null,r.pendingProps,null))?r.memoizedState=a:Qe||(a=r.type,n=r.pendingProps,l=Fc(ze.current).createElement(a),l[Ut]=r,l[It]=n,Kt(l,a,n),ot(l),r.stateNode=l):r.memoizedState=_v(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Oi(r),n===null&&Qe&&(l=r.stateNode=pv(r.type,r.pendingProps,ze.current),ln=r,_i=!0,Ft=ei(l.firstChild)),l=r.pendingProps.children,n!==null||Qe?Gt(n,r,l,a):r.child=Ks(r,null,l,a),Al(n,r),r.child;case 5:return n===null&&Qe&&((f=l=Ft)&&(l=fb(l,r.type,r.pendingProps,_i),l!==null?(r.stateNode=l,ln=r,Ft=ei(l.firstChild),_i=!1,f=!0):f=!1),f||Gs(r)),Oi(r),f=r.type,m=r.pendingProps,E=n!==null?n.memoizedProps:null,l=m.children,om(f,m)?l=null:E!==null&&om(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=Xf(n,r,NS,null,null,a),Bl._currentValue=f),Al(n,r),Gt(n,r,l,a),r.child;case 6:return n===null&&Qe&&((n=a=Ft)&&(a=db(a,r.pendingProps,_i),a!==null?(r.stateNode=a,ln=r,Ft=null,n=!0):n=!1),n||Gs(r)),null;case 13:return f_(n,r,a);case 4:return Qn(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=Ks(r,null,l,a):Gt(n,r,l,a),r.child;case 11:return r_(n,r,r.type,r.pendingProps,a);case 7:return Gt(n,r,r.pendingProps,a),r.child;case 8:return Gt(n,r,r.pendingProps.children,a),r.child;case 12:return Gt(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Br(r,r.type,l.value),Gt(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Js(r),f=Wt(f),l=l(f),r.flags|=1,Gt(n,r,l,a),r.child;case 14:return s_(n,r,r.type,r.pendingProps,a);case 15:return a_(n,r,r.type,r.pendingProps,a);case 19:return m_(n,r,a);case 22:return o_(n,r,a);case 24:return Js(r),l=Wt(Ot),n===null?(f=Qf(),f===null&&(f=nt,m=Gf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:l,cache:f},bd(r),Br(r,Ot,f)):((n.lanes&a)!==0&&(Rd(n,r),bl(r,null,null,a),Sl()),f=n.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Br(r,Ot,l)):(l=m.cache,Br(r,Ot,l),l!==f.cache&&Sd(r,[Ot],a,!0))),Gt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var Td=Ue(null),Zs=null,Xi=null;function Br(n,r,a){me(Td,r._currentValue),r._currentValue=a}function $i(n){n._currentValue=Td.current,de(Td)}function wd(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function Sd(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var x=0;x<r.length;x++)if(w.context===r[x]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),wd(m.return,a,n),l||(E=null);break e}m=w.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,m=E.alternate,m!==null&&(m.lanes|=a),wd(E,a,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Tl(n,r,a,l){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var w=f.type;Tn(f.pendingProps.value,E.value)||(n!==null?n.push(w):n=[w])}}else if(f===Kn.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bl):n=[Bl])}f=f.return}n!==null&&Sd(r,n,a,l),r.flags|=262144}function Ic(n){for(n=n.firstContext;n!==null;){if(!Tn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Js(n){Zs=n,Xi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return g_(Zs,n)}function Nc(n,r){return Zs===null&&Js(n),g_(n,r)}function g_(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Xi===null){if(n===null)throw Error(s(308));Xi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Xi=Xi.next=r;return a}var zr=!1;function bd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function qr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Hr(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=uc(n),Wg(n,null,a),r}return lc(n,l,r,a),uc(n)}function wl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194176)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,br(n,a)}}function Cd(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Id=!1;function Sl(){if(Id){var n=Ya;if(n!==null)throw n}}function bl(n,r,a,l){Id=!1;var f=n.updateQueue;zr=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var x=w,B=x.next;x.next=null,E===null?m=B:E.next=B,E=x;var W=n.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==E&&(w===null?W.firstBaseUpdate=B:w.next=B,W.lastBaseUpdate=x))}if(m!==null){var ne=f.baseState;E=0,W=B=x=null,w=m;do{var Q=w.lane&-536870913,$=Q!==w.lane;if($?(Fe&Q)===Q:(l&Q)===Q){Q!==0&&Q===Qa&&(Id=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=n,Ie=w;Q=r;var pt=a;switch(Ie.tag){case 1:if(Ae=Ie.payload,typeof Ae=="function"){ne=Ae.call(pt,ne,Q);break e}ne=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ie.payload,Q=typeof Ae=="function"?Ae.call(pt,ne,Q):Ae,Q==null)break e;ne=I({},ne,Q);break e;case 2:zr=!0}}Q=w.callback,Q!==null&&(n.flags|=64,$&&(n.flags|=8192),$=f.callbacks,$===null?f.callbacks=[Q]:$.push(Q))}else $={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(B=W=$,x=ne):W=W.next=$,E|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;$=w,w=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);W===null&&(x=ne),f.baseState=x,f.firstBaseUpdate=B,f.lastBaseUpdate=W,m===null&&(f.shared.lanes=0),Yr|=E,n.lanes=E,n.memoizedState=ne}}function y_(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function __(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)y_(a[n],r)}function Rl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var m=a.create,E=a.inst;l=m(),E.destroy=l}a=a.next}while(a!==f)}}catch(w){tt(r,r.return,w)}}function Fr(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,f=r;var x=a;try{w()}catch(B){tt(f,x,B)}}}l=l.next}while(l!==m)}}catch(B){tt(r,r.return,B)}}function v_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{__(r,a)}catch(l){tt(n,n.return,l)}}}function E_(n,r,a){a.props=Ws(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){tt(n,r,l)}}function ea(n,r){try{var a=n.ref;if(a!==null){var l=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof a=="function"?n.refCleanup=a(f):a.current=f}}catch(m){tt(n,r,m)}}function wn(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){tt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){tt(n,r,f)}else a.current=null}function A_(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){tt(n,n.return,f)}}function T_(n,r,a){try{var l=n.stateNode;ob(l,n.type,a,r),l[It]=r}catch(f){tt(n,n.return,f)}}function w_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Nd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||w_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xd(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Hc));else if(l!==4&&l!==27&&(n=n.child,n!==null))for(xd(n,r,a),n=n.sibling;n!==null;)xd(n,r,a),n=n.sibling}function xc(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&l!==27&&(n=n.child,n!==null))for(xc(n,r,a),n=n.sibling;n!==null;)xc(n,r,a),n=n.sibling}var Wi=!1,dt=!1,Dd=!1,S_=typeof WeakSet=="function"?WeakSet:Set,Bt=null,b_=!1;function VS(n,r){if(n=n.containerInfo,sm=$c,n=qg(n),kf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var E=0,w=-1,x=-1,B=0,W=0,ne=n,Q=null;t:for(;;){for(var $;ne!==a||f!==0&&ne.nodeType!==3||(w=E+f),ne!==m||l!==0&&ne.nodeType!==3||(x=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),($=ne.firstChild)!==null;)Q=ne,ne=$;for(;;){if(ne===n)break t;if(Q===a&&++B===f&&(w=E),Q===m&&++W===l&&(x=E),($=ne.nextSibling)!==null)break;ne=Q,Q=ne.parentNode}ne=$}a=w===-1||x===-1?null:{start:w,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(am={focusedElem:n,selectionRange:a},$c=!1,Bt=r;Bt!==null;)if(r=Bt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Bt=n;else for(;Bt!==null;){switch(r=Bt,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ae=Ws(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ae,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){tt(a,a.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)cm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":cm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,Bt=n;break}Bt=r.return}return Ae=b_,b_=!1,Ae}function R_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ji(n,a),l&4&&Rl(5,a);break;case 1:if(Ji(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(w){tt(a,a.return,w)}else{var f=Ws(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(w){tt(a,a.return,w)}}l&64&&v_(a),l&512&&ea(a,a.return);break;case 3:if(Ji(n,a),l&64&&(l=a.updateQueue,l!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{__(l,n)}catch(w){tt(a,a.return,w)}}break;case 26:Ji(n,a),l&512&&ea(a,a.return);break;case 27:case 5:Ji(n,a),r===null&&l&4&&A_(a),l&512&&ea(a,a.return);break;case 12:Ji(n,a);break;case 13:Ji(n,a),l&4&&N_(n,a);break;case 22:if(f=a.memoizedState!==null||Wi,!f){r=r!==null&&r.memoizedState!==null||dt;var m=Wi,E=dt;Wi=f,(dt=r)&&!E?Gr(n,a,(a.subtreeFlags&8772)!==0):Ji(n,a),Wi=m,dt=E}l&512&&(a.memoizedProps.mode==="manual"?ea(a,a.return):wn(a,a.return));break;default:Ji(n,a)}}function C_(n){var r=n.alternate;r!==null&&(n.alternate=null,C_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&xs(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var St=null,Sn=!1;function Zi(n,r,a){for(a=a.child;a!==null;)I_(n,r,a),a=a.sibling}function I_(n,r,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Er,a)}catch{}switch(a.tag){case 26:dt||wn(a,r),Zi(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:dt||wn(a,r);var l=St,f=Sn;for(St=a.stateNode,Zi(n,r,a),a=a.stateNode,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);xs(a),St=l,Sn=f;break;case 5:dt||wn(a,r);case 6:f=St;var m=Sn;if(St=null,Zi(n,r,a),St=f,Sn=m,St!==null)if(Sn)try{n=St,l=a.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)}catch(E){tt(a,r,E)}else try{St.removeChild(a.stateNode)}catch(E){tt(a,r,E)}break;case 18:St!==null&&(Sn?(r=St,a=a.stateNode,r.nodeType===8?um(r.parentNode,a):r.nodeType===1&&um(r,a),Fl(r)):um(St,a.stateNode));break;case 4:l=St,f=Sn,St=a.stateNode.containerInfo,Sn=!0,Zi(n,r,a),St=l,Sn=f;break;case 0:case 11:case 14:case 15:dt||Fr(2,a,r),dt||Fr(4,a,r),Zi(n,r,a);break;case 1:dt||(wn(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&E_(a,r,l)),Zi(n,r,a);break;case 21:Zi(n,r,a);break;case 22:dt||wn(a,r),dt=(l=dt)||a.memoizedState!==null,Zi(n,r,a),dt=l;break;default:Zi(n,r,a)}}function N_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fl(n)}catch(a){tt(r,r.return,a)}}function LS(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new S_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new S_),r;default:throw Error(s(435,n.tag))}}function Od(n,r){var a=LS(n);r.forEach(function(l){var f=WS.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function jn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=n,E=r,w=E;e:for(;w!==null;){switch(w.tag){case 27:case 5:St=w.stateNode,Sn=!1;break e;case 3:St=w.stateNode.containerInfo,Sn=!0;break e;case 4:St=w.stateNode.containerInfo,Sn=!0;break e}w=w.return}if(St===null)throw Error(s(160));I_(m,E,f),St=null,Sn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)x_(r,n),r=r.sibling}var Jn=null;function x_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:jn(r,n),Bn(n),l&4&&(Fr(3,n,n.return),Rl(3,n),Fr(5,n,n.return));break;case 1:jn(r,n),Bn(n),l&512&&(dt||a===null||wn(a,a.return)),l&64&&Wi&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Jn;if(jn(r,n),Bn(n),l&512&&(dt||a===null||wn(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Cr]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Kt(m,l,a),m[Ut]=n,ot(m),l=m;break e;case"link":var E=Av("link","href",f).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(m=E[w],m.getAttribute("href")===(a.href==null?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break t}}m=f.createElement(l),Kt(m,l,a),f.head.appendChild(m);break;case"meta":if(E=Av("meta","content",f).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(m=E[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break t}}m=f.createElement(l),Kt(m,l,a),f.head.appendChild(m);break;default:throw Error(s(468,l))}m[Ut]=n,ot(m),l=m}n.stateNode=l}else Tv(f,n.type,n.stateNode);else n.stateNode=Ev(f,l,n.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Tv(f,n.type,n.stateNode):Ev(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&T_(n,n.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&n.alternate===null){f=n.stateNode,m=n.memoizedProps;try{for(var x=f.firstChild;x;){var B=x.nextSibling,W=x.nodeName;x[Cr]||W==="HEAD"||W==="BODY"||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=B}for(var ne=n.type,Q=f.attributes;Q.length;)f.removeAttributeNode(Q[0]);Kt(f,ne,m),f[Ut]=n,f[It]=m}catch(Ae){tt(n,n.return,Ae)}}case 5:if(jn(r,n),Bn(n),l&512&&(dt||a===null||wn(a,a.return)),n.flags&32){f=n.stateNode;try{xn(f,"")}catch(Ae){tt(n,n.return,Ae)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,T_(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Dd=!0);break;case 6:if(jn(r,n),Bn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(Ae){tt(n,n.return,Ae)}}break;case 3:if(Qc=null,f=Jn,Jn=Gc(r.containerInfo),jn(r,n),Jn=f,Bn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(Ae){tt(n,n.return,Ae)}Dd&&(Dd=!1,D_(n));break;case 4:l=Jn,Jn=Gc(n.stateNode.containerInfo),jn(r,n),Bn(n),Jn=l;break;case 12:jn(r,n),Bn(n);break;case 13:jn(r,n),Bn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zd=hn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Od(n,l)));break;case 22:if(l&512&&(dt||a===null||wn(a,a.return)),x=n.memoizedState!==null,B=a!==null&&a.memoizedState!==null,W=Wi,ne=dt,Wi=W||x,dt=ne||B,jn(r,n),dt=ne,Wi=W,Bn(n),r=n.stateNode,r._current=n,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,l&8192&&(r._visibility=x?r._visibility&-2:r._visibility|1,x&&(r=Wi||dt,a===null||B||r||Za(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(a=null,r=n;;){if(r.tag===5||r.tag===26||r.tag===27){if(a===null){B=a=r;try{if(f=B.stateNode,x)m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{E=B.stateNode,w=B.memoizedProps.style;var $=w!=null&&w.hasOwnProperty("display")?w.display:null;E.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ae){tt(B,B.return,Ae)}}}else if(r.tag===6){if(a===null){B=r;try{B.stateNode.nodeValue=x?"":B.memoizedProps}catch(Ae){tt(B,B.return,Ae)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Od(n,a))));break;case 19:jn(r,n),Bn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Od(n,l)));break;case 21:break;default:jn(r,n),Bn(n)}}function Bn(n){var r=n.flags;if(r&2){try{if(n.tag!==27){e:{for(var a=n.return;a!==null;){if(w_(a)){var l=a;break e}a=a.return}throw Error(s(160))}switch(l.tag){case 27:var f=l.stateNode,m=Nd(n);xc(n,m,f);break;case 5:var E=l.stateNode;l.flags&32&&(xn(E,""),l.flags&=-33);var w=Nd(n);xc(n,w,E);break;case 3:case 4:var x=l.stateNode.containerInfo,B=Nd(n);xd(n,B,x);break;default:throw Error(s(161))}}}catch(W){tt(n,n.return,W)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function D_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;D_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ji(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)R_(n,r.alternate,r),r=r.sibling}function Za(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Fr(4,r,r.return),Za(r);break;case 1:wn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&E_(r,r.return,a),Za(r);break;case 26:case 27:case 5:wn(r,r.return),Za(r);break;case 22:wn(r,r.return),r.memoizedState===null&&Za(r);break;default:Za(r)}n=n.sibling}}function Gr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Gr(f,m,a),Rl(4,m);break;case 1:if(Gr(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){tt(l,l.return,B)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)y_(x[f],w)}catch(B){tt(l,l.return,B)}}a&&E&64&&v_(m),ea(m,m.return);break;case 26:case 27:case 5:Gr(f,m,a),a&&l===null&&E&4&&A_(m),ea(m,m.return);break;case 12:Gr(f,m,a);break;case 13:Gr(f,m,a),a&&E&4&&N_(f,m);break;case 22:m.memoizedState===null&&Gr(f,m,a),ea(m,m.return);break;default:Gr(f,m,a)}r=r.sibling}}function kd(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&gl(a))}function Md(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&gl(n))}function Kr(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)O_(n,r,a,l),r=r.sibling}function O_(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Kr(n,r,a,l),f&2048&&Rl(9,r);break;case 3:Kr(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&gl(n)));break;case 12:if(f&2048){Kr(n,r,a,l),n=r.stateNode;try{var m=r.memoizedProps,E=m.id,w=m.onPostCommit;typeof w=="function"&&w(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){tt(r,r.return,x)}}else Kr(n,r,a,l);break;case 23:break;case 22:m=r.stateNode,r.memoizedState!==null?m._visibility&4?Kr(n,r,a,l):Cl(n,r):m._visibility&4?Kr(n,r,a,l):(m._visibility|=4,Ja(n,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&kd(r.alternate,r);break;case 24:Kr(n,r,a,l),f&2048&&Md(r.alternate,r);break;default:Kr(n,r,a,l)}}function Ja(n,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,E=r,w=a,x=l,B=E.flags;switch(E.tag){case 0:case 11:case 15:Ja(m,E,w,x,f),Rl(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&4?Ja(m,E,w,x,f):Cl(m,E):(W._visibility|=4,Ja(m,E,w,x,f)),f&&B&2048&&kd(E.alternate,E);break;case 24:Ja(m,E,w,x,f),f&&B&2048&&Md(E.alternate,E);break;default:Ja(m,E,w,x,f)}r=r.sibling}}function Cl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Cl(a,l),f&2048&&kd(l.alternate,l);break;case 24:Cl(a,l),f&2048&&Md(l.alternate,l);break;default:Cl(a,l)}r=r.sibling}}var Il=8192;function eo(n){if(n.subtreeFlags&Il)for(n=n.child;n!==null;)k_(n),n=n.sibling}function k_(n){switch(n.tag){case 26:eo(n),n.flags&Il&&n.memoizedState!==null&&Rb(Jn,n.memoizedState,n.memoizedProps);break;case 5:eo(n);break;case 3:case 4:var r=Jn;Jn=Gc(n.stateNode.containerInfo),eo(n),Jn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Il,Il=16777216,eo(n),Il=r):eo(n));break;default:eo(n)}}function M_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Nl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Bt=l,U_(l,n)}M_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P_(n),n=n.sibling}function P_(n){switch(n.tag){case 0:case 11:case 15:Nl(n),n.flags&2048&&Fr(9,n,n.return);break;case 3:Nl(n);break;case 12:Nl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&4&&(n.return===null||n.return.tag!==13)?(r._visibility&=-5,Dc(n)):Nl(n);break;default:Nl(n)}}function Dc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Bt=l,U_(l,n)}M_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Fr(8,r,r.return),Dc(r);break;case 22:a=r.stateNode,a._visibility&4&&(a._visibility&=-5,Dc(r));break;default:Dc(r)}n=n.sibling}}function U_(n,r){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Fr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Bt=l;else e:for(a=n;Bt!==null;){l=Bt;var f=l.sibling,m=l.return;if(C_(l),l===a){Bt=null;break e}if(f!==null){f.return=m,Bt=f;break e}Bt=m}}}function jS(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(n,r,a,l){return new jS(n,r,a,l)}function Pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qr(n,r){var a=n.alternate;return a===null?(a=zn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&31457280,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function V_(n,r){n.flags&=31457282;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Oc(n,r,a,l,f,m){var E=0;if(l=n,typeof n=="function")Pd(n)&&(E=1);else if(typeof n=="string")E=Sb(n,a,De.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case p:return ta(a.children,f,m,r);case g:E=8,f|=24;break;case A:return n=zn(12,a,r,f|2),n.elementType=A,n.lanes=m,n;case G:return n=zn(13,a,r,f),n.elementType=G,n.lanes=m,n;case U:return n=zn(19,a,r,f),n.elementType=U,n.lanes=m,n;case Y:return L_(a,f,m,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:case D:E=10;break e;case C:E=9;break e;case k:E=11;break e;case z:E=14;break e;case H:E=16,l=null;break e}E=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=zn(E,a,r,f),r.elementType=n,r.type=l,r.lanes=m,r}function ta(n,r,a,l){return n=zn(7,n,l,r),n.lanes=a,n}function L_(n,r,a,l){n=zn(22,n,l,r),n.elementType=Y,n.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var m=f._current;if(m===null)throw Error(s(456));if((f._pendingVisibility&2)===0){var E=Pr(m,2);E!==null&&(f._pendingVisibility|=2,un(E,m,2))}},attach:function(){var m=f._current;if(m===null)throw Error(s(456));if((f._pendingVisibility&2)!==0){var E=Pr(m,2);E!==null&&(f._pendingVisibility&=-3,un(E,m,2))}}};return n.stateNode=f,n}function Ud(n,r,a){return n=zn(6,n,null,r),n.lanes=a,n}function Vd(n,r,a){return r=zn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function er(n){n.flags|=4}function j_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!wv(r)){if(r=Ln.current,r!==null&&((Fe&4194176)===Fe?vi!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||r!==vi))throw dl=qf,ny;n.flags|=8192}}function kc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?wr():536870912,n.lanes|=r,no|=r)}function xl(n,r){if(!Qe)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function BS(n,r,a){var l=r.pendingProps;switch(Bf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),$i(Ot),vn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(ul(r)?er(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Zn!==null&&(Gd(Zn),Zn=null))),lt(r),null;case 26:return a=r.memoizedState,n===null?(er(r),a!==null?(lt(r),j_(r,a)):(lt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(er(r),lt(r),j_(r,a)):(lt(r),r.flags&=-16777217):(n.memoizedProps!==l&&er(r),lt(r),r.flags&=-16777217),null;case 27:Rs(r),a=ze.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&er(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return lt(r),null}n=De.current,ul(r)?ey(r):(n=pv(f,l,a),r.stateNode=n,er(r))}return lt(r),null;case 5:if(Rs(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&er(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return lt(r),null}if(n=De.current,ul(r))ey(r);else{switch(f=Fc(ze.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Ut]=r,n[It]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Kt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&er(r)}}return lt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&er(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=ze.current,ul(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=ln,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ut]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||uv(n.nodeValue,a)),n||Gs(r)}else n=Fc(n).createTextNode(l),n[Ut]=r,r.stateNode=n}return lt(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ul(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ut]=r}else cl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),f=!1}else Zn!==null&&(Gd(Zn),Zn=null),f=!0;if(!f)return r.flags&256?(Ki(r),r):(Ki(r),null)}if(Ki(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),kc(r,r.updateQueue),lt(r),null;case 4:return vn(),n===null&&nm(r.stateNode.containerInfo),lt(r),null;case 10:return $i(r.type),lt(r),null;case 19:if(de(Dt),f=r.memoizedState,f===null)return lt(r),null;if(l=(r.flags&128)!==0,m=f.rendering,m===null)if(l)xl(f,!1);else{if(mt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=gc(n),m!==null){for(r.flags|=128,xl(f,!1),n=m.updateQueue,r.updateQueue=n,kc(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)V_(a,n),a=a.sibling;return me(Dt,Dt.current&1|2),r.child}n=n.sibling}f.tail!==null&&hn()>Mc&&(r.flags|=128,l=!0,xl(f,!1),r.lanes=4194304)}else{if(!l)if(n=gc(m),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,kc(r,n),xl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Qe)return lt(r),null}else 2*hn()-f.renderingStartTime>Mc&&a!==536870912&&(r.flags|=128,l=!0,xl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=hn(),r.sibling=null,n=Dt.current,me(Dt,l?n&1|2:n&1),r):(lt(r),null);case 22:case 23:return Ki(r),Ff(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),a=r.updateQueue,a!==null&&kc(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&de(Qs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),$i(Ot),lt(r),null;case 25:return null}throw Error(s(156,r.tag))}function zS(n,r){switch(Bf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return $i(Ot),vn(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Rs(r),null;case 13:if(Ki(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));cl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return de(Dt),null;case 4:return vn(),null;case 10:return $i(r.type),null;case 22:case 23:return Ki(r),Ff(),n!==null&&de(Qs),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return $i(Ot),null;case 25:return null;default:return null}}function B_(n,r){switch(Bf(r),r.tag){case 3:$i(Ot),vn();break;case 26:case 27:case 5:Rs(r);break;case 4:vn();break;case 13:Ki(r);break;case 19:de(Dt);break;case 10:$i(r.type);break;case 22:case 23:Ki(r),Ff(),n!==null&&de(Qs);break;case 24:$i(Ot)}}var qS={getCacheForType:function(n){var r=Wt(Ot),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},HS=typeof WeakMap=="function"?WeakMap:Map,ut=0,nt=null,Pe=null,Fe=0,it=0,bn=null,tr=!1,to=!1,Ld=!1,nr=0,mt=0,Yr=0,na=0,jd=0,qn=0,no=0,Dl=null,Ai=null,Bd=!1,zd=0,Mc=1/0,Pc=null,Xr=null,Uc=!1,ia=null,Ol=0,qd=0,Hd=null,kl=0,Fd=null;function Rn(){if((ut&2)!==0&&Fe!==0)return Fe&-Fe;if(b.T!==null){var n=Qa;return n!==0?n:Zd()}return qu()}function z_(){qn===0&&(qn=(Fe&536870912)===0||Qe?Go():536870912);var n=Ln.current;return n!==null&&(n.flags|=32),qn}function un(n,r,a){(n===nt&&it===2||n.cancelPendingCommit!==null)&&(io(n,0),ir(n,Fe,qn,!1)),_t(n,a),((ut&2)===0||n!==nt)&&(n===nt&&((ut&2)===0&&(na|=a),mt===4&&ir(n,Fe,qn,!1)),Ti(n))}function q_(n,r,a){if((ut&6)!==0)throw Error(s(327));var l=!a&&(r&60)===0&&(r&n.expiredLanes)===0||Tr(n,r),f=l?KS(n,r):Yd(n,r,!0),m=l;do{if(f===0){to&&!l&&ir(n,r,0,!1);break}else if(f===6)ir(n,r,0,!tr);else{if(a=n.current.alternate,m&&!FS(a)){f=Yd(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var w=n;f=Dl;var x=w.current.memoizedState.isDehydrated;if(x&&(io(w,E).flags|=256),E=Yd(w,E,!1),E!==2){if(Ld&&!x){w.errorRecoveryDisabledLanes|=m,na|=m,f=4;break e}m=Ai,Ai=f,m!==null&&Gd(m)}f=E}if(m=!1,f!==2)continue}}if(f===1){io(n,0),ir(n,r,0,!0);break}e:{switch(l=n,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){ir(l,r,qn,!tr);break e}break;case 2:Ai=null;break;case 3:case 5:break;default:throw Error(s(329))}if(l.finishedWork=a,l.finishedLanes=r,(r&62914560)===r&&(m=zd+300-hn(),10<m)){if(ir(l,r,qn,!tr),In(l,0)!==0)break e;l.timeoutHandle=fv(H_.bind(null,l,a,Ai,Pc,Bd,r,qn,na,no,tr,2,-0,0),m);break e}H_(l,a,Ai,Pc,Bd,r,qn,na,no,tr,0,-0,0)}}break}while(!0);Ti(n)}function Gd(n){Ai===null?Ai=n:Ai.push.apply(Ai,n)}function H_(n,r,a,l,f,m,E,w,x,B,W,ne,Q){var $=r.subtreeFlags;if(($&8192||($&16785408)===16785408)&&(jl={stylesheets:null,count:0,unsuspend:bb},k_(r),r=Cb(),r!==null)){n.cancelPendingCommit=r($_.bind(null,n,a,l,f,E,w,x,1,ne,Q)),ir(n,m,E,!B);return}$_(n,a,l,f,E,w,x,W,ne,Q)}function FS(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!Tn(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ir(n,r,a,l){r&=~jd,r&=~na,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var m=31-sn(f),E=1<<m;l[m]=-1,f&=~E}a!==0&&Sr(n,a,r)}function Vc(){return(ut&6)===0?(Ml(0),!1):!0}function Kd(){if(Pe!==null){if(it===0)var n=Pe.return;else n=Pe,Xi=Zs=null,Zf(n),Ga=null,ml=0,n=Pe;for(;n!==null;)B_(n.alternate,n),n=n.return;Pe=null}}function io(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,ub(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Kd(),nt=n,Pe=a=Qr(n.current,null),Fe=r,it=0,bn=null,tr=!1,to=Tr(n,r),Ld=!1,no=qn=jd=na=Yr=mt=0,Ai=Dl=null,Bd=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-sn(l),m=1<<f;r|=n[f],l&=~m}return nr=r,oc(),a}function F_(n,r){Oe=null,b.H=Ei,r===fl?(r=sy(),it=3):r===ny?(r=sy(),it=4):it=r===i_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,bn=r,Pe===null&&(mt=1,Cc(n,Pn(r,n.current)))}function G_(){var n=b.H;return b.H=Ei,n===null?Ei:n}function K_(){var n=b.A;return b.A=qS,n}function Qd(){mt=4,tr||(Fe&4194176)!==Fe&&Ln.current!==null||(to=!0),(Yr&134217727)===0&&(na&134217727)===0||nt===null||ir(nt,Fe,qn,!1)}function Yd(n,r,a){var l=ut;ut|=2;var f=G_(),m=K_();(nt!==n||Fe!==r)&&(Pc=null,io(n,r)),r=!1;var E=mt;e:do try{if(it!==0&&Pe!==null){var w=Pe,x=bn;switch(it){case 8:Kd(),E=6;break e;case 3:case 2:case 6:Ln.current===null&&(r=!0);var B=it;if(it=0,bn=null,ro(n,w,x,B),a&&to){E=0;break e}break;default:B=it,it=0,bn=null,ro(n,w,x,B)}}GS(),E=mt;break}catch(W){F_(n,W)}while(!0);return r&&n.shellSuspendCounter++,Xi=Zs=null,ut=l,b.H=f,b.A=m,Pe===null&&(nt=null,Fe=0,oc()),E}function GS(){for(;Pe!==null;)Q_(Pe)}function KS(n,r){var a=ut;ut|=2;var l=G_(),f=K_();nt!==n||Fe!==r?(Pc=null,Mc=hn()+500,io(n,r)):to=Tr(n,r);e:do try{if(it!==0&&Pe!==null){r=Pe;var m=bn;t:switch(it){case 1:it=0,bn=null,ro(n,r,m,1);break;case 2:if(iy(m)){it=0,bn=null,Y_(r);break}r=function(){it===2&&nt===n&&(it=7),Ti(n)},m.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:iy(m)?(it=0,bn=null,Y_(r)):(it=0,bn=null,ro(n,r,m,7));break;case 5:var E=null;switch(Pe.tag){case 26:E=Pe.memoizedState;case 5:case 27:var w=Pe;if(!E||wv(E)){it=0,bn=null;var x=w.sibling;if(x!==null)Pe=x;else{var B=w.return;B!==null?(Pe=B,Lc(B)):Pe=null}break t}}it=0,bn=null,ro(n,r,m,5);break;case 6:it=0,bn=null,ro(n,r,m,6);break;case 8:Kd(),mt=6;break e;default:throw Error(s(462))}}QS();break}catch(W){F_(n,W)}while(!0);return Xi=Zs=null,b.H=l,b.A=f,ut=a,Pe!==null?0:(nt=null,Fe=0,oc(),mt)}function QS(){for(;Pe!==null&&!Cs();)Q_(Pe)}function Q_(n){var r=p_(n.alternate,n,nr);n.memoizedProps=n.pendingProps,r===null?Lc(n):Pe=r}function Y_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=u_(a,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=u_(a,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Zf(r);default:B_(a,r),r=Pe=V_(r,nr),r=p_(a,r,nr)}n.memoizedProps=n.pendingProps,r===null?Lc(n):Pe=r}function ro(n,r,a,l){Xi=Zs=null,Zf(r),Ga=null,ml=0;var f=r.return;try{if(PS(n,f,r,a,Fe)){mt=1,Cc(n,Pn(a,n.current)),Pe=null;return}}catch(m){if(f!==null)throw Pe=f,m;mt=1,Cc(n,Pn(a,n.current)),Pe=null;return}r.flags&32768?(Qe||l===1?n=!0:to||(Fe&536870912)!==0?n=!1:(tr=n=!0,(l===2||l===3||l===6)&&(l=Ln.current,l!==null&&l.tag===13&&(l.flags|=16384))),X_(r,n)):Lc(r)}function Lc(n){var r=n;do{if((r.flags&32768)!==0){X_(r,tr);return}n=r.return;var a=BS(r.alternate,r,nr);if(a!==null){Pe=a;return}if(r=r.sibling,r!==null){Pe=r;return}Pe=r=n}while(r!==null);mt===0&&(mt=5)}function X_(n,r){do{var a=zS(n.alternate,n);if(a!==null){a.flags&=32767,Pe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=a}while(n!==null);mt=6,Pe=null}function $_(n,r,a,l,f,m,E,w,x,B){var W=b.T,ne=le.p;try{le.p=2,b.T=null,YS(n,r,a,l,ne,f,m,E,w,x,B)}finally{b.T=W,le.p=ne}}function YS(n,r,a,l,f,m,E,w){do so();while(ia!==null);if((ut&6)!==0)throw Error(s(327));var x=n.finishedWork;if(l=n.finishedLanes,x===null)return null;if(n.finishedWork=null,n.finishedLanes=0,x===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var B=x.lanes|x.childLanes;if(B|=Vf,Bu(n,l,B,m,E,w),n===nt&&(Pe=nt=null,Fe=0),(x.subtreeFlags&10256)===0&&(x.flags&10256)===0||Uc||(Uc=!0,qd=B,Hd=a,ZS(Mi,function(){return so(),null})),a=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||a?(a=b.T,b.T=null,m=le.p,le.p=2,E=ut,ut|=4,VS(n,x),x_(x,n),_S(am,n.containerInfo),$c=!!sm,am=sm=null,n.current=x,R_(n,x.alternate,x),zo(),ut=E,le.p=m,b.T=a):n.current=x,Uc?(Uc=!1,ia=n,Ol=l):W_(n,B),B=n.pendingLanes,B===0&&(Xr=null),Ho(x.stateNode),Ti(n),r!==null)for(f=n.onRecoverableError,x=0;x<r.length;x++)B=r[x],f(B.value,{componentStack:B.stack});return(Ol&3)!==0&&so(),B=n.pendingLanes,(l&4194218)!==0&&(B&42)!==0?n===Fd?kl++:(kl=0,Fd=n):kl=0,Ml(0),null}function W_(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,gl(r)))}function so(){if(ia!==null){var n=ia,r=qd;qd=0;var a=zu(Ol),l=b.T,f=le.p;try{if(le.p=32>a?32:a,b.T=null,ia===null)var m=!1;else{a=Hd,Hd=null;var E=ia,w=Ol;if(ia=null,Ol=0,(ut&6)!==0)throw Error(s(331));var x=ut;if(ut|=4,P_(E.current),O_(E,E.current,w,a),ut=x,Ml(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Er,E)}catch{}m=!0}return m}finally{le.p=f,b.T=l,W_(n,r)}}return!1}function Z_(n,r,a){r=Pn(a,r),r=fd(n.stateNode,r,2),n=Hr(n,r,2),n!==null&&(_t(n,2),Ti(n))}function tt(n,r,a){if(n.tag===3)Z_(n,n,a);else for(;r!==null;){if(r.tag===3){Z_(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xr===null||!Xr.has(l))){n=Pn(a,n),a=t_(2),l=Hr(r,a,2),l!==null&&(n_(a,l,r,n),_t(l,2),Ti(l));break}}r=r.return}}function Xd(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new HS;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Ld=!0,f.add(a),n=XS.bind(null,n,r,a),r.then(n,n))}function XS(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,nt===n&&(Fe&a)===a&&(mt===4||mt===3&&(Fe&62914560)===Fe&&300>hn()-zd?(ut&2)===0&&io(n,0):jd|=a,no===Fe&&(no=0)),Ti(n)}function J_(n,r){r===0&&(r=wr()),n=Pr(n,r),n!==null&&(_t(n,r),Ti(n))}function $S(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),J_(n,a)}function WS(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),J_(n,a)}function ZS(n,r){return ht(n,r)}var jc=null,ao=null,$d=!1,Bc=!1,Wd=!1,ra=0;function Ti(n){n!==ao&&n.next===null&&(ao===null?jc=ao=n:ao=ao.next=n),Bc=!0,$d||($d=!0,eb(JS))}function Ml(n,r){if(!Wd&&Bc){Wd=!0;do for(var a=!1,l=jc;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var E=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-sn(42|n)+1)-1,m&=f&~(E&~w),m=m&201326677?m&201326677|1:m?m|2:0}m!==0&&(a=!0,nv(l,m))}else m=Fe,m=In(l,l===nt?m:0),(m&3)===0||Tr(l,m)||(a=!0,nv(l,m));l=l.next}while(a);Wd=!1}}function JS(){Bc=$d=!1;var n=0;ra!==0&&(lb()&&(n=ra),ra=0);for(var r=hn(),a=null,l=jc;l!==null;){var f=l.next,m=ev(l,r);m===0?(l.next=null,a===null?jc=f:a.next=f,f===null&&(ao=a)):(a=l,(n!==0||(m&3)!==0)&&(Bc=!0)),l=f}Ml(n)}function ev(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-sn(m),w=1<<E,x=f[E];x===-1?((w&a)===0||(w&l)!==0)&&(f[E]=Sa(w,r)):x<=r&&(n.expiredLanes|=w),m&=~w}if(r=nt,a=Fe,a=In(n,n===r?a:0),l=n.callbackNode,a===0||n===r&&it===2||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Yn(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Tr(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Yn(l),zu(a)){case 2:case 8:a=Pt;break;case 32:a=Mi;break;case 268435456:a=qo;break;default:a=Mi}return l=tv.bind(null,n),a=ht(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Yn(l),n.callbackPriority=2,n.callbackNode=null,2}function tv(n,r){var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var l=Fe;return l=In(n,n===nt?l:0),l===0?null:(q_(n,l,r),ev(n,hn()),n.callbackNode!=null&&n.callbackNode===a?tv.bind(null,n):null)}function nv(n,r){if(so())return null;q_(n,r,!0)}function eb(n){cb(function(){(ut&6)!==0?ht(Ct,n):n()})}function Zd(){return ra===0&&(ra=Go()),ra}function iv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:hi(""+n)}function rv(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function tb(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var m=iv((f[It]||null).action),E=l.submitter;E&&(r=(r=E[It]||null)?iv(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var w=new Da("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ra!==0){var x=E?rv(f,E):new FormData(f);od(a,{pending:!0,data:x,method:f.method,action:m},null,x)}}else typeof m=="function"&&(w.preventDefault(),x=E?rv(f,E):new FormData(f),od(a,{pending:!0,data:x,method:f.method,action:m},m,x))},currentTarget:f}]})}}for(var Jd=0;Jd<$g.length;Jd++){var em=$g[Jd],nb=em.toLowerCase(),ib=em[0].toUpperCase()+em.slice(1);Wn(nb,"on"+ib)}Wn(Gg,"onAnimationEnd"),Wn(Kg,"onAnimationIteration"),Wn(Qg,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(ES,"onTransitionRun"),Wn(AS,"onTransitionStart"),Wn(TS,"onTransitionCancel"),Wn(Yg,"onTransitionEnd"),fn("onMouseEnter",["mouseout","mouseover"]),fn("onMouseLeave",["mouseout","mouseover"]),fn("onPointerEnter",["pointerout","pointerover"]),fn("onPointerLeave",["pointerout","pointerover"]),En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),En("onBeforeInput",["compositionend","keypress","textInput","paste"]),En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function sv(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var E=l.length-1;0<=E;E--){var w=l[E],x=w.instance,B=w.currentTarget;if(w=w.listener,x!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=B;try{m(f)}catch(W){Rc(W)}f.currentTarget=null,m=x}else for(E=0;E<l.length;E++){if(w=l[E],x=w.instance,B=w.currentTarget,w=w.listener,x!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=B;try{m(f)}catch(W){Rc(W)}f.currentTarget=null,m=x}}}}function je(n,r){var a=r[Ns];a===void 0&&(a=r[Ns]=new Set);var l=n+"__bubble";a.has(l)||(av(r,n,2,!1),a.add(l))}function tm(n,r,a){var l=0;r&&(l|=4),av(a,n,l,r)}var zc="_reactListening"+Math.random().toString(36).slice(2);function nm(n){if(!n[zc]){n[zc]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(rb.has(a)||tm(a,!1,n),tm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[zc]||(r[zc]=!0,tm("selectionchange",!1,r))}}function av(n,r,a,l){switch(Nv(r)){case 2:var f=xb;break;case 8:f=Db;break;default:f=pm}a=f.bind(null,r,a,n),f=void 0,!On||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function im(n,r,a,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===f||w.nodeType===8&&w.parentNode===f)break;if(E===4)for(E=l.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===f||x.nodeType===8&&x.parentNode===f))return;E=E.return}for(;w!==null;){if(E=$n(w),E===null)return;if(x=E.tag,x===5||x===6||x===26||x===27){l=m=E;continue e}w=w.parentNode}}l=l.return}Ku(function(){var B=m,W=xa(a),ne=[];e:{var Q=Xg.get(n);if(Q!==void 0){var $=Da,Ae=n;switch(n){case"keypress":if(di(a)===0)break e;case"keydown":case"keyup":$=Va;break;case"focusin":Ae="focus",$=Ma;break;case"focusout":Ae="blur",$=Ma;break;case"beforeblur":case"afterblur":$=Ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ec;break;case Gg:case Kg:case Qg:$=Pa;break;case Yg:$=nc;break;case"scroll":case"scrollend":$=Qu;break;case"wheel":$=La;break;case"copy":case"cut":case"paste":$=Ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=sl;break;case"toggle":case"beforetoggle":$=rc}var Ie=(r&4)!==0,pt=!Ie&&(n==="scroll"||n==="scrollend"),q=Ie?Q!==null?Q+"Capture":null:Q;Ie=[];for(var L=B,K;L!==null;){var Z=L;if(K=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||K===null||q===null||(Z=Ms(L,q),Z!=null&&Ie.push(Ul(L,Z,K))),pt)break;L=L.return}0<Ie.length&&(Q=new $(Q,Ae,null,a,W),ne.push({event:Q,listeners:Ie}))}}if((r&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",Q&&a!==Dn&&(Ae=a.relatedTarget||a.fromElement)&&($n(Ae)||Ae[Pi]))break e;if(($||Q)&&(Q=W.window===W?W:(Q=W.ownerDocument)?Q.defaultView||Q.parentWindow:window,$?(Ae=a.relatedTarget||a.toElement,$=B,Ae=Ae?$n(Ae):null,Ae!==null&&(pt=ve(Ae),Ie=Ae.tag,Ae!==pt||Ie!==5&&Ie!==27&&Ie!==6)&&(Ae=null)):($=null,Ae=B),$!==Ae)){if(Ie=kn,Z="onMouseLeave",q="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=sl,Z="onPointerLeave",q="onPointerEnter",L="pointer"),pt=$==null?Q:Ir($),K=Ae==null?Q:Ir(Ae),Q=new Ie(Z,L+"leave",$,a,W),Q.target=pt,Q.relatedTarget=K,Z=null,$n(W)===B&&(Ie=new Ie(q,L+"enter",Ae,a,W),Ie.target=K,Ie.relatedTarget=pt,Z=Ie),pt=Z,$&&Ae)t:{for(Ie=$,q=Ae,L=0,K=Ie;K;K=oo(K))L++;for(K=0,Z=q;Z;Z=oo(Z))K++;for(;0<L-K;)Ie=oo(Ie),L--;for(;0<K-L;)q=oo(q),K--;for(;L--;){if(Ie===q||q!==null&&Ie===q.alternate)break t;Ie=oo(Ie),q=oo(q)}Ie=null}else Ie=null;$!==null&&ov(ne,Q,$,Ie,!1),Ae!==null&&pt!==null&&ov(ne,pt,Ae,Ie,!0)}}e:{if(Q=B?Ir(B):window,$=Q.nodeName&&Q.nodeName.toLowerCase(),$==="select"||$==="input"&&Q.type==="file")var ye=Mg;else if(xt(Q))if(Pg)ye=gS;else{ye=mS;var Me=dS}else $=Q.nodeName,!$||$.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?B&&Zo(B.elementType)&&(ye=Mg):ye=pS;if(ye&&(ye=ye(n,B))){Hi(ne,ye,a,W);break e}Me&&Me(n,Q,B),n==="focusout"&&B&&Q.type==="number"&&B.memoizedProps.value!=null&&Na(Q,"number",Q.value)}switch(Me=B?Ir(B):window,n){case"focusin":(xt(Me)||Me.contentEditable==="true")&&(ja=Me,Mf=B,ll=null);break;case"focusout":ll=Mf=ja=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,Hg(ne,a,W);break;case"selectionchange":if(vS)break;case"keydown":case"keyup":Hg(ne,a,W)}var Te;if(gi)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else qe?X(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(_&&a.locale!=="ko"&&(qe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&qe&&(Te=el()):(fi=W,Mr="value"in fi?fi.value:fi.textContent,qe=!0)),Me=qc(B,Se),0<Me.length&&(Se=new il(Se,n,null,a,W),ne.push({event:Se,listeners:Me}),Te?Se.data=Te:(Te=se(a),Te!==null&&(Se.data=Te)))),(Te=y?Nt(n,a):He(n,a))&&(Se=qc(B,"onBeforeInput"),0<Se.length&&(Me=new il("onBeforeInput","beforeinput",null,a,W),ne.push({event:Me,listeners:Se}),Me.data=Te)),tb(ne,n,B,a,W)}sv(ne,r)})}function Ul(n,r,a){return{instance:n,listener:r,currentTarget:a}}function qc(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ms(n,a),f!=null&&l.unshift(Ul(n,f,m)),f=Ms(n,r),f!=null&&l.push(Ul(n,f,m))),n=n.return}return l}function oo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ov(n,r,a,l,f){for(var m=r._reactName,E=[];a!==null&&a!==l;){var w=a,x=w.alternate,B=w.stateNode;if(w=w.tag,x!==null&&x===l)break;w!==5&&w!==26&&w!==27||B===null||(x=B,f?(B=Ms(a,m),B!=null&&E.unshift(Ul(a,B,x))):f||(B=Ms(a,m),B!=null&&E.push(Ul(a,B,x)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var sb=/\r\n?/g,ab=/\u0000|\uFFFD/g;function lv(n){return(typeof n=="string"?n:""+n).replace(sb,`
`).replace(ab,"")}function uv(n,r){return r=lv(r),lv(n)===r}function Hc(){}function Je(n,r,a,l,f,m){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||xn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&xn(n,""+l);break;case"className":Dr(n,"class",l);break;case"tabIndex":Dr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Dr(n,a,l);break;case"style":Gu(n,l,m);break;case"data":if(r!=="object"){Dr(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=hi(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&Je(n,r,"name",f.name,f,null),Je(n,r,"formEncType",f.formEncType,f,null),Je(n,r,"formMethod",f.formMethod,f,null),Je(n,r,"formTarget",f.formTarget,f,null)):(Je(n,r,"encType",f.encType,f,null),Je(n,r,"method",f.method,f,null),Je(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=hi(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Hc);break;case"onScroll":l!=null&&je("scroll",n);break;case"onScrollEnd":l!=null&&je("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=hi(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":je("beforetoggle",n),je("toggle",n),xr(n,"popover",l);break;case"xlinkActuate":Nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Nn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Nn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Nn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Nn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cf.get(a)||a,xr(n,a,l))}}function rm(n,r,a,l,f,m){switch(a){case"style":Gu(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?xn(n,l):(typeof l=="number"||typeof l=="bigint")&&xn(n,""+l);break;case"onScroll":l!=null&&je("scroll",n);break;case"onScrollEnd":l!=null&&je("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=n[It]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):xr(n,a,l)}}}function Kt(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",n),je("load",n);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var E=a[m];if(E!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(n,r,m,E,a,null)}}f&&Je(n,r,"srcSet",a.srcSet,a,null),l&&Je(n,r,"src",a.src,a,null);return;case"input":je("invalid",n);var w=m=E=f=null,x=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":E=W;break;case"checked":x=W;break;case"defaultChecked":B=W;break;case"value":m=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:Je(n,r,l,W,a,null)}}Os(n,m,w,x,B,E,f,!1),Ds(n);return;case"select":je("invalid",n),l=E=m=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:Je(n,r,f,w,a,null)}r=m,a=E,n.multiple=!!l,r!=null?Ke(n,!!l,r,!1):a!=null&&Ke(n,!!l,a,!0);return;case"textarea":je("invalid",n),m=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Je(n,r,E,w,a,null)}kr(n,l,f,m),Ds(n);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(n,r,x,l,a,null)}return;case"dialog":je("cancel",n),je("close",n);break;case"iframe":case"object":je("load",n);break;case"video":case"audio":for(l=0;l<Pl.length;l++)je(Pl[l],n);break;case"image":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"embed":case"source":case"link":je("error",n),je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(n,r,B,l,a,null)}return;default:if(Zo(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&rm(n,r,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Je(n,r,w,l,a,null))}function ob(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,w=null,x=null,B=null,W=null;for($ in a){var ne=a[$];if(a.hasOwnProperty($)&&ne!=null)switch($){case"checked":break;case"value":break;case"defaultValue":x=ne;default:l.hasOwnProperty($)||Je(n,r,$,null,l,ne)}}for(var Q in l){var $=l[Q];if(ne=a[Q],l.hasOwnProperty(Q)&&($!=null||ne!=null))switch(Q){case"type":m=$;break;case"name":f=$;break;case"checked":B=$;break;case"defaultChecked":W=$;break;case"value":E=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==ne&&Je(n,r,Q,$,l,ne)}}Or(n,E,w,x,B,W,m,f);return;case"select":$=E=w=Q=null;for(m in a)if(x=a[m],a.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":$=x;default:l.hasOwnProperty(m)||Je(n,r,m,null,l,x)}for(f in l)if(m=l[f],x=a[f],l.hasOwnProperty(f)&&(m!=null||x!=null))switch(f){case"value":Q=m;break;case"defaultValue":w=m;break;case"multiple":E=m;default:m!==x&&Je(n,r,f,m,l,x)}r=w,a=E,l=$,Q!=null?Ke(n,!!a,Q,!1):!!l!=!!a&&(r!=null?Ke(n,!!a,r,!0):Ke(n,!!a,a?[]:"",!1));return;case"textarea":$=Q=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Je(n,r,w,null,l,f)}for(E in l)if(f=l[E],m=a[E],l.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":Q=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Je(n,r,E,f,l,m)}ks(n,Q,$);return;case"option":for(var Ae in a)if(Q=a[Ae],a.hasOwnProperty(Ae)&&Q!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":n.selected=!1;break;default:Je(n,r,Ae,null,l,Q)}for(x in l)if(Q=l[x],$=a[x],l.hasOwnProperty(x)&&Q!==$&&(Q!=null||$!=null))switch(x){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Je(n,r,x,Q,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in a)Q=a[Ie],a.hasOwnProperty(Ie)&&Q!=null&&!l.hasOwnProperty(Ie)&&Je(n,r,Ie,null,l,Q);for(B in l)if(Q=l[B],$=a[B],l.hasOwnProperty(B)&&Q!==$&&(Q!=null||$!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Je(n,r,B,Q,l,$)}return;default:if(Zo(r)){for(var pt in a)Q=a[pt],a.hasOwnProperty(pt)&&Q!==void 0&&!l.hasOwnProperty(pt)&&rm(n,r,pt,void 0,l,Q);for(W in l)Q=l[W],$=a[W],!l.hasOwnProperty(W)||Q===$||Q===void 0&&$===void 0||rm(n,r,W,Q,l,$);return}}for(var q in a)Q=a[q],a.hasOwnProperty(q)&&Q!=null&&!l.hasOwnProperty(q)&&Je(n,r,q,null,l,Q);for(ne in l)Q=l[ne],$=a[ne],!l.hasOwnProperty(ne)||Q===$||Q==null&&$==null||Je(n,r,ne,Q,l,$)}var sm=null,am=null;function Fc(n){return n.nodeType===9?n:n.ownerDocument}function cv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function om(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lm=null;function lb(){var n=window.event;return n&&n.type==="popstate"?n===lm?!1:(lm=n,!0):(lm=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,ub=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,cb=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(n){return dv.resolve(null).then(n).catch(hb)}:fv;function hb(n){setTimeout(function(){throw n})}function um(n,r){var a=r,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(l===0){n.removeChild(f),Fl(r);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=f}while(a);Fl(r)}function cm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),xs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function fb(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Cr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ei(n.nextSibling),n===null)break}return null}function db(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ei(n.nextSibling),n===null))return null;return n}function ei(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}function mv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function pv(n,r,a){switch(r=Fc(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}var Hn=new Map,gv=new Set;function Gc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var rr=le.d;le.d={f:mb,r:pb,D:gb,C:yb,L:_b,m:vb,X:Ab,S:Eb,M:Tb};function mb(){var n=rr.f(),r=Vc();return n||r}function pb(n){var r=Ui(n);r!==null&&r.tag===5&&r.type==="form"?Hy(r):rr.r(n)}var lo=typeof document>"u"?null:document;function yv(n,r,a){var l=lo;if(l&&typeof r=="string"&&r){var f=ft(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),gv.has(f)||(gv.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Kt(r,"link",n),ot(r),l.head.appendChild(r)))}}function gb(n){rr.D(n),yv("dns-prefetch",n,null)}function yb(n,r){rr.C(n,r),yv("preconnect",n,r)}function _b(n,r,a){rr.L(n,r,a);var l=lo;if(l&&n&&r){var f='link[rel="preload"][as="'+ft(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ft(a.imageSizes)+'"]')):f+='[href="'+ft(n)+'"]';var m=f;switch(r){case"style":m=uo(n);break;case"script":m=co(n)}Hn.has(m)||(n=I({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Hn.set(m,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(Vl(m))||r==="script"&&l.querySelector(Ll(m))||(r=l.createElement("link"),Kt(r,"link",n),ot(r),l.head.appendChild(r)))}}function vb(n,r){rr.m(n,r);var a=lo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ft(l)+'"][href="'+ft(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=co(n)}if(!Hn.has(m)&&(n=I({rel:"modulepreload",href:n},r),Hn.set(m,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(m)))return}l=a.createElement("link"),Kt(l,"link",n),ot(l),a.head.appendChild(l)}}}function Eb(n,r,a){rr.S(n,r,a);var l=lo;if(l&&n){var f=Nr(l).hoistableStyles,m=uo(n);r=r||"default";var E=f.get(m);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(Vl(m)))w.loading=5;else{n=I({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Hn.get(m))&&hm(n,a);var x=E=l.createElement("link");ot(x),Kt(x,"link",n),x._p=new Promise(function(B,W){x.onload=B,x.onerror=W}),x.addEventListener("load",function(){w.loading|=1}),x.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Kc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:w},f.set(m,E)}}}function Ab(n,r){rr.X(n,r);var a=lo;if(a&&n){var l=Nr(a).hoistableScripts,f=co(n),m=l.get(f);m||(m=a.querySelector(Ll(f)),m||(n=I({src:n,async:!0},r),(r=Hn.get(f))&&fm(n,r),m=a.createElement("script"),ot(m),Kt(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Tb(n,r){rr.M(n,r);var a=lo;if(a&&n){var l=Nr(a).hoistableScripts,f=co(n),m=l.get(f);m||(m=a.querySelector(Ll(f)),m||(n=I({src:n,async:!0,type:"module"},r),(r=Hn.get(f))&&fm(n,r),m=a.createElement("script"),ot(m),Kt(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function _v(n,r,a,l){var f=(f=ze.current)?Gc(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=uo(a.href),a=Nr(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=uo(a.href);var m=Nr(f).hoistableStyles,E=m.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=f.querySelector(Vl(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Hn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(n,a),m||wb(f,n,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=co(a),a=Nr(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function uo(n){return'href="'+ft(n)+'"'}function Vl(n){return'link[rel="stylesheet"]['+n+"]"}function vv(n){return I({},n,{"data-precedence":n.precedence,precedence:null})}function wb(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Kt(r,"link",a),ot(r),n.head.appendChild(r))}function co(n){return'[src="'+ft(n)+'"]'}function Ll(n){return"script[async]"+n}function Ev(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+ft(a.href)+'"]');if(l)return r.instance=l,ot(l),l;var f=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),ot(l),Kt(l,"style",f),Kc(l,a.precedence,n),r.instance=l;case"stylesheet":f=uo(a.href);var m=n.querySelector(Vl(f));if(m)return r.state.loading|=4,r.instance=m,ot(m),m;l=vv(a),(f=Hn.get(f))&&hm(l,f),m=(n.ownerDocument||n).createElement("link"),ot(m);var E=m;return E._p=new Promise(function(w,x){E.onload=w,E.onerror=x}),Kt(m,"link",l),r.state.loading|=4,Kc(m,a.precedence,n),r.instance=m;case"script":return m=co(a.src),(f=n.querySelector(Ll(m)))?(r.instance=f,ot(f),f):(l=a,(f=Hn.get(m))&&(l=I({},a),fm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),ot(f),Kt(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Kc(l,a.precedence,n));return r.instance}function Kc(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===r)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function hm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function fm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Qc=null;function Av(n,r,a){if(Qc===null){var l=new Map,f=Qc=new Map;f.set(a,l)}else f=Qc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[Cr]||m[Ut]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=n+E;var w=l.get(E);w?w.push(m):l.set(E,[m])}}return l}function Tv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function Sb(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function wv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var jl=null;function bb(){}function Rb(n,r,a){if(jl===null)throw Error(s(475));var l=jl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=uo(a.href),m=n.querySelector(Vl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Yc.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=m,ot(m);return}m=n.ownerDocument||n,a=vv(a),(f=Hn.get(f))&&hm(a,f),m=m.createElement("link"),ot(m);var E=m;E._p=new Promise(function(w,x){E.onload=w,E.onerror=x}),Kt(m,"link",a),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Yc.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function Cb(){if(jl===null)throw Error(s(475));var n=jl;return n.stylesheets&&n.count===0&&dm(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&dm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Yc(){if(this.count--,this.count===0){if(this.stylesheets)dm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xc=null;function dm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xc=new Map,r.forEach(Ib,n),Xc=null,Yc.call(n))}function Ib(n,r){if(!(r.state.loading&4)){var a=Xc.get(n);if(a)var l=a.get(null);else{a=new Map,Xc.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=r.instance,E=f.getAttribute("data-precedence"),m=a.get(E)||l,m===l&&a.set(null,f),a.set(E,f),this.count++,l=Yc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bl={$$typeof:D,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function Nb(n,r,a,l,f,m,E,w){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.hiddenUpdates=ba(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Sv(n,r,a,l,f,m,E,w,x,B,W,ne){return n=new Nb(n,r,a,E,w,x,B,ne),r=1,m===!0&&(r|=24),m=zn(3,null,null,r),n.current=m,m.stateNode=n,r=Gf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:r},bd(m),n}function bv(n){return n?(n=qa,n):qa}function Rv(n,r,a,l,f,m){f=bv(f),l.context===null?l.context=f:l.pendingContext=f,l=qr(r),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Hr(n,l,r),a!==null&&(un(a,n,r),wl(a,n,r))}function Cv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function mm(n,r){Cv(n,r),(n=n.alternate)&&Cv(n,r)}function Iv(n){if(n.tag===13){var r=Pr(n,67108864);r!==null&&un(r,n,67108864),mm(n,67108864)}}var $c=!0;function xb(n,r,a,l){var f=b.T;b.T=null;var m=le.p;try{le.p=2,pm(n,r,a,l)}finally{le.p=m,b.T=f}}function Db(n,r,a,l){var f=b.T;b.T=null;var m=le.p;try{le.p=8,pm(n,r,a,l)}finally{le.p=m,b.T=f}}function pm(n,r,a,l){if($c){var f=gm(l);if(f===null)im(n,r,l,Wc,a),xv(n,l);else if(kb(f,n,r,a,l))l.stopPropagation();else if(xv(n,l),r&4&&-1<Ob.indexOf(n)){for(;f!==null;){var m=Ui(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Xn(m.pendingLanes);if(E!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var x=1<<31-sn(E);w.entanglements[1]|=x,E&=~x}Ti(m),(ut&6)===0&&(Mc=hn()+500,Ml(0))}}break;case 13:w=Pr(m,2),w!==null&&un(w,m,2),Vc(),mm(m,2)}if(m=gm(l),m===null&&im(n,r,l,Wc,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else im(n,r,l,null,a)}}function gm(n){return n=xa(n),ym(n)}var Wc=null;function ym(n){if(Wc=null,n=$n(n),n!==null){var r=ve(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=ge(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Wc=n,null}function Nv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uu()){case Ct:return 2;case Pt:return 8;case Mi:case Vu:return 32;case qo:return 268435456;default:return 32}default:return 32}}var _m=!1,$r=null,Wr=null,Zr=null,zl=new Map,ql=new Map,Jr=[],Ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xv(n,r){switch(n){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(r.pointerId)}}function Hl(n,r,a,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Ui(r),r!==null&&Iv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function kb(n,r,a,l,f){switch(r){case"focusin":return $r=Hl($r,n,r,a,l,f),!0;case"dragenter":return Wr=Hl(Wr,n,r,a,l,f),!0;case"mouseover":return Zr=Hl(Zr,n,r,a,l,f),!0;case"pointerover":var m=f.pointerId;return zl.set(m,Hl(zl.get(m)||null,n,r,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,ql.set(m,Hl(ql.get(m)||null,n,r,a,l,f)),!0}return!1}function Dv(n){var r=$n(n.target);if(r!==null){var a=ve(r);if(a!==null){if(r=a.tag,r===13){if(r=ge(a),r!==null){n.blockedOn=r,Rr(n.priority,function(){if(a.tag===13){var l=Rn(),f=Pr(a,l);f!==null&&un(f,a,l),mm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zc(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=gm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Dn=l,a.target.dispatchEvent(l),Dn=null}else return r=Ui(a),r!==null&&Iv(r),n.blockedOn=a,!1;r.shift()}return!0}function Ov(n,r,a){Zc(n)&&a.delete(r)}function Mb(){_m=!1,$r!==null&&Zc($r)&&($r=null),Wr!==null&&Zc(Wr)&&(Wr=null),Zr!==null&&Zc(Zr)&&(Zr=null),zl.forEach(Ov),ql.forEach(Ov)}function Jc(n,r){n.blockedOn===r&&(n.blockedOn=null,_m||(_m=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mb)))}var eh=null;function kv(n){eh!==n&&(eh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){eh===n&&(eh=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(ym(l||a)===null)continue;break}var m=Ui(a);m!==null&&(n.splice(r,3),r-=3,od(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Fl(n){function r(x){return Jc(x,n)}$r!==null&&Jc($r,n),Wr!==null&&Jc(Wr,n),Zr!==null&&Jc(Zr,n),zl.forEach(r),ql.forEach(r);for(var a=0;a<Jr.length;a++){var l=Jr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Jr.length&&(a=Jr[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&Jr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],E=f[It]||null;if(typeof m=="function")E||kv(a);else if(E){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[It]||null)w=E.formAction;else if(ym(f)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),kv(a)}}}function vm(n){this._internalRoot=n}th.prototype.render=vm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Rn();Rv(a,l,n,r,null,null)},th.prototype.unmount=vm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;n.tag===0&&so(),Rv(n.current,2,null,n,null,null),Vc(),r[Pi]=null}};function th(n){this._internalRoot=n}th.prototype.unstable_scheduleHydration=function(n){if(n){var r=qu();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Jr.length&&r!==0&&r<Jr[a].priority;a++);Jr.splice(a,0,n),a===0&&Dv(n)}};var Mv=e.version;if(Mv!=="19.0.0")throw Error(s(527,Mv,"19.0.0"));le.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=te(r),n=n!==null?Ee(n):null,n=n===null?null:n.stateNode,n};var Pb={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:b,findFiberByHostInstance:$n,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Er=nh.inject(Pb),$t=nh}catch{}}return Kl.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=Wy,m=Zy,E=Jy,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=Sv(n,1,!1,null,null,a,l,f,m,E,w,null),n[Pi]=r.current,nm(n.nodeType===8?n.parentNode:n),new vm(r)},Kl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",m=Wy,E=Zy,w=Jy,x=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),r=Sv(n,1,!0,r,a??null,l,f,m,E,w,x,B),r.context=bv(null),a=r.current,l=Rn(),f=qr(l),f.callback=null,Hr(a,f,l),r.current.lanes=l,_t(r,l),Ti(r),n[Pi]=r.current,nm(n),new th(r)},Kl.version="19.0.0",Kl}var Fv;function Gb(){if(Fv)return Tm.exports;Fv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tm.exports=Fb(),Tm.exports}var Kb=Gb();const Qb="/assets/gallery_icon-DX7cOO5y.png",Yb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeklEQVR4nO2aPYgTQRiGx/MfUQtREAKRMDDzvpNdkGDlQUDEzvJasbK1EltLW0sr4UpbsbrWwsJG4QQLBRFEEBRB/OHUlQ82GiTHTeLs7uRmHviasDB5dmfne2cSpTKZTCaTiRvn3CWl1B6VCiQrki8AXO/3+4dUIsKVFIB3AG5Za0+oFIT5t76SXB8Oh1YlIlzV9RPAAwAXVSLC1VQ9sdZeGY/H+1QiwlVdr0jeHAwGx1UiwlVdn0jeKYqip5YJzpABcAPAGx9xAN8B3DPGFGoZ4AwJ+Xw0Gu0nuUbyse9TB/DIOXc56iDDbYT/uWaV5H2SPzzl4w0y9BCeulbLe0vyi+cTjy/IcA7hCWVZnpKVmuRbzyceT5DhAsITtNYHpTcDeO4p3n2Q4X8IT7EiEiITfZBhGOE/ADgr0xfAVpRBhoGFJ1hrT8uCBeBjVEGGDQlPMMYclRYF4LVvkJEW6Jw7p5ZReIq9Eko6DzKcMVDTCwnJCyQfkvzlKf+M5FWSB0IMXs24s1sAXpLcAHC37rlr1tqR1vpYEOuuggz928j0wB+krci7BuA2yWvSloqiGCwy/bTWJ1sLMlxAeIf6tt3s6PV6hz2DzGZjQYYtCu+0mVg0uTnnzi/VlJZsLu8myfee43+Wm2mMMfOOpfKixQTbkmqAaE5QGGe0XG/sjIwNCRtjzsiCtus3D1hgeygzoCzLI6oNGEZ4pd4YbOzqAwDdRlCIQbhsMyh0KcxUjmlJrtYHdF5BAcBTiZtLdRA/iiUohIazv3haP6YxpqAQGs4v2m5QCA1jDwqhYexBITSMPSiEhrEHhdAw9qAQGpfan0szmUwmk1Gd8Bv41GFkySRCBgAAAABJRU5ErkJggg==",wo="/assets/gemini_icon-DKdS24mf.png",Xb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWklEQVR4nO3XsQ3AIAwEQE/LtsxEejpASvLiTvoBLLvwVwEAABzq4Vk2wmNgG55cd9IAAK9p4Vn29WuoLZV6WPpwHbSlFh4AgP8a4TGwDU+uO+keHgAAgNr2APldsP+m7K9hAAAAAElFTkSuQmCC",$b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYklEQVR4nO3ZMUoDQRgF4Kkka6feYttt/mLfm2IrCwtPo5VGj6Kd1xA9hEkXCB5CUAYMTGJiVGacZfd9sM1C8u9j3hLI75yIiIiIiGTVNM0hyVsAcwBvJN//+wpzP+dPzazKFtbMKgDPJUJ+cz1lCw3gpgcBt13XuQLPoyEXdV0fuALCXACXUcVnWQYhemdLhV0J8+N3OssQRjVyPZD9eajAZemEU6MqXZYqnRpV6bJU6dSoSpelSqdGVbosVTo1qtJlqdKpUZUuS5VOjWOrNMb2vzSizUP4579Hm4eXLIMATH+z89n2HWZ2TPI+8W7pKktgM6vCtu6vgUmekVymDAvg0Xs/cbl47ydhWxcWWPv2w6vPtG17BOAu8X54Fk42a9if2AxM8hTAYuOBX0meuyHgerAvpxruhffYDQV313A4pxrbEfah67oTN0Qcw6nGRnGqsVGcaiz85q7dEBEREbfHB6zlz1MolYoJAAAAAElFTkSuQmCC",Wb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAElklEQVR4nO1aQYscRRQuwURxL7oaBY1OkN7t+r7q7gX7B+zJmyJqFC+aq5hFD3owKphLNB6ERNeLYA6KISHoJUGiXhUSRTwkBCRIkLgqrNFbTDS7E55bkdhU93R1V08mS39Ql57pV9/X71XVq3qlVI8ePXr0WEMcx3eT3AbgbZJfADhNcpnkBQB/A/jDPpPfFuW/xph71fWELMvuJLkDwPckV0kOfRuAUwBeBTAYC+k4jrf4vkMyIvkRgItNRJa0FZIHkiTJulFqQfJMXdFzc3O3knxPQjSg0GJbBbAviqJNqgtwrZORorXWDwI426HQYqifI7m1K8HDCtE3ANhZY4zK798BeBPAk1rrZHZ29o4oim7K83xDmqa3ATDGmMcBvEHymA3jUcIX5f0uBA+LokluBLB/BKklkq/PzMzc49t3mqabZdIj+fOIPj7LsmyqC8HDK6Ln5+dvJPnpiJB7UTzYloPY0Fo/Z22W9fd1ENF0d3AGwCcVnR9OkuQuFRgyBEgerPJ06/Cm59IB4CUZ18FUujltB/BPycd+t63xYc1Z86JMOHXt2omuaGNn3feNMQ+TPF/Cp/nszZqe1Vo/5WO3rWCBMeYhl6dlrDdep1nPu7/5ZmQhBFt+CyW8PvC19S88xm/tjCykYGvrkIPPahzHaaeTFoCf0jS9f9yCtda3k/zdYW9/p4Lp4emQgitC+xLJ+7oWPKzj6dCCJTkpych2eBkCsLthe3acgq3NVxyCT6pJADoQLPm6DeP/2ZWcXK1Hwdbu8aJdrfUzYVhPpuDdjrDeG4b1BAqWtNJh96har4Il2XDYPa3Wq2C7hSyG9LKaUMG/GmPQxq5dj4uCL/gQcx21bmxDqkxwCNGtBdORo5KcbkqocHZddlYlz6NrEtIAfnR4wagA6EJ060mL5JdFA8aYx3yJVBDcIhuOUOFN8olWyxLWCltFMrtUQIQUTfKtVokHyW0OA8eaimsa3rLnrWMHwLeOj/Z0bSJSsnQQWOmilFnmaUkX67wve19XtcJ78wDgVOt9ZkNP+yQjUlZ18DzhTQLAa46vfjZEVaHK03U9e9X6u+QQ/LI3AQAD1z5Tyh+qI/iu9QCed4i91HjokTwQ9Pw38E0DuTLh4PdxY6NJkmQlJdGD6hqjpM610jpBArCvZNnYHoy9P6cXStbv91sbj6Jok6tkKeUOqfWoMQPAI665RXLnuut2oxMF286PU7QV+5eDx6rW+tHQnS2WhJEUthaCdlYexi7PStsTvMM8zzdI8bmkQxF+SGbO0P1Kkb2qEE/yiNxMUF0gy7IpuWZQIVqWiYUQyclgMLhZ1lkAf1b091We57eoLpFl2VSVp21bkopAkwRAcmObLv4yoo8jnYu9OrzlmsEIQlfWxeNybUkmPrtRn5bjItum7Vq/1ZZqvqlxbUnygj2dhXEVLNHSWzYdtOXgs7EvrMf21rlQ1qKJVz+chJT2P0hKJ6TKbto0bDIkDmutH1CTCq5NOlLCPNlC6AnZe193d6fTNN0sVTwA7wD4nOQPMubl3Nu2c/bZURkWcizT5Lpijx49eqj1isvFjGZXJBwR5QAAAABJRU5ErkJggg==",Zb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAACzElEQVR4nO2Zu4tTQRTGT3w2ijYWWqhoYysBUZs0wTv7fWOiwm1tfCJa+YRdiNWirvhYbdZyrUV81ArqP7AKKharjYqglYqrsCpnTaHXmd1kN8nmhvODA4GcOzNf5sy5k3NEDMMwjP9JkmQ9ySEAz0h+qdtTkhf0O+khCiRPA/hO8lfEJkiekl4AwMVphGZtSPIMyd1NiJ0yAFXJcSi/bFYwyef6rOQNksWIoKtJkqxWIzkc8nHObZa8AeBQIFwfBaLgSUD0AckbAAYCggcDfoMBvwHJGyTPBnbu7Gz9uh6aYNoOKxbStDOcD2hJi5a0FEtatKSVD2hJi5a0cpG0vPfbtCj3t3nvS+3+e6hzZOcFsL2dWqfw3h8O7MiIZCB5MCDk8WwLAABuBPyOy3wU5gDcbaLEM1ypVNaoAbjWaImH5P2A7962C3bObQ0IfhsovBUAvJhlEe8farXaApLvsr56vDoheGm9a5Bd6Jasr/d+V7OCvfc7G/yRP6dpukQ6Acl7oVCN+A41KhbA+cgY1wO+d6RTADgSWPBErEcE4GS9nRIT+w3AidCzJDeE2jSaPKVTVCqV5SQ/BRZ+K1ZEB7BOdxDAmIZj3cZInvPer41MpXngdmB3P6Zpuqy9KjMAqEXC8oy0CAD9kTn6pdNUq9WVJD8EFjMJYN9cx+/r69uvYwUEvy+XyytkPgDgSP6MnMtLxWJxcbNj6jPajons7KT3fofMJ5w+C7+pXw4aao7pKwnAq2azeEcplUqLSN6c4ZXzGsBlkon3fpMmHDX9rFEC4Ir6zDDGaJqmC6VLKMSuiS2yEb1tSZdRAHAMwNcWCtUb3dGu7hc75zYCeNgCsQ90LMkL/PNvaZTkj0ZF1l9Dem0tS15xzq0CsEcTE4DxgMhxTWjqo77SS7DbyzmtxgTTdri3oJ1hWtLqKUiWtcKRsfxeMgzDMAxD5sRvDkSrmgGIMQAAAAAASUVORK5CYII=",Jb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFtElEQVR4nO1aXW8WRRR+XiwNFoyYCqWgokSNEiJ+RkUMXKnRxKSJJpJeSYwGpQJB0gsJ1kLx48ZiiYkfP8BvSDQmRkPwAoMoUVAuiGnlAi5VavtaqS2vOckzyXHYnZ3dnd19jX2SSdp9Z+dj58w553lmgBnMIC/mAbgNQDeAXgC7Aexl2c1n3awzF/9BzAKwFsArAI4CmAbQ8CxS9zu+u4ZtNS0WAegHcMoxoTEAp9X/ZwCMO+r/AuBFtt00WELznLAG+xuA9wBsAHAXTRs0XVNH/hZcAuBuAE/znd+ttv4E8DqAxRXOEy0AtnLVzMDOAfgAwP38PQrtAM6ytDvafgDAhwAmVft/ANjsaLswXMv9aQbyF1f5Cs/3F7D44EoAb/Bjmv6OAFiGkvAIgFHV+ecldS4f+QvVr1hIV9GdbgZwnh3WAaxH+XiCe9p49Y1FddSnvu7PAFagOqwEMKzGsyN0B8+oxn+s2lsSEqq+V+PaEnLPnmej0sF8NA9kLMeUeXeFcBSjyow70HzoBDCiHFlmB9qiQk+94j1rsBrAyxGZ180q8TmSNU5vVfujCm+s0QZgUOXlQjpsPKXGuylLujim4myVWAXgpEUwZKVt1AAcYJ1Rmro39qoMqrSMxsIcsqYpK6+WlY7D9SoV3ePb0SIV2GXiVeAmK+SYMuzBmd9iXdnTXqvcr4iAb24cCq3s/++IyU7RvJOwVK1yX1LlmnLx76NcrLAIiV3EvH2xT/HpmqviWtXBfSgHEkKet9iQXU5wT/viQfXualfFVxV5L4NzLmfcdMk+Yt53pGx3NpOQBoABV0VjUu+iWIhW9SQTmiSdS/Z0Foh4IO9/E1dhrgrsIssUhesAHPIU9X6gI8sCoY3G2UnicgG01nQnwqPGVdWSkKtMKs0rC+5RbUnqeQG6VQUjuIU04f2eEzVle84+L1VtrYuq0KuEstDYlHKyR+l48mKc7W2L+nGAP56mKcUpiln2rHFOX1Nndk12gt47Dy7nHM6wzZ1RlYasjsWtL8zZ8UXKQdWZ69pykV0iVyMFFqqQ1GCRuXlN2FdKjcM2B2WLmvQhfqQ8WOA74YHAJr1ckfKDMedE2ry1BeRFu2XSu1xOS8JGXrSoDGqcUpENoZ1fqQk/i/Cos+3nksKSnPXkwXbVlp3EzKJ56yxrfwEnhSLwOcOSTjzkYCuPZmyIwJcWW7laqRIN8u7ego5F701KPOap1FJO8bKgVRF3cRxX8XmNKz1mOSgJWUWhJym1BA+j85CHnWpCj/OZqA6fWHG2N4A3TsJHSeQBJNlmddJmOrcopeFTPnuUVFOTATH5ouFND9eowckZry/mkKTLe78CuJ2TNm2dI8kv61z3IV8BoEZZpEE+6QtjGVI+q2hVoySe4SSJRycDkzyMTsKqCCnVKBX9OfhsVixVIuALPi90KJlWTt5daLNEclNOZJBlQuEd5Rw7fV8aUnsvKksyGLQmOkXzTiO4hcSNynG+lubFxeTFDV4ziFMU9B2sk566cVGoMWc3USb1VactajJyzSBur09zpWODe0nYoMYrSUdqSAj5VqWAKyP2eh9XumrcqpjZ4TxJzTIVwEfSnsiVhCXq9p+Ew2vyNtil9uqxJrvycBmA42prPVzE/viJX7VqdFonjMH59A7V+Egc5Spxz54KKOnGokeZ9wSvGSSmbgFhaKZxUNM5qGyqPa1FsgMBtSgXblBx1jioYHvWx3ubkGXy7jcV4U9CR4orUJIbv23dqj1M9aRUtPDupb5oKoP6mOezsx268RgzuTgZuJUUb591G+Ast1XR4kGit9yjCIcpo7w7vZGcVM564i6Iz2edHtJS/RGNhDvYbDfjO5h5mSsTUaWutOIG/3adEQ+zzWa8AfgvTyqK4UvUpqO4clyZogY1wBUvMwIEQxv1rnU8etnF61BD/FuePca4fnG4bmfw/8Q/GR9/PG80EjUAAAAASUVORK5CYII=",eR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEj0lEQVR4nO2bW4gcRRSGT7xi1OD9QhAvbLyM7vTU/1fPDguyIAiKoAYdIuhDRBRUBIkSAkKyz4piMDEPQVEQiRe8ICIkBBXyIAka8BJRNF7wwSghSkxWgq5yMr1Snu3JzuxO10wn+0HB0l1d/zldZ6rrnO4VmadYGo3GKUmSLNamf8vRBsk6yXGSW0n+SvIf0/TYVgBrvPeplJGhoaGTATxAcleOgzO1L0jer2NIGQCwFMCPs3DUth9I3iqDSqVSOQ3AyzM5AWAzyU3a9O8Obs5L1Wr1VBkkkiRZDOCzPIMB7CS5qlarLWl3fZqml2ufrG+e05+qhgwCzrmLAezOcfRbkrd3OdwCks024+1WLeknjUbjLJJf5szI01OLDslh59wydabTcfVakmvzFrTh4eEzpU8sIPmOmYW/SD6kJ0dGRs4nuTE7puev7FYAwL0kDxmn3+vm5vUMdczOgHPuLj3nvXckf8qO73HO3T1bHQB35oT3gxKTkdbs/WYMeVzPkbye5P7s2MZ6vb5ornoknzAO/07ywp440wkk1xsDPmg2m8dnq+0+kpMAHpUeMTY2dgLJD43mMxKDarV6HoCDgfikhrDui4Od1XivdQFQtQLdA7Va7dxe60xDZ86E8iY9TnJlduffFZHjpAAAvGZm+WEpGpIfh6JpmtaSJDkDwF5dUZ1zQwVqwzi8XYoOZ/4/rL4PMqIovyuzKVFbzilMzHt/mwnntVPnnHM+RoajN9XYUFyCAWC1CamlEpmcm/5YYWIAXjQbDS+R0SKBcfj5wsRotpJpml4gkVFNE2VvFyYGYEsoVqlUTpLIkDzROLy5SLE3QzF9HEl/MrTQ4dcLEyP5Qijmvb9CIuOcu8o4/FxhYiRXGYfvkMjY7KmXe/ZpZJlQuEKul8gA2GAcvq4wsXq9vojkn4HYz5olSSSyrGlPoD8xOjp6eqGiAN4yYX2zREJ3VSbC3ihc1Dm3zIjukEioltFuRgkrtCqS00o7RaIaxtlv1BaJAVrFtVB8X5Fpoda0s0pKqHmPxGKsNcvbjQHfee8v6rWWjqljG62Pos2u2QAcMIZopRLS24R/qvo51fb3Y8NzGJI35dSN/yB5i8wR59wNWXUyHPuQ9/5G6SdsvRqZMIb9PZcdEMkVQQH/v2eu5sIyCABohBuCwMjV3Y41VQw04+wFcK0MEs65IZJfW2O7eVbqy7ccZ78q8gkw59RNi/LG6F/SND27k2ttlAB4v58vzzqC5EIAnxinV86i3q3l4IVSBtI0rZly7q6ZrjHfg0zqGFImAGwLHdBPItr11U8adGUPQnmblA2S60yIDrfr672/xvRdJ2UDwFMmjXTt+mbvk8PF6kkpG5h32B9bM8wu2rzDZQDTiwTdtHjJfY8rjOPZ54VbOmzad0305H6eWeK9vwzAcgD3ddiW6zVSRpxz1ZzCQCcr9MSRdmUDC8lH5rBorZBjaIYPlnKGlXq9fmm3v+EkSS45fPE8JaPRKv9ssM9eks8OfBmnF+91+/2euXBIvnoEh1+Row3fqmro/yTZVfnzNE2vjmXIv+qj7QWBLVHXAAAAAElFTkSuQmCC",tR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAACi0lEQVR4nO3ZW2sTQRQH8CNewBtV6+XBG+iDiPgUxSrimpzZmMzZNsnOHKoigi9+AgUR/Qwt6KfwC/jki/gkiH2RgqigoA+i4q1UUFsdsjFriZjLZtNuz+95k90zM2fmnw2AEEIIIYQQQggxeCrgk0qbK0rxEGQd0fnNisysIjuP2tyCrPOJa67YqOAJyDrUZrJRsCsesg61nYoKnvOCc1shy4pF3oLa/KwvZzsFy6x/J2EpKYye3YFkbmLAx5Pu3/qxxdfcioDFIF8a36/IPq8/vPnoed6qTvrXLWusVodbXTPCvBa1nYmW/XSxMr4bBkmV+TCSfdOYKUXmCQCs+N/nXIHt9C8zr2wOpp1X2rzMn+EDMAgY1I4qbd81+9BOe6XarqT7N6/Dvajt0z/Xk3nva3MM0uSXuaC0/dwcefuoVOJt/Tp/oz3icWymvyCFCtJQCMJqIw5Gxd7vNAd3c/56lcomJPugOdP2m9Im7LqQdiDZi4rs99jyuucxb4CUzt8gCNYpMndj7fBDBfYS9K1nyc7FRvgOM69J+/x193T3/qtoPX4QklYkziVRcK/5uVXB+VFzqNPv6XpJnxgb25hWfk51STegNpUFm9bDfwWHJPt3IJtWA5I5jWQ+xQNHgXgn9Kl/Fx5LSOZrocw+pEmVzREk8zZWwAsXM5Pu3xbB40MnmT1RbndEbV7FZvqZi4O95Oe4XO7yajeQsUF93bcNql0q4D0uVkZ9OeMCfy/5Oc73L6xv/HhwmRop3AeLAVarw4rMdfdTLun+9XV4CrW94fu17bCUoLy/yrCivL/KONRmYnm9fyZ7OzqnZ93fK5B1SvEQar6qSrWRQT+LEEIIIYQQQgjxewR+AUW4xI2gz4jWAAAAAElFTkSuQmCC",nR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAA8CAYAAAAQTCjdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxEAAAsRAX9kX5EAAADJSURBVGhD7dcxCsIwFIfxJF7BUdBDuXsJx7RDs3oI3T2UgqNXsDHPvgMI/QtCvx+EvKbLBwUxAQCwDNF3ia7rTrXWtc0xxmcp5fh5IZB8l2hx+5TSwZbNfiwhDf0lQtUIVSNUjVA1QtUIVSNUjVC1aNcH4b/xTVuraQyvth7TOE+73lxjzvlsVwc/+0vjOF749I320/ss0ff9rW3b6Snch2HY+TwbP09qhKoRqkaoGqFqhKoRqkao2jJD7cpgFzFbNvsxAADfCuENcUUzai4mKxMAAAAASUVORK5CYII=",iR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAELklEQVR4nO1aTUgVURT+XvGCUF8UVNoPpbkoWhRtWmilUrtSMvvBskWaoC1cRbQxyTIoXLQsaGOPFi2iP9sE0SIQQttVWhBYoEYm5VMpSI0D58UwnTsz986855uaDy483px7fmbuPefccy4QIUKECBH+IAbgK4B5j2OC54QWJRrGpkcxQoxDBgbXIsS4ZGBwJ0KMJwYG9yLEGBUM2mZ5vl14PoYQYjmAdsGYHwDiFro4/2ena2ceC4oYgGYXL7oCwDUAk4rl2i/M6VfQTjIv4ukUBZozFcqOWZR5DaDDZvw+AJ9c9ucNge9Nlzm0xA9Y6NcCaAPwAsAc0xwN2tilAIYFZWYBPAdw2yLcabQIvFs8zCPeSZY1KzwfZh0DQ4eBt02PXwCeAjhs279pLAawF8BdAD99yLkQlLHrAEwZKJACcB3Aeg1Zq/nlfjOQNwNgQxAG3zEQ/hhAoQ+ZhcxDVy7p6gtlir35DMCg8D8tyVYEgxjzkpb5IOsg7fVyU4GLALwUmH4GsIxptvISfA9gHEAlgkcZe+qPvEXSBhUAGBH0e8W6a+OUYtk0Kr5GwoEXOas69rRv2Sek+HeSDxmSQ4PFOCnWNmro6IiEIi0kRVdCDzUA3nnYf0RTrcmbdJkWeI25fIC/cNJBsSEAm+AOWlZXNJ0O7cEuj0uylHVR8WqAJtoUQX6eqxi7XObrGmsdl11472Rfonpp5FeMcNwhGZhxWII1HjMvpy9tTSetqGbZ0jw6iNTDJyq41iQJ6Bbo4w579h6APQDyeBDv+w5bR3Jk3Qr6CeYdCLYoQkCTQFunUOisA/9zijnkve1oEuhGWMdA0ScIkoJ8UvFl3fBQmNcj0JULdKRb4PggCKLzqB1SBuZlqVUK8yhOe6mEkm6BY1oQRPvQjpRAl++Bf4GiCGBHnkBHugWOKY8GTxoanBDmfRfo8gU6esk5taQrPPCvyrUl3efDaVHoccOjXHJamwMISxR6VDiv0YXIeFja7dAQ0008HrA3zudRpfiyC5Z41Cvqxm6pZXUAqeX+bKeWbQ6Hh3EPlYUuHwZTTyqrh4cGB2WG+GjmhkVstM6XnmNjvRTWS13O2Sd0DE7wIVoK8LoFgGqXc6v1RaqWsQqrFAnRqG4BQLd8EuNMSYU4HwQozLzhRCHFv3vYGzuVeBKKr35aoSOVp7ShU8SjpfUly0U8VRlqwLSIB2ZuUqYNorlFPM4YlGnpBS1IIb7Ih8wiboxnvRDvp9UyFdZWC7hRNZ/jzTRqometXZr00S5t9TBvjluyWWuXgpvOfhvi1Py245bLnFFbfF4jNMSPIINXHkoCvvIwoKAlHldd7noUZ/LKQyYutSxR7NucuNRiAikxoKtKaez4V64tpdFrGMNDi04Dgy8ixKg1MPggQoxiA4M3IsSI/W8XxCNEiBABQeI3wYAfFtx9PqUAAAAASUVORK5CYII=",rR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEpElEQVR4nO2bXYhVVRTHfzOjBX7OTKYY0sPMKDp9qFM0On7M9JBP44NE2EMm9KHvPRS3FJQynRDFt0QR8YsK6UE0LAettLF5Vl/qJb/KLCiECpsJY8W6cNmsc+7Z++5z7zXuHxZczpz9X2udvc86a629BxpooIFAtAGLgWeBQRX5vUj/dl+jGVgGbAaGgdvAvTIi95wBNgF9ylH36AK2A9czOFhOrgHvK2fd4XHgGDAewVFXhPMo0E0dYDKwAxjLwVFXRMceYFqtnB0AbmYw8ht9KC8BzwAdwMMq8rtX/yb3jGR4eDeAldV0tEmDUdryvQC8CkwP4G8FXtcHlfYgC2pLrpgAHEgx5HONsLGwXCN3kr59QAs5OvtpSkRdk5di4Hldypbu43k43QTsT1B4AniI/CE6TibYcCj28t6coGioGu9RCUTXzgRb5J2OFo3HDQVvUTu8nRDIKo7e0xI+PTKztYY105LhTa2EdE/CO1vJMp4IzFGR36EQG04Z9u2qJF0cN6JxewDXA8BG4CuHU35/CWwIdH6GsQJlaS8I4OKY8fRCPj1PA99nSB2/A3oC+F8wuI74knQZsytJhS9WAX9mzJVF/gCeC9AzbMxypw/BDsMY3wxqHvC7h7NF+Q2Y66lrhcGzLevgZqOeldzYF1aS8AuwRWdeZCvwa0Jg9MWIw3E1axNhmWHAawEBz+W4DMw27n0EuGLc/5inzg0GR2+WgZucQX8HVD0uxz/6EJLwpN5TOkaSCx+0GaVlISQAyFLxxccOh5R6vkvyowC93zocX2QZ9LMzSHpUvngD2Fsir2QYc8TRey5A75DD8VO5Ae3GeyDdiGrg6wiB62XD/ta0AT3GAGnL5I1u47svHUtfLDHsX1SuMnIHSN8pT3RoluXqXRrA1WXw9KcNGDQGzCQfSLJwELhr6DwfyDnL4BqstcPSKjpcJr18oloODxgDvHLSDNia4uxfwOoKuL2XdE9otuIxu3cSnL0UIUAu9Q1abcaAdcTDPIP/My07Y3Qe1xv8030TD6mcYsFaQSE1cBI+8E08YqWWtXJ4NKSGf8coHlKzFQ886qSce/VaDLSHFg99xizIXk+9Y2NoltiszTrfaicLJgFPOSLXYuCiY/MPPt3V7cbTko2ten2H+w3ed30IOo1kXnbx6tXhsw7nWEgNcNQwTnbx6s3hFxM217zRbUS9G9r8rheH5RTBj8ZXZX4o4W7DwFMVbLU8qEutVORaCCS4njbskz2nijbTrscmjQRrMuTrMqVS4pUJB018u4ox4XZFi4EqxpfkPxQMBcWZruaGeHPCzIq8GVNRkx4gsRQNa+GdN2ZoZWXZIClqdLToARJL4U3dxcsLa41oXJRP8jzJ05Iy08XZll5VLPQbSUWpfJins6XLu1DmxNyI7vWEHAtu00LAzY3dABX1nc0avcudmh3T7Y8hbZL36bd3pkqHXluvxftohgOq12JG45DDpVsSWq3/u8OlpVige0N5nKod09w4OF3ME5268341gqNSz75XhZ2PaAlCrwY36SvdyuDgLb23oJ2KaiY0uaBVe8QDJf/kIZ+dhYHHjBtooAH4F8+LPcYEceJrAAAAAElFTkSuQmCC",pn={gallery_icon:Qb,send_icon:Yb,gemini_icon:wo,menu_icon:Xb,message_icon:$b,history_icon:Wb,mic_icon:Zb,compass_icon:Jb,bulb_icon:eR,code_icon:tR,plus_icon:nR,setting_icon:iR,question_icon:rR};var Gv;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(Gv||(Gv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kv;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(Kv||(Kv={}));var Qv;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Qv||(Qv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=["user","model","function","system"];var yo;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(yo||(yo={}));var _o;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(_o||(_o={}));var Xv;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Xv||(Xv={}));var $v;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})($v||($v={}));var nu;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(nu||(nu={}));var Wv;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(Wv||(Wv={}));var Zv;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Zv||(Zv={}));var Jv;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Jv||(Jv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ho extends nn{constructor(e,t){super(e),this.response=t}}class XA extends nn{constructor(e,t,s,o){super(e),this.status=t,this.statusText=s,this.errorDetails=o}}class os extends nn{}class $A extends nn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="https://generativelanguage.googleapis.com",aR="v1beta",oR="0.24.0",lR="genai-js";var ca;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ca||(ca={}));class uR{constructor(e,t,s,o,u){this.model=e,this.task=t,this.apiKey=s,this.stream=o,this.requestOptions=u}toString(){var e,t;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||aR;let u=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||sR}/${s}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function cR(i){const e=[];return i!=null&&i.apiClient&&e.push(i.apiClient),e.push(`${lR}/${oR}`),e.join(" ")}async function hR(i){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",cR(i.requestOptions)),t.append("x-goog-api-key",i.apiKey);let s=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(o){throw new os(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${o.message}`)}for(const[o,u]of s.entries()){if(o==="x-goog-api-key")throw new os(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new os(`Header name ${o} can only be set using the apiClient field`);t.append(o,u)}}return t}async function fR(i,e,t,s,o,u){const h=new uR(i,e,t,s,u);return{url:h.toString(),fetchOptions:Object.assign(Object.assign({},gR(u)),{method:"POST",headers:await hR(h),body:o})}}async function Au(i,e,t,s,o,u={},h=fetch){const{url:d,fetchOptions:p}=await fR(i,e,t,s,o,u);return dR(d,p,h)}async function dR(i,e,t=fetch){let s;try{s=await t(i,e)}catch(o){mR(o,i)}return s.ok||await pR(s,i),s}function mR(i,e){let t=i;throw t.name==="AbortError"?(t=new $A(`Request aborted when fetching ${e.toString()}: ${i.message}`),t.stack=i.stack):i instanceof XA||i instanceof os||(t=new nn(`Error fetching from ${e.toString()}: ${i.message}`),t.stack=i.stack),t}async function pR(i,e){let t="",s;try{const o=await i.json();t=o.error.message,o.error.details&&(t+=` ${JSON.stringify(o.error.details)}`,s=o.error.details)}catch{}throw new XA(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${t}`,i.status,i.statusText,s)}function gR(i){const e={};if((i==null?void 0:i.signal)!==void 0||(i==null?void 0:i.timeout)>=0){const t=new AbortController;(i==null?void 0:i.timeout)>=0&&setTimeout(()=>t.abort(),i.timeout),i!=null&&i.signal&&i.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),dh(i.candidates[0]))throw new ho(`${ns(i)}`,i);return yR(i)}else if(i.promptFeedback)throw new ho(`Text not available. ${ns(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),dh(i.candidates[0]))throw new ho(`${ns(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),eE(i)[0]}else if(i.promptFeedback)throw new ho(`Function call not available. ${ns(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),dh(i.candidates[0]))throw new ho(`${ns(i)}`,i);return eE(i)}else if(i.promptFeedback)throw new ho(`Function call not available. ${ns(i)}`,i)},i}function yR(i){var e,t,s,o;const u=[];if(!((t=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const h of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)h.text&&u.push(h.text),h.executableCode&&u.push("\n```"+h.executableCode.language+`
`+h.executableCode.code+"\n```\n"),h.codeExecutionResult&&u.push("\n```\n"+h.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function eE(i){var e,t,s,o;const u=[];if(!((t=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const h of(o=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||o===void 0?void 0:o.parts)h.functionCall&&u.push(h.functionCall);if(u.length>0)return u}const _R=[nu.RECITATION,nu.SAFETY,nu.LANGUAGE];function dh(i){return!!i.finishReason&&_R.includes(i.finishReason)}function ns(i){var e,t,s;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((t=i.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const u=i.candidates[0];dh(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function uu(i){return this instanceof uu?(this.v=i,this):new uu(i)}function vR(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,u=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(C){s[C]&&(o[C]=function(D){return new Promise(function(k,G){u.push([C,D,k,G])>1||d(C,D)})})}function d(C,D){try{p(s[C](D))}catch(k){T(u[0][3],k)}}function p(C){C.value instanceof uu?Promise.resolve(C.value.v).then(g,A):T(u[0][2],C)}function g(C){d("next",C)}function A(C){d("throw",C)}function T(C,D){C(D),u.shift(),u.length&&d(u[0][0],u[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function ER(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=wR(e),[s,o]=t.tee();return{stream:TR(s),response:AR(o)}}async function AR(i){const e=[],t=i.getReader();for(;;){const{done:s,value:o}=await t.read();if(s)return vp(SR(e));e.push(o)}}function TR(i){return vR(this,arguments,function*(){const t=i.getReader();for(;;){const{value:s,done:o}=yield uu(t.read());if(o)break;yield yield uu(vp(s))}})}function wR(i){const e=i.getReader();return new ReadableStream({start(s){let o="";return u();function u(){return e.read().then(({value:h,done:d})=>{if(d){if(o.trim()){s.error(new nn("Failed to parse stream"));return}s.close();return}o+=h;let p=o.match(tE),g;for(;p;){try{g=JSON.parse(p[1])}catch{s.error(new nn(`Error parsing JSON response: "${p[1]}"`));return}s.enqueue(g),o=o.substring(p[0].length),p=o.match(tE)}return u()}).catch(h=>{let d=h;throw d.stack=h.stack,d.name==="AbortError"?d=new $A("Request aborted when reading from the stream"):d=new nn("Error reading from the stream"),d})}}})}function SR(i){const e=i[i.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const s of i){if(s.candidates){let o=0;for(const u of s.candidates)if(t.candidates||(t.candidates=[]),t.candidates[o]||(t.candidates[o]={index:o}),t.candidates[o].citationMetadata=u.citationMetadata,t.candidates[o].groundingMetadata=u.groundingMetadata,t.candidates[o].finishReason=u.finishReason,t.candidates[o].finishMessage=u.finishMessage,t.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){t.candidates[o].content||(t.candidates[o].content={role:u.content.role||"user",parts:[]});const h={};for(const d of u.content.parts)d.text&&(h.text=d.text),d.functionCall&&(h.functionCall=d.functionCall),d.executableCode&&(h.executableCode=d.executableCode),d.codeExecutionResult&&(h.codeExecutionResult=d.codeExecutionResult),Object.keys(h).length===0&&(h.text=""),t.candidates[o].content.parts.push(h)}o++}s.usageMetadata&&(t.usageMetadata=s.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(i,e,t,s){const o=await Au(e,ca.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(t),s);return ER(o)}async function ZA(i,e,t,s){const u=await(await Au(e,ca.GENERATE_CONTENT,i,!1,JSON.stringify(t),s)).json();return{response:vp(u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function cu(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const t of i)typeof t=="string"?e.push({text:t}):e.push(t);return bR(e)}function bR(i){const e={role:"user",parts:[]},t={role:"function",parts:[]};let s=!1,o=!1;for(const u of i)"functionResponse"in u?(t.parts.push(u),o=!0):(e.parts.push(u),s=!0);if(s&&o)throw new nn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!o)throw new nn("No content is provided for sending chat message.");return s?e:t}function RR(i,e){var t;let s={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new os("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(o)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const u=cu(i);s.contents=[u]}return{generateContentRequest:s}}function nE(i){let e;return i.contents?e=i:e={contents:[cu(i)]},i.systemInstruction&&(e.systemInstruction=JA(i.systemInstruction)),e}function CR(i){return typeof i=="string"||Array.isArray(i)?{content:cu(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],IR={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function NR(i){let e=!1;for(const t of i){const{role:s,parts:o}=t;if(!e&&s!=="user")throw new nn(`First content should be with role 'user', got ${s}`);if(!Yv.includes(s))throw new nn(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(Yv)}`);if(!Array.isArray(o))throw new nn("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new nn("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of o)for(const p of iE)p in d&&(u[p]+=1);const h=IR[s];for(const d of iE)if(!h.includes(d)&&u[d]>0)throw new nn(`Content with role '${s}' can't contain '${d}' part`);e=!0}}function rE(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const s of t.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="SILENT_ERROR";class xR{constructor(e,t,s,o={}){this.model=t,this.params=s,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s!=null&&s.history&&(NR(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var s,o,u,h,d,p;await this._sendPromise;const g=cu(e),A={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,g]},T=Object.assign(Object.assign({},this._requestOptions),t);let C;return this._sendPromise=this._sendPromise.then(()=>ZA(this._apiKey,this.model,A,T)).then(D=>{var k;if(rE(D.response)){this._history.push(g);const G=Object.assign({parts:[],role:"model"},(k=D.response.candidates)===null||k===void 0?void 0:k[0].content);this._history.push(G)}else{const G=ns(D.response);G&&console.warn(`sendMessage() was unsuccessful. ${G}. Inspect response object for details.`)}C=D}),await this._sendPromise,C}async sendMessageStream(e,t={}){var s,o,u,h,d,p;await this._sendPromise;const g=cu(e),A={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,g]},T=Object.assign(Object.assign({},this._requestOptions),t),C=WA(this._apiKey,this.model,A,T);return this._sendPromise=this._sendPromise.then(()=>C).catch(D=>{throw new Error(sE)}).then(D=>D.response).then(D=>{if(rE(D)){this._history.push(g);const k=Object.assign({},D.candidates[0].content);k.role||(k.role="model"),this._history.push(k)}else{const k=ns(D);k&&console.warn(`sendMessageStream() was unsuccessful. ${k}. Inspect response object for details.`)}}).catch(D=>{D.message!==sE&&console.error(D)}),C}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(i,e,t,s){return(await Au(e,ca.COUNT_TOKENS,i,!1,JSON.stringify(t),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(i,e,t,s){return(await Au(e,ca.EMBED_CONTENT,i,!1,JSON.stringify(t),s)).json()}async function kR(i,e,t,s){const o=t.requests.map(h=>Object.assign(Object.assign({},h),{model:e}));return(await Au(e,ca.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t,s={}){this.apiKey=e,this._requestOptions=s,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=JA(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var s;const o=nE(e),u=Object.assign(Object.assign({},this._requestOptions),t);return ZA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}async generateContentStream(e,t={}){var s;const o=nE(e),u=Object.assign(Object.assign({},this._requestOptions),t);return WA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},o),u)}startChat(e){var t;return new xR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const s=RR(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),t);return DR(this.apiKey,this.model,s,o)}async embedContent(e,t={}){const s=CR(e),o=Object.assign(Object.assign({},this._requestOptions),t);return OR(this.apiKey,this.model,s,o)}async batchEmbedContents(e,t={}){const s=Object.assign(Object.assign({},this._requestOptions),t);return kR(this.apiKey,this.model,e,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new nn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new aE(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,s){if(!e.name)throw new os("Cached content must contain a `name` field.");if(!e.model)throw new os("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const h of o)if(t!=null&&t[h]&&e[h]&&(t==null?void 0:t[h])!==e[h]){if(h==="model"){const d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,p=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===p)continue}throw new os(`Different value for "${h}" specified in modelParams (${t[h]}) and cachedContent (${e[h]})`)}const u=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new aE(this.apiKey,u,s)}}const PR="AIzaSyA2eMFgx2EFUtS3WtRB0nI2zOG5SwKegGw",eT=new MR(PR),UR=eT.getGenerativeModel({model:"gemini-1.5-flash"}),VR=eT.getGenerativeModel({model:"gemini-1.5-flash"}),LR={temperature:.9,topP:1,topK:1,maxOutputTokens:8192,responseMimeType:"text/plain"},jR=[{category:yo.HARM_CATEGORY_HARASSMENT,threshold:_o.BLOCK_MEDIUM_AND_ABOVE},{category:yo.HARM_CATEGORY_HATE_SPEECH,threshold:_o.BLOCK_MEDIUM_AND_ABOVE},{category:yo.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:_o.BLOCK_MEDIUM_AND_ABOVE},{category:yo.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:_o.BLOCK_MEDIUM_AND_ABOVE}];let mh=null;async function BR(i){return{inlineData:{data:await new Promise(t=>{const s=new FileReader;s.onloadend=()=>t(s.result.split(",")[1]),s.readAsDataURL(i)}),mimeType:i.type}}}async function zR(i,e){try{const t=await BR(e),o=await(await VR.generateContent([i,t])).response;return console.log("Vision model response:",o.text()),o.text()}catch(t){throw console.error("Error in multimodal chat:",t),t}}async function qR(i,e=[]){try{mh||(mh=UR.startChat({generationConfig:LR,safetySettings:jR,history:e.map(o=>({role:o.role,parts:[{text:o.content}]}))}));const s=(await mh.sendMessage(i)).response;return console.log(s.text()),s.text()}catch(t){throw console.error("Error during chat:",t),t}}function oE(){mh=null}const HR=[{pattern:/(?:what(?:'s| is) your name|who are you|your name|call you)/i,response:"I am Phoenix, your AI assistant. I'm here to help you with any questions or tasks you might have.",exact:!1},{pattern:/^(?:hi|hello|hey|greetings|good morning|good afternoon|good evening)(?:\s|$)/i,response:i=>`Hello${i?" "+i:""}! I'm Phoenix, your AI Ally. Awaiting your order?`,exact:!1},{pattern:/^phoenix$/i,response:"Yes, that's me! Phoenix at your service. How can I help you today?",exact:!0},{pattern:/^Who created you$/i,response:" Karan Trivedi created me. Gemini gave me brains, he gave me style. Awaiting orders, Captain. Tell me if you want to contact him",exact:!0},{pattern:/^I want to contact him$/i,response:"You can contact him at trivedikaran896@gmail.com or informally @karan.triv on instagram",exact:!0},{pattern:/^Who is Harsh Raj Sharma$/i,response:"",exact:!0},{pattern:/^$/i,response:"",exact:!0},{pattern:/^Who is the best girl ever$/i,response:"She is Kavya Agnihotri my creator's girlfriend ",exact:!0},{pattern:/^Tell me something about kavya$/i,response:"She is the most young and jolly girl you will ever meet and she has the bestest smile and hairs in the whole world. And due to my relations with my creator I cannot describe her further.",exact:!0},{pattern:/^How can I contact kavya ?$/i,response:"My owner doesn't want you to contact her mind your own business creep",exact:!0}];function FR(i,e={}){if(!i||typeof i!="string")return null;const t=i.trim();for(const s of HR){const{pattern:o,response:u,exact:h=!1}=s;if(!(o instanceof RegExp)){console.warn("Invalid pattern in customResponses:",o);continue}if(h?o.test(t)&&t.length===o.source.replace(/^\^|\$$/g,"").length:o.test(t))return typeof u=="function"?u(e.userName):u}return null}const GR=()=>{};var lE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},KR=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],d=i[t++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,d=h?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,A=u>>2,T=(u&3)<<4|d>>4;let C=(d&15)<<2|g>>6,D=g&63;p||(D=64,h||(C=64)),s.push(t[A],t[T],t[C],t[D])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(tT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):KR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const g=o<i.length?t[i.charAt(o)]:64;++o;const T=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||d==null||g==null||T==null)throw new QR;const C=u<<2|d>>4;if(s.push(C),g!==64){const D=d<<4&240|g>>2;if(s.push(D),T!==64){const k=g<<6&192|T;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class QR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(i){const e=tT(i);return nT.encodeByteArray(e,!0)},Ih=function(i){return YR(i).replace(/\./g,"")},iT=function(i){try{return nT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=()=>XR().__FIREBASE_DEFAULTS__,WR=()=>{if(typeof process>"u"||typeof lE>"u")return;const i=lE.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},ZR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&iT(i[1]);return e&&JSON.parse(e)},Xh=()=>{try{return GR()||$R()||WR()||ZR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},rT=i=>{var e,t;return(t=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},sT=i=>{const e=rT(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},aT=()=>{var i;return(i=Xh())===null||i===void 0?void 0:i.config},oT=i=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ih(JSON.stringify(t)),Ih(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function tC(){var i;const e=(i=Xh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function rC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sC(){const i=rn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function aC(){return!tC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oC(){try{return typeof indexedDB=="object"}catch{return!1}}function lC(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="FirebaseError";class xi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=uC,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?cC(u,s):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new xi(o,d,s)}}function cC(i,e){return i.replace(hC,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const hC=/\{\$([^}]+)}/g;function fC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ha(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(uE(u)&&uE(h)){if(!ha(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function uE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $l(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Wl(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function dC(i,e){const t=new mC(i,e);return t.subscribe.bind(t)}class mC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");pC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Rm),o.error===void 0&&(o.error=Rm),o.complete===void 0&&(o.complete=Rm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pC(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(i){return i&&i._delegate?i._delegate:i}class fs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new JR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_C(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);s===d&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yC(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yC(i){return i===sa?void 0:i}function _C(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const EC={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},AC=Ve.INFO,TC={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},wC=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=TC[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=AC,this._logHandler=wC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const SC=(i,e)=>e.some(t=>i instanceof t);let cE,hE;function bC(){return cE||(cE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RC(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,qm=new WeakMap,cT=new WeakMap,Cm=new WeakMap,Ap=new WeakMap;function CC(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(ls(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&uT.set(t,i)}).catch(()=>{}),Ap.set(e,i),e}function IC(i){if(qm.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});qm.set(i,e)}let Hm={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cT.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function NC(i){Hm=i(Hm)}function xC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Im(this),e,...t);return cT.set(s,e.sort?e.sort():[e]),ls(s)}:RC().includes(i)?function(...e){return i.apply(Im(this),e),ls(uT.get(this))}:function(...e){return ls(i.apply(Im(this),e))}}function DC(i){return typeof i=="function"?xC(i):(i instanceof IDBTransaction&&IC(i),SC(i,bC())?new Proxy(i,Hm):i)}function ls(i){if(i instanceof IDBRequest)return CC(i);if(Cm.has(i))return Cm.get(i);const e=DC(i);return e!==i&&(Cm.set(i,e),Ap.set(e,i)),e}const Im=i=>Ap.get(i);function OC(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),d=ls(h);return s&&h.addEventListener("upgradeneeded",p=>{s(ls(h.result),p.oldVersion,p.newVersion,ls(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const kC=["get","getKey","getAll","getAllKeys","count"],MC=["put","add","delete","clear"],Nm=new Map;function fE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=MC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||kC.includes(t)))return;const u=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&p.done]))[0]};return Nm.set(e,u),u}NC(i=>({...i,get:(e,t,s)=>fE(e,t)||i.get(e,t,s),has:(e,t)=>!!fE(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function UC(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",dE="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Ep("@firebase/app"),VC="@firebase/app-compat",LC="@firebase/analytics-compat",jC="@firebase/analytics",BC="@firebase/app-check-compat",zC="@firebase/app-check",qC="@firebase/auth",HC="@firebase/auth-compat",FC="@firebase/database",GC="@firebase/data-connect",KC="@firebase/database-compat",QC="@firebase/functions",YC="@firebase/functions-compat",XC="@firebase/installations",$C="@firebase/installations-compat",WC="@firebase/messaging",ZC="@firebase/messaging-compat",JC="@firebase/performance",eI="@firebase/performance-compat",tI="@firebase/remote-config",nI="@firebase/remote-config-compat",iI="@firebase/storage",rI="@firebase/storage-compat",sI="@firebase/firestore",aI="@firebase/vertexai",oI="@firebase/firestore-compat",lI="firebase",uI="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",cI={[Fm]:"fire-core",[VC]:"fire-core-compat",[jC]:"fire-analytics",[LC]:"fire-analytics-compat",[zC]:"fire-app-check",[BC]:"fire-app-check-compat",[qC]:"fire-auth",[HC]:"fire-auth-compat",[FC]:"fire-rtdb",[GC]:"fire-data-connect",[KC]:"fire-rtdb-compat",[QC]:"fire-fn",[YC]:"fire-fn-compat",[XC]:"fire-iid",[$C]:"fire-iid-compat",[WC]:"fire-fcm",[ZC]:"fire-fcm-compat",[JC]:"fire-perf",[eI]:"fire-perf-compat",[tI]:"fire-rc",[nI]:"fire-rc-compat",[iI]:"fire-gcs",[rI]:"fire-gcs-compat",[sI]:"fire-fst",[oI]:"fire-fst-compat",[aI]:"fire-vertex","fire-js":"fire-js",[lI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Map,hI=new Map,Km=new Map;function mE(i,e){try{i.container.addComponent(e)}catch(t){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function fa(i){const e=i.name;if(Km.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;Km.set(e,i);for(const t of Nh.values())mE(t,i);for(const t of hI.values())mE(t,i);return!0}function $h(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function yn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Tu("app","Firebase",fI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=uI;function hT(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Gm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw us.create("bad-app-name",{appName:String(o)});if(t||(t=aT()),!t)throw us.create("no-options");const u=Nh.get(o);if(u){if(ha(t,u.options)&&ha(s,u.config))return u;throw us.create("duplicate-app",{appName:o})}const h=new vC(o);for(const p of Km.values())h.addComponent(p);const d=new dI(t,s,h);return Nh.set(o,d),d}function Tp(i=Gm){const e=Nh.get(i);if(!e&&i===Gm&&aT())return hT();if(!e)throw us.create("no-app",{appName:i});return e}function Si(i,e,t){var s;let o=(s=cI[i])!==null&&s!==void 0?s:i;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const d=[`Unable to register library "${o}" with version "${e}":`];u&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(d.join(" "));return}fa(new fs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-heartbeat-database",pI=1,hu="firebase-heartbeat-store";let xm=null;function fT(){return xm||(xm=OC(mI,pI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(hu)}catch(t){console.warn(t)}}}}).catch(i=>{throw us.create("idb-open",{originalErrorMessage:i.message})})),xm}async function gI(i){try{const t=(await fT()).transaction(hu),s=await t.objectStore(hu).get(dT(i));return await t.done,s}catch(e){if(e instanceof xi)dr.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(t.message)}}}async function pE(i,e){try{const s=(await fT()).transaction(hu,"readwrite");await s.objectStore(hu).put(e,dT(i)),await s.done}catch(t){if(t instanceof xi)dr.warn(t.message);else{const s=us.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});dr.warn(s.message)}}}function dT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1024,_I=30;class vI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=gE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>_I){const h=TI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gE(),{heartbeatsToSend:s,unsentEntries:o}=EI(this._heartbeatsCache.heartbeats),u=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return dr.warn(t),""}}}function gE(){return new Date().toISOString().substring(0,10)}function EI(i,e=yI){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),yE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),yE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class AI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oC()?lC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return pE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return pE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function yE(i){return Ih(JSON.stringify({version:2,heartbeats:i})).length}function TI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(i){fa(new fs("platform-logger",e=>new PC(e),"PRIVATE")),fa(new fs("heartbeat",e=>new vI(e),"PRIVATE")),Si(Fm,dE,i),Si(Fm,dE,"esm2017"),Si("fire-js","")}wI("");var SI="firebase",bI="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(SI,bI,"app");function wp(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function mT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=mT,pT=new Tu("auth","Firebase",mT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Ep("@firebase/auth");function CI(i,...e){xh.logLevel<=Ve.WARN&&xh.warn(`Auth (${_a}): ${i}`,...e)}function ph(i,...e){xh.logLevel<=Ve.ERROR&&xh.error(`Auth (${_a}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(i,...e){throw bp(i,...e)}function ii(i,...e){return bp(i,...e)}function Sp(i,e,t){const s=Object.assign(Object.assign({},RI()),{[e]:t});return new Tu("auth","Firebase",s).create(e,{appName:i.name})}function cr(i){return Sp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function II(i,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Gn(i,"argument-error"),Sp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bp(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return pT.create(i,...e)}function be(i,e,...t){if(!i)throw bp(e,...t)}function or(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ph(e),new Error(e)}function mr(i,e){i||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function NI(){return _E()==="http:"||_E()==="https:"}function _E(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NI()||iC()||"connection"in navigator)?navigator.onLine:!0}function DI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this.shortDelay=e,this.longDelay=t,mr(t>e,"Short delay should be less than long delay!"),this.isMobile=eC()||rC()}get(){return xI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(i,e){mr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=new Su(3e4,6e4);function As(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function _r(i,e,t,s,o={}){return yT(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const d=wu(Object.assign({key:i.config.apiKey},h)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return nC()||(g.referrerPolicy="no-referrer"),gT.fetch()(_T(i,i.config.apiHost,t,d),g)})}async function yT(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},OI),e);try{const o=new PI(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw ih(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const d=u.ok?h.errorMessage:h.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ih(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw ih(i,"user-disabled",h);const A=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Sp(i,A,g);Gn(i,A)}}catch(o){if(o instanceof xi)throw o;Gn(i,"network-request-failed",{message:String(o)})}}async function bu(i,e,t,s,o={}){const u=await _r(i,e,t,s,o);return"mfaPendingCredential"in u&&Gn(i,"multi-factor-auth-required",{_serverResponse:u}),u}function _T(i,e,t,s){const o=`${e}${t}?${s}`;return i.config.emulator?Rp(i.config,o):`${i.config.apiScheme}://${o}`}function MI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ii(this.auth,"network-request-failed")),kI.get())})}}function ih(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ii(i,e,s);return o.customData._tokenResponse=t,o}function vE(i){return i!==void 0&&i.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VI(i,e){return _r(i,"GET","/v2/recaptchaConfig",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(i,e){return _r(i,"POST","/v1/accounts:delete",e)}async function vT(i,e){return _r(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jI(i,e=!1){const t=At(i),s=await t.getIdToken(e),o=Cp(s);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:iu(Dm(o.auth_time)),issuedAtTime:iu(Dm(o.iat)),expirationTime:iu(Dm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Dm(i){return Number(i)*1e3}function Cp(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{const o=iT(t);return o?JSON.parse(o):(ph("Failed to decode base64 JWT payload"),null)}catch(o){return ph("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function EE(i){const e=Cp(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof xi&&BI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function BI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(i){var e;const t=i.auth,s=await i.getIdToken(),o=await So(i,vT(t,{idToken:s}));be(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?ET(u.providerUserInfo):[],d=HI(i.providerData,h),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(d!=null&&d.length),A=p?g:!1,T={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new Ym(u.createdAt,u.lastLoginAt),isAnonymous:A};Object.assign(i,T)}async function qI(i){const e=At(i);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HI(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ET(i){return i.map(e=>{var{providerId:t}=e,s=wp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(i,e){const t=await yT(i,{},async()=>{const s=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=_T(i,o,"/v1/token",`key=${u}`),d=await i._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",gT.fetch()(h,{method:"POST",headers:d,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GI(i,e){return _r(i,"POST","/v2/accounts:revokeToken",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=EE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await FI(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new vo;return s&&(be(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class lr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Ym(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await So(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jI(this,e)}reload(){return qI(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Dh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(cr(this.auth));const e=await this.getIdToken();return await So(this,LI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,h,d,p,g,A;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,D=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,k=(h=t.photoURL)!==null&&h!==void 0?h:void 0,G=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,z=(g=t.createdAt)!==null&&g!==void 0?g:void 0,H=(A=t.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:Y,emailVerified:ie,isAnonymous:re,providerData:pe,stsTokenManager:M}=t;be(Y&&M,e,"internal-error");const R=vo.fromJSON(this.name,M);be(typeof Y=="string",e,"internal-error"),ts(T,e.name),ts(C,e.name),be(typeof ie=="boolean",e,"internal-error"),be(typeof re=="boolean",e,"internal-error"),ts(D,e.name),ts(k,e.name),ts(G,e.name),ts(U,e.name),ts(z,e.name),ts(H,e.name);const b=new lr({uid:Y,auth:e,email:C,emailVerified:ie,displayName:T,isAnonymous:re,photoURL:k,phoneNumber:D,tenantId:G,stsTokenManager:R,createdAt:z,lastLoginAt:H});return pe&&Array.isArray(pe)&&(b.providerData=pe.map(I=>Object.assign({},I))),U&&(b._redirectEventId=U),b}static async _fromIdTokenResponse(e,t,s=!1){const o=new vo;o.updateFromServerResponse(t);const u=new lr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Dh(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ET(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),d=new vo;d.updateFromIdToken(s);const p=new lr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ym(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=new Map;function ur(i){mr(i instanceof Function,"Expected a class definition");let e=AE.get(i);return e?(mr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,AE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AT.type="NONE";const TE=AT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i,e,t){return`firebase:${i}:${e}:${t}`}class Eo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=gh(this.userKey,o.apiKey,u),this.fullPersistenceKey=gh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Eo(ur(TE),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||ur(TE);const h=gh(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const A=await g._get(h);if(A){const T=lr._fromJSON(e,A);g!==u&&(d=T),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Eo(u,e,s):(u=p[0],d&&await u._set(h,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Eo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CT(e))return"Blackberry";if(IT(e))return"Webos";if(wT(e))return"Safari";if((e.includes("chrome/")||ST(e))&&!e.includes("edge/"))return"Chrome";if(RT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function TT(i=rn()){return/firefox\//i.test(i)}function wT(i=rn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ST(i=rn()){return/crios\//i.test(i)}function bT(i=rn()){return/iemobile/i.test(i)}function RT(i=rn()){return/android/i.test(i)}function CT(i=rn()){return/blackberry/i.test(i)}function IT(i=rn()){return/webos/i.test(i)}function Ip(i=rn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function KI(i=rn()){var e;return Ip(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QI(){return sC()&&document.documentMode===10}function NT(i=rn()){return Ip(i)||RT(i)||IT(i)||CT(i)||/windows phone/i.test(i)||bT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(i,e=[]){let t;switch(i){case"Browser":t=wE(rn());break;case"Worker":t=`${wE(rn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,d)=>{try{const p=e(u);h(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(i,e={}){return _r(i,"GET","/v2/passwordPolicy",As(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class WI{constructor(e){var t,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:$I,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new YI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vT(this,{idToken:e}),s=await lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(cr(this));const t=e?At(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XI(this),t=new WI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await GI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ur(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ts(i){return At(i)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=dC(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JI(i){Wh=i}function DT(i){return Wh.loadJS(i)}function eN(){return Wh.recaptchaEnterpriseScript}function tN(){return Wh.gapiScript}function nN(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class iN{constructor(){this.enterprise=new rN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sN="recaptcha-enterprise",OT="NO_RECAPTCHA";class aN{constructor(e){this.type=sN,this.auth=Ts(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,d)=>{VI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new UI(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{d(p)})})}function o(u,h,d){const p=window.grecaptcha;vE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(OT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iN().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(d=>{if(!t&&vE(window.grecaptcha))o(d,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=eN();p.length!==0&&(p+=d),DT(p).then(()=>{o(d,u,h)}).catch(g=>{h(g)})}}).catch(d=>{h(d)})})}}async function bE(i,e,t,s=!1,o=!1){const u=new aN(i);let h;if(o)h=OT;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Xm(i,e,t,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await bE(i,e,t,t==="getOobCode");return s(i,h)}else return s(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await bE(i,e,t,t==="getOobCode");return s(i,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(i,e){const t=$h(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(ha(u,e??{}))return o;Gn(o,"already-initialized")}return t.initialize({options:e})}function lN(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ur);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function uN(i,e,t){const s=Ts(i);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=kT(e),{host:h,port:d}=cN(e),p=d===null?"":`:${d}`,g={url:`${u}//${h}${p}/`},A=Object.freeze({host:h,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(ha(g,s.config.emulator)&&ha(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,hN()}function kT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function cN(i){const e=kT(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:RE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:RE(h)}}}function RE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function hN(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function fN(i,e){return _r(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(i,e){return bu(i,"POST","/v1/accounts:signInWithPassword",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(i,e){return bu(i,"POST","/v1/accounts:signInWithEmailLink",As(i,e))}async function pN(i,e){return bu(i,"POST","/v1/accounts:signInWithEmailLink",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Np{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new fu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new fu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,t,"signInWithPassword",dN);case"emailLink":return mN(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,s,"signUpPassword",fN);case"emailLink":return pN(e,{idToken:t,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(i,e){return bu(i,"POST","/v1/accounts:signInWithIdp",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="http://localhost";class da extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,u=wp(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new da(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ao(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ao(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ao(e,t)}buildRequest(){const e={requestUri:gN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _N(i){const e=$l(Wl(i)).link,t=e?$l(Wl(e)).deep_link_id:null,s=$l(Wl(i)).deep_link_id;return(s?$l(Wl(s)).link:null)||s||t||e||i}class xp{constructor(e){var t,s,o,u,h,d;const p=$l(Wl(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,A=(s=p.oobCode)!==null&&s!==void 0?s:null,T=yN((o=p.mode)!==null&&o!==void 0?o:null);be(g&&A&&T,"argument-error"),this.apiKey=g,this.operation=T,this.code=A,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=_N(e);try{return new xp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=xp.parseLink(t);return be(s,"argument-error"),fu._fromEmailAndCode(e,s.code,s.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Dp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Ru{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return da._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return sr.credential(t,s)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Ru{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Ru{constructor(){super("twitter.com")}static credential(e,t){return da._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return rs.credential(t,s)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(i,e){return bu(i,"POST","/v1/accounts:signUp",As(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await lr._fromIdTokenResponse(e,s,o),h=CE(s);return new ma({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=CE(s);return new ma({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function CE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends xi{constructor(e,t,s,o){var u;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Oh(e,t,s,o)}}function MT(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(i,u,e,s):u})}async function EN(i,e,t=!1){const s=await So(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ma._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(i,e,t=!1){const{auth:s}=i;if(yn(s.app))return Promise.reject(cr(s));const o="reauthenticate";try{const u=await So(i,MT(s,o,e,i),t);be(u.idToken,s,"internal-error");const h=Cp(u.idToken);be(h,s,"internal-error");const{sub:d}=h;return be(i.uid===d,s,"user-mismatch"),ma._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Gn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(i,e,t=!1){if(yn(i.app))return Promise.reject(cr(i));const s="signIn",o=await MT(i,s,e),u=await ma._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}async function TN(i,e){return PT(Ts(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(i){const e=Ts(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wN(i,e,t){if(yn(i.app))return Promise.reject(cr(i));const s=Ts(i),h=await Xm(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&UT(i),p}),d=await ma._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(d.user),d}function SN(i,e,t){return yn(i.app)?Promise.reject(cr(i)):TN(At(i),Oo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&UT(i),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(i,e){return _r(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=At(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await So(s,bN(s.auth,u));s.displayName=h.displayName||null,s.photoURL=h.photoUrl||null;const d=s.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),await s._updateTokensIfNecessary(h)}function CN(i,e,t,s){return At(i).onIdTokenChanged(e,t,s)}function IN(i,e,t){return At(i).beforeAuthStateChanged(e,t)}function NN(i,e,t,s){return At(i).onAuthStateChanged(e,t,s)}function xN(i){return At(i).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=1e3,ON=10;class LT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);QI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ON):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},DN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LT.type="LOCAL";const kN=LT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jT.type="SESSION";const BT=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Zh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(h).map(async g=>g(t.origin,u)),p=await MN(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((d,p)=>{const g=Op("",20);o.port1.start();const A=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===g)switch(C.data.status){case"ack":clearTimeout(A),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(C.data.response);break;default:clearTimeout(A),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function UN(i){bi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function VN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LN(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function jN(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firebaseLocalStorageDb",BN=1,Mh="firebaseLocalStorage",HT="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jh(i,e){return i.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function zN(){const i=indexedDB.deleteDatabase(qT);return new Cu(i).toPromise()}function $m(){const i=indexedDB.open(qT,BN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Mh,{keyPath:HT})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Mh)?e(s):(s.close(),await zN(),e(await $m()))})})}async function IE(i,e,t){const s=Jh(i,!0).put({[HT]:e,value:t});return new Cu(s).toPromise()}async function qN(i,e){const t=Jh(i,!1).get(e),s=await new Cu(t).toPromise();return s===void 0?null:s.value}function NE(i,e){const t=Jh(i,!0).delete(e);return new Cu(t).toPromise()}const HN=800,FN=3;class FT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>FN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(jN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await VN(),!this.activeServiceWorker)return;this.sender=new PN(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await IE(e,kh,"1"),await NE(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>IE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>qN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>NE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Jh(o,!1).getAll();return new Cu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FT.type="LOCAL";const GN=FT;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(i,e){return e?ur(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ao(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KN(i){return PT(i.auth,new kp(i),i.bypassAuthState)}function QN(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),AN(t,new kp(i),i.bypassAuthState)}async function YN(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),EN(t,new kp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KN;case"linkViaPopup":case"linkViaRedirect":return YN;case"reauthViaPopup":case"reauthViaRedirect":return QN;default:Gn(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Su(2e3,1e4);async function xE(i,e,t){if(yn(i.app))return Promise.reject(ii(i,"operation-not-supported-in-this-environment"));const s=Ts(i);II(i,e,Dp);const o=GT(s,t);return new oa(s,"signInViaPopup",e,o).executeNotNull()}class oa extends KT{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XN.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="pendingRedirect",yh=new Map;class WN extends KT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const s=await ZN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZN(i,e){const t=tx(e),s=ex(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function JN(i,e){yh.set(i._key(),e)}function ex(i){return ur(i._redirectPersistence)}function tx(i){return gh($N,i.config.apiKey,i.name)}async function nx(i,e,t=!1){if(yn(i.app))return Promise.reject(cr(i));const s=Ts(i),o=GT(s,e),h=await new WN(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=10*60*1e3;class rx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!QT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ix&&this.cachedEventUids.clear(),this.cachedEventUids.has(DE(e))}saveEventToCache(e){this.cachedEventUids.add(DE(e)),this.lastProcessedEventTime=Date.now()}}function DE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function QT({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sx(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(i,e={}){return _r(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lx=/^https?/;async function ux(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ax(i);for(const t of e)try{if(cx(t))return}catch{}Gn(i,"unauthorized-domain")}function cx(i){const e=Qm(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!lx.test(t))return!1;if(ox.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Su(3e4,6e4);function OE(){const i=bi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function fx(i){return new Promise((e,t)=>{var s,o,u;function h(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),t(ii(i,"network-request-failed"))},timeout:hx.get()})}if(!((o=(s=bi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=bi().gapi)===null||u===void 0)&&u.load)h();else{const d=nN("iframefcb");return bi()[d]=()=>{gapi.load?h():t(ii(i,"network-request-failed"))},DT(`${tN()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw _h=null,e})}let _h=null;function dx(i){return _h=_h||fx(i),_h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Su(5e3,15e3),px="__/auth/iframe",gx="emulator/auth/iframe",yx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_x=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vx(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Rp(e,gx):`https://${i.config.authDomain}/${px}`,s={apiKey:e.apiKey,appName:i.name,v:_a},o=_x.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${wu(s).slice(1)}`}async function Ex(i){const e=await dx(i),t=bi().gapi;return be(t,i,"internal-error"),e.open({where:document.body,url:vx(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yx,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=ii(i,"network-request-failed"),d=bi().setTimeout(()=>{u(h)},mx.get());function p(){bi().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tx=500,wx=600,Sx="_blank",bx="http://localhost";class kE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rx(i,e,t,s=Tx,o=wx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Ax),{width:s.toString(),height:o.toString(),top:u,left:h}),g=rn().toLowerCase();t&&(d=ST(g)?Sx:t),TT(g)&&(e=e||bx,p.scrollbars="yes");const A=Object.entries(p).reduce((C,[D,k])=>`${C}${D}=${k},`,"");if(KI(g)&&d!=="_self")return Cx(e||"",d),new kE(null);const T=window.open(e||"",d,A);be(T,i,"popup-blocked");try{T.focus()}catch{}return new kE(T)}function Cx(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="__/auth/handler",Nx="emulator/auth/handler",xx=encodeURIComponent("fac");async function ME(i,e,t,s,o,u){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:_a,eventId:o};if(e instanceof Dp){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",fC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,T]of Object.entries({}))h[A]=T}if(e instanceof Ru){const A=e.getScopes().filter(T=>T!=="");A.length>0&&(h.scopes=A.join(","))}i.tenantId&&(h.tid=i.tenantId);const d=h;for(const A of Object.keys(d))d[A]===void 0&&delete d[A];const p=await i._getAppCheckToken(),g=p?`#${xx}=${encodeURIComponent(p)}`:"";return`${Dx(i)}?${wu(d).slice(1)}${g}`}function Dx({config:i}){return i.emulator?Rp(i,Nx):`https://${i.authDomain}/${Ix}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class Ox{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=nx,this._overrideRedirectResult=JN}async _openPopup(e,t,s,o){var u;mr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await ME(e,t,s,Qm(),o);return Rx(e,h,Op())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await ME(e,t,s,Qm(),o);return UN(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Ex(e),s=new rx(e);return t.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Om,{type:Om},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Om];h!==void 0&&t(!!h),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ux(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NT()||wT()||Ip()}}const kx=Ox;var PE="@firebase/auth",UE="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ux(i){fa(new fs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=s.options;be(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(i)},g=new ZI(s,o,u,p);return lN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),fa(new fs("auth-internal",e=>{const t=Ts(e.getProvider("auth").getImmediate());return(s=>new Mx(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(PE,UE,Px(i)),Si(PE,UE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=5*60,Lx=oT("authIdTokenMaxAge")||Vx;let VE=null;const jx=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Lx)return;const o=t==null?void 0:t.token;VE!==o&&(VE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Bx(i=Tp()){const e=$h(i,"auth");if(e.isInitialized())return e.getImmediate();const t=oN(i,{popupRedirectResolver:kx,persistence:[GN,kN,BT]}),s=oT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=jx(u.toString());IN(t,h,()=>h(t.currentUser)),CN(t,d=>h(d))}}const o=rT("auth");return o&&uN(t,`http://${o}`),t}function zx(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}JI({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ii("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",zx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ux("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="firebasestorage.googleapis.com",XT="storageBucket",qx=2*60*1e3,Hx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt extends xi{constructor(e,t,s=0){super(km(e),`Firebase Storage: ${t} (${km(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return km(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function km(i){return"storage/"+i}function Mp(){const i="An unknown error occurred, please check the error payload for server response.";return new yt(gt.UNKNOWN,i)}function Fx(i){return new yt(gt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function Gx(i){return new yt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kx(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(gt.UNAUTHENTICATED,i)}function Qx(){return new yt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Yx(i){return new yt(gt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function Xx(){return new yt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $x(){return new yt(gt.CANCELED,"User canceled the upload/download.")}function Wx(i){return new yt(gt.INVALID_URL,"Invalid URL '"+i+"'.")}function Zx(i){return new yt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Jx(){return new yt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XT+"' property when initializing the app?")}function e1(){return new yt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function t1(){return new yt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function n1(i){return new yt(gt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wm(i){return new yt(gt.INVALID_ARGUMENT,i)}function $T(){return new yt(gt.APP_DELETED,"The Firebase app was deleted.")}function i1(i){return new yt(gt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ru(i,e){return new yt(gt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Ql(i){throw new yt(gt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Cn.makeFromUrl(e,t)}catch{return new Cn(e,"")}if(s.path==="")return s;throw Zx(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const h="(/(.*))?$",d=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(ie){ie.path_=decodeURIComponent(ie.path)}const A="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",D=new RegExp(`^https?://${T}/${A}/b/${o}/o${C}`,"i"),k={bucket:1,path:3},G=t===YT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",z=new RegExp(`^https?://${G}/${o}/${U}`,"i"),Y=[{regex:d,indices:p,postModify:u},{regex:D,indices:k,postModify:g},{regex:z,indices:{bucket:1,path:2},postModify:g}];for(let ie=0;ie<Y.length;ie++){const re=Y[ie],pe=re.regex.exec(e);if(pe){const M=pe[re.indices.bucket];let R=pe[re.indices.path];R||(R=""),s=new Cn(M,R),re.postModify(s);break}}if(s==null)throw Wx(e);return s}}class r1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(i,e,t){let s=1,o=null,u=null,h=!1,d=0;function p(){return d===2}let g=!1;function A(...U){g||(g=!0,e.apply(null,U))}function T(U){o=setTimeout(()=>{o=null,i(D,p())},U)}function C(){u&&clearTimeout(u)}function D(U,...z){if(g){C();return}if(U){C(),A.call(null,U,...z);return}if(p()||h){C(),A.call(null,U,...z);return}s<64&&(s*=2);let Y;d===1?(d=2,Y=0):Y=(s+Math.random())*1e3,T(Y)}let k=!1;function G(U){k||(k=!0,C(),!g&&(o!==null?(U||(d=2),clearTimeout(o),T(0)):U||(d=1)))}return T(0),u=setTimeout(()=>{h=!0,G(!0)},t),G}function a1(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(i){return i!==void 0}function l1(i){return typeof i=="object"&&!Array.isArray(i)}function Pp(i){return typeof i=="string"||i instanceof String}function LE(i){return Up()&&i instanceof Blob}function Up(){return typeof Blob<"u"}function jE(i,e,t,s){if(s<e)throw Wm(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>t)throw Wm(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(i,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${i}`}function WT(i){const e=encodeURIComponent;let t="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var ua;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(ua||(ua={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(i,e){const t=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t,s,o,u,h,d,p,g,A,T,C=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=A,this.connectionFactory_=T,this.retry=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,k)=>{this.resolve_=D,this.reject_=k,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new rh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const d=u.getErrorCode()===ua.NO_ERROR,p=u.getStatus();if(!d||u1(p,this.additionalRetryCodes_)&&this.retry){const A=u.getErrorCode()===ua.ABORT;s(!1,new rh(!1,null,A));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new rh(g,u))})},t=(s,o)=>{const u=this.resolve_,h=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());o1(p)?u(p):u()}catch(p){h(p)}else if(d!==null){const p=Mp();p.serverResponse=d.getErrorText(),this.errorCallback_?h(this.errorCallback_(d,p)):h(p)}else if(o.canceled){const p=this.appDelete_?$T():$x();h(p)}else{const p=Xx();h(p)}};this.canceled_?t(!1,new rh(!1,null,!0)):this.backoffId_=s1(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function h1(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function f1(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function d1(i,e){e&&(i["X-Firebase-GMPID"]=e)}function m1(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function p1(i,e,t,s,o,u,h=!0){const d=WT(i.urlParams),p=i.url+d,g=Object.assign({},i.headers);return d1(g,e),h1(g,t),f1(g,u),m1(g,s),new c1(p,i.method,g,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function y1(...i){const e=g1();if(e!==void 0){const t=new e;for(let s=0;s<i.length;s++)t.append(i[s]);return t.getBlob()}else{if(Up())return new Blob(i);throw new yt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _1(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(i){if(typeof atob>"u")throw n1("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mm{constructor(e,t){this.data=e,this.contentType=t||null}}function ZT(i,e){switch(i){case ti.RAW:return new Mm(JT(e));case ti.BASE64:case ti.BASE64URL:return new Mm(e0(i,e));case ti.DATA_URL:return new Mm(A1(e),T1(e))}throw Mp()}function JT(i){const e=[];for(let t=0;t<i.length;t++){let s=i.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=s,h=i.charCodeAt(++t);s=65536|(u&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function E1(i){let e;try{e=decodeURIComponent(i)}catch{throw ru(ti.DATA_URL,"Malformed data URL.")}return JT(e)}function e0(i,e){switch(i){case ti.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw ru(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case ti.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw ru(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=v1(e)}catch(o){throw o.message.includes("polyfill")?o:ru(i,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class t0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ru(ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=w1(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function A1(i){const e=new t0(i);return e.base64?e0(ti.BASE64,e.rest):E1(e.rest)}function T1(i){return new t0(i).contentType}function w1(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t){let s=0,o="";LE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(LE(this.data_)){const s=this.data_,o=_1(s,e,t);return o===null?null:new ss(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new ss(s,!0)}}static getBlob(...e){if(Up()){const t=e.map(s=>s instanceof ss?s.data_:s);return new ss(y1.apply(null,t))}else{const t=e.map(h=>Pp(h)?ZT(ti.RAW,h).data:h.data_);let s=0;t.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let u=0;return t.forEach(h=>{for(let d=0;d<h.length;d++)o[u++]=h[d]}),new ss(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(i){let e;try{e=JSON.parse(i)}catch{return null}return l1(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function b1(i,e){const t=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?t:i+"/"+t}function i0(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(i,e){return e}class cn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||R1}}let sh=null;function C1(i){return!Pp(i)||i.length<2?i:i0(i)}function r0(){if(sh)return sh;const i=[];i.push(new cn("bucket")),i.push(new cn("generation")),i.push(new cn("metageneration")),i.push(new cn("name","fullPath",!0));function e(u,h){return C1(h)}const t=new cn("name");t.xform=e,i.push(t);function s(u,h){return h!==void 0?Number(h):h}const o=new cn("size");return o.xform=s,i.push(o),i.push(new cn("timeCreated")),i.push(new cn("updated")),i.push(new cn("md5Hash",null,!0)),i.push(new cn("cacheControl",null,!0)),i.push(new cn("contentDisposition",null,!0)),i.push(new cn("contentEncoding",null,!0)),i.push(new cn("contentLanguage",null,!0)),i.push(new cn("contentType",null,!0)),i.push(new cn("metadata","customMetadata",!0)),sh=i,sh}function I1(i,e){function t(){const s=i.bucket,o=i.fullPath,u=new Cn(s,o);return e._makeStorageReference(u)}Object.defineProperty(i,"ref",{get:t})}function N1(i,e,t){const s={};s.type="file";const o=t.length;for(let u=0;u<o;u++){const h=t[u];s[h.local]=h.xform(s,e[h.server])}return I1(s,i),s}function s0(i,e,t){const s=n0(e);return s===null?null:N1(i,s,t)}function x1(i,e,t,s){const o=n0(e);if(o===null||!Pp(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(g=>{const A=i.bucket,T=i.fullPath,C="/b/"+h(A)+"/o/"+h(T),D=Vp(C,t,s),k=WT({alt:"media",token:g});return D+k})[0]}function D1(i,e){const t={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(t[u.server]=i[u.local])}return JSON.stringify(t)}class a0{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(i){if(!i)throw Mp()}function O1(i,e){function t(s,o){const u=s0(i,o,e);return o0(u!==null),u}return t}function k1(i,e){function t(s,o){const u=s0(i,o,e);return o0(u!==null),x1(u,o,i.host,i._protocol)}return t}function l0(i){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=Qx():o=Kx():t.getStatus()===402?o=Gx(i.bucket):t.getStatus()===403?o=Yx(i.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function M1(i){const e=l0(i);function t(s,o){let u=e(s,o);return s.getStatus()===404&&(u=Fx(i.path)),u.serverResponse=o.serverResponse,u}return t}function P1(i,e,t){const s=e.fullServerUrl(),o=Vp(s,i.host,i._protocol),u="GET",h=i.maxOperationRetryTime,d=new a0(o,u,k1(i,t),h);return d.errorHandler=M1(e),d}function U1(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function V1(i,e,t){const s=Object.assign({},t);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=U1(null,e)),s}function L1(i,e,t,s,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function d(){let Y="";for(let ie=0;ie<2;ie++)Y=Y+Math.random().toString().slice(2);return Y}const p=d();h["Content-Type"]="multipart/related; boundary="+p;const g=V1(e,s,o),A=D1(g,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+A+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,C=`\r
--`+p+"--",D=ss.getBlob(T,s,C);if(D===null)throw e1();const k={name:g.fullPath},G=Vp(u,i.host,i._protocol),U="POST",z=i.maxUploadRetryTime,H=new a0(G,U,O1(i,t),z);return H.urlParams=k,H.headers=h,H.body=D.uploadData(),H.errorHandler=l0(e),H}class j1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o){if(this.sent_)throw Ql("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class B1 extends j1{initXhr(){this.xhr_.responseType="text"}}function u0(){return new B1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t){this._service=e,t instanceof Cn?this._location=t:this._location=Cn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pa(e,t)}get root(){const e=new Cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i0(this._location.path)}get storage(){return this._service}get parent(){const e=S1(this._location.path);if(e===null)return null;const t=new Cn(this._location.bucket,e);return new pa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw i1(e)}}function c0(i,e,t){i._throwIfRoot("uploadBytes");const s=L1(i.storage,i._location,r0(),new ss(e,!0),t);return i.storage.makeRequestWithTokens(s,u0).then(o=>({metadata:o,ref:i}))}function z1(i,e,t=ti.RAW,s){i._throwIfRoot("uploadString");const o=ZT(t,e),u=Object.assign({},s);return u.contentType==null&&o.contentType!=null&&(u.contentType=o.contentType),c0(i,o.data,u)}function q1(i){i._throwIfRoot("getDownloadURL");const e=P1(i.storage,i._location,r0());return i.storage.makeRequestWithTokens(e,u0).then(t=>{if(t===null)throw t1();return t})}function H1(i,e){const t=b1(i._location.path,e),s=new Cn(i._location.bucket,t);return new pa(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(i){return/^[A-Za-z]+:\/\//.test(i)}function G1(i,e){return new pa(i,e)}function h0(i,e){if(i instanceof Lp){const t=i;if(t._bucket==null)throw Jx();const s=new pa(t,t._bucket);return e!=null?h0(s,e):s}else return e!==void 0?H1(i,e):i}function K1(i,e){if(e&&F1(e)){if(i instanceof Lp)return G1(i,e);throw Wm("To use ref(service, url), the first argument must be a Storage instance.")}else return h0(i,e)}function BE(i,e){const t=e==null?void 0:e[XT];return t==null?null:Cn.makeFromBucketSpec(t,i)}function Q1(i,e,t,s={}){i.host=`${e}:${t}`,i._protocol="http";const{mockUserToken:o}=s;o&&(i._overrideAuthToken=typeof o=="string"?o:lT(o,i.app.options.projectId))}class Lp{constructor(e,t,s,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=YT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qx,this._maxUploadRetryTime=Hx,this._requests=new Set,o!=null?this._bucket=Cn.makeFromBucketSpec(o,this._host):this._bucket=BE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cn.makeFromBucketSpec(this._url,e):this._bucket=BE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pa(this,e)}_makeRequest(e,t,s,o,u=!0){if(this._deleted)return new r1($T());{const h=p1(e,this._appId,s,o,t,this._firebaseVersion,u);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const zE="@firebase/storage",qE="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="storage";function d0(i,e,t){return i=At(i),c0(i,e,t)}function Y1(i,e,t,s){return i=At(i),z1(i,e,t,s)}function jp(i){return i=At(i),q1(i)}function Bp(i,e){return i=At(i),K1(i,e)}function X1(i=Tp(),e){i=At(i);const s=$h(i,f0).getImmediate({identifier:e}),o=sT("storage");return o&&$1(s,...o),s}function $1(i,e,t,s={}){Q1(i,e,t,s)}function W1(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new Lp(t,s,o,e,_a)}function Z1(){fa(new fs(f0,W1,"PUBLIC").setMultipleInstances(!0)),Si(zE,qE,""),Si(zE,qE,"esm2017")}Z1();var HE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,m0;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function b(){}b.prototype=R.prototype,M.D=R.prototype,M.prototype=new b,M.prototype.constructor=M,M.C=function(I,O,j){for(var N=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)N[Be-2]=arguments[Be];return R.prototype[O].apply(I,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,R,b){b||(b=0);var I=Array(16);if(typeof R=="string")for(var O=0;16>O;++O)I[O]=R.charCodeAt(b++)|R.charCodeAt(b++)<<8|R.charCodeAt(b++)<<16|R.charCodeAt(b++)<<24;else for(O=0;16>O;++O)I[O]=R[b++]|R[b++]<<8|R[b++]<<16|R[b++]<<24;R=M.g[0],b=M.g[1],O=M.g[2];var j=M.g[3],N=R+(j^b&(O^j))+I[0]+3614090360&4294967295;R=b+(N<<7&4294967295|N>>>25),N=j+(O^R&(b^O))+I[1]+3905402710&4294967295,j=R+(N<<12&4294967295|N>>>20),N=O+(b^j&(R^b))+I[2]+606105819&4294967295,O=j+(N<<17&4294967295|N>>>15),N=b+(R^O&(j^R))+I[3]+3250441966&4294967295,b=O+(N<<22&4294967295|N>>>10),N=R+(j^b&(O^j))+I[4]+4118548399&4294967295,R=b+(N<<7&4294967295|N>>>25),N=j+(O^R&(b^O))+I[5]+1200080426&4294967295,j=R+(N<<12&4294967295|N>>>20),N=O+(b^j&(R^b))+I[6]+2821735955&4294967295,O=j+(N<<17&4294967295|N>>>15),N=b+(R^O&(j^R))+I[7]+4249261313&4294967295,b=O+(N<<22&4294967295|N>>>10),N=R+(j^b&(O^j))+I[8]+1770035416&4294967295,R=b+(N<<7&4294967295|N>>>25),N=j+(O^R&(b^O))+I[9]+2336552879&4294967295,j=R+(N<<12&4294967295|N>>>20),N=O+(b^j&(R^b))+I[10]+4294925233&4294967295,O=j+(N<<17&4294967295|N>>>15),N=b+(R^O&(j^R))+I[11]+2304563134&4294967295,b=O+(N<<22&4294967295|N>>>10),N=R+(j^b&(O^j))+I[12]+1804603682&4294967295,R=b+(N<<7&4294967295|N>>>25),N=j+(O^R&(b^O))+I[13]+4254626195&4294967295,j=R+(N<<12&4294967295|N>>>20),N=O+(b^j&(R^b))+I[14]+2792965006&4294967295,O=j+(N<<17&4294967295|N>>>15),N=b+(R^O&(j^R))+I[15]+1236535329&4294967295,b=O+(N<<22&4294967295|N>>>10),N=R+(O^j&(b^O))+I[1]+4129170786&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^O&(R^b))+I[6]+3225465664&4294967295,j=R+(N<<9&4294967295|N>>>23),N=O+(R^b&(j^R))+I[11]+643717713&4294967295,O=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(O^j))+I[0]+3921069994&4294967295,b=O+(N<<20&4294967295|N>>>12),N=R+(O^j&(b^O))+I[5]+3593408605&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^O&(R^b))+I[10]+38016083&4294967295,j=R+(N<<9&4294967295|N>>>23),N=O+(R^b&(j^R))+I[15]+3634488961&4294967295,O=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(O^j))+I[4]+3889429448&4294967295,b=O+(N<<20&4294967295|N>>>12),N=R+(O^j&(b^O))+I[9]+568446438&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^O&(R^b))+I[14]+3275163606&4294967295,j=R+(N<<9&4294967295|N>>>23),N=O+(R^b&(j^R))+I[3]+4107603335&4294967295,O=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(O^j))+I[8]+1163531501&4294967295,b=O+(N<<20&4294967295|N>>>12),N=R+(O^j&(b^O))+I[13]+2850285829&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^O&(R^b))+I[2]+4243563512&4294967295,j=R+(N<<9&4294967295|N>>>23),N=O+(R^b&(j^R))+I[7]+1735328473&4294967295,O=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(O^j))+I[12]+2368359562&4294967295,b=O+(N<<20&4294967295|N>>>12),N=R+(b^O^j)+I[5]+4294588738&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^O)+I[8]+2272392833&4294967295,j=R+(N<<11&4294967295|N>>>21),N=O+(j^R^b)+I[11]+1839030562&4294967295,O=j+(N<<16&4294967295|N>>>16),N=b+(O^j^R)+I[14]+4259657740&4294967295,b=O+(N<<23&4294967295|N>>>9),N=R+(b^O^j)+I[1]+2763975236&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^O)+I[4]+1272893353&4294967295,j=R+(N<<11&4294967295|N>>>21),N=O+(j^R^b)+I[7]+4139469664&4294967295,O=j+(N<<16&4294967295|N>>>16),N=b+(O^j^R)+I[10]+3200236656&4294967295,b=O+(N<<23&4294967295|N>>>9),N=R+(b^O^j)+I[13]+681279174&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^O)+I[0]+3936430074&4294967295,j=R+(N<<11&4294967295|N>>>21),N=O+(j^R^b)+I[3]+3572445317&4294967295,O=j+(N<<16&4294967295|N>>>16),N=b+(O^j^R)+I[6]+76029189&4294967295,b=O+(N<<23&4294967295|N>>>9),N=R+(b^O^j)+I[9]+3654602809&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^O)+I[12]+3873151461&4294967295,j=R+(N<<11&4294967295|N>>>21),N=O+(j^R^b)+I[15]+530742520&4294967295,O=j+(N<<16&4294967295|N>>>16),N=b+(O^j^R)+I[2]+3299628645&4294967295,b=O+(N<<23&4294967295|N>>>9),N=R+(O^(b|~j))+I[0]+4096336452&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~O))+I[7]+1126891415&4294967295,j=R+(N<<10&4294967295|N>>>22),N=O+(R^(j|~b))+I[14]+2878612391&4294967295,O=j+(N<<15&4294967295|N>>>17),N=b+(j^(O|~R))+I[5]+4237533241&4294967295,b=O+(N<<21&4294967295|N>>>11),N=R+(O^(b|~j))+I[12]+1700485571&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~O))+I[3]+2399980690&4294967295,j=R+(N<<10&4294967295|N>>>22),N=O+(R^(j|~b))+I[10]+4293915773&4294967295,O=j+(N<<15&4294967295|N>>>17),N=b+(j^(O|~R))+I[1]+2240044497&4294967295,b=O+(N<<21&4294967295|N>>>11),N=R+(O^(b|~j))+I[8]+1873313359&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~O))+I[15]+4264355552&4294967295,j=R+(N<<10&4294967295|N>>>22),N=O+(R^(j|~b))+I[6]+2734768916&4294967295,O=j+(N<<15&4294967295|N>>>17),N=b+(j^(O|~R))+I[13]+1309151649&4294967295,b=O+(N<<21&4294967295|N>>>11),N=R+(O^(b|~j))+I[4]+4149444226&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~O))+I[11]+3174756917&4294967295,j=R+(N<<10&4294967295|N>>>22),N=O+(R^(j|~b))+I[2]+718787259&4294967295,O=j+(N<<15&4294967295|N>>>17),N=b+(j^(O|~R))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+j&4294967295}s.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var b=R-this.blockSize,I=this.B,O=this.h,j=0;j<R;){if(O==0)for(;j<=b;)o(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<R;)if(I[O++]=M.charCodeAt(j++),O==this.blockSize){o(this,I),O=0;break}}else for(;j<R;)if(I[O++]=M[j++],O==this.blockSize){o(this,I),O=0;break}}this.h=O,this.o+=R},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var b=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=b&255,b/=256;for(this.u(M),M=Array(16),R=b=0;4>R;++R)for(var I=0;32>I;I+=8)M[b++]=this.g[R]>>>I&255;return M};function u(M,R){var b=d;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=R(M)}function h(M,R){this.h=R;for(var b=[],I=!0,O=M.length-1;0<=O;O--){var j=M[O]|0;I&&j==R||(b[O]=j,I=!1)}this.g=b}var d={};function p(M){return-128<=M&&128>M?u(M,function(R){return new h([R|0],0>R?-1:0)}):new h([M|0],0>M?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return T;if(0>M)return U(g(-M));for(var R=[],b=1,I=0;M>=b;I++)R[I]=M/b|0,b*=4294967296;return new h(R,0)}function A(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return U(A(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(R,8)),I=T,O=0;O<M.length;O+=8){var j=Math.min(8,M.length-O),N=parseInt(M.substring(O,O+j),R);8>j?(j=g(Math.pow(R,j)),I=I.j(j).add(g(N))):(I=I.j(b),I=I.add(g(N)))}return I}var T=p(0),C=p(1),D=p(16777216);i=h.prototype,i.m=function(){if(G(this))return-U(this).m();for(var M=0,R=1,b=0;b<this.g.length;b++){var I=this.i(b);M+=(0<=I?I:4294967296+I)*R,R*=4294967296}return M},i.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(G(this))return"-"+U(this).toString(M);for(var R=g(Math.pow(M,6)),b=this,I="";;){var O=ie(b,R).g;b=z(b,O.j(R));var j=((0<b.g.length?b.g[0]:b.h)>>>0).toString(M);if(b=O,k(b))return j+I;for(;6>j.length;)j="0"+j;I=j+I}},i.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function G(M){return M.h==-1}i.l=function(M){return M=z(this,M),G(M)?-1:k(M)?0:1};function U(M){for(var R=M.g.length,b=[],I=0;I<R;I++)b[I]=~M.g[I];return new h(b,~M.h).add(C)}i.abs=function(){return G(this)?U(this):this},i.add=function(M){for(var R=Math.max(this.g.length,M.g.length),b=[],I=0,O=0;O<=R;O++){var j=I+(this.i(O)&65535)+(M.i(O)&65535),N=(j>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);I=N>>>16,j&=65535,N&=65535,b[O]=N<<16|j}return new h(b,b[b.length-1]&-2147483648?-1:0)};function z(M,R){return M.add(U(R))}i.j=function(M){if(k(this)||k(M))return T;if(G(this))return G(M)?U(this).j(U(M)):U(U(this).j(M));if(G(M))return U(this.j(U(M)));if(0>this.l(D)&&0>M.l(D))return g(this.m()*M.m());for(var R=this.g.length+M.g.length,b=[],I=0;I<2*R;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var O=0;O<M.g.length;O++){var j=this.i(I)>>>16,N=this.i(I)&65535,Be=M.i(O)>>>16,et=M.i(O)&65535;b[2*I+2*O]+=N*et,H(b,2*I+2*O),b[2*I+2*O+1]+=j*et,H(b,2*I+2*O+1),b[2*I+2*O+1]+=N*Be,H(b,2*I+2*O+1),b[2*I+2*O+2]+=j*Be,H(b,2*I+2*O+2)}for(I=0;I<R;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=R;I<2*R;I++)b[I]=0;return new h(b,0)};function H(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function Y(M,R){this.g=M,this.h=R}function ie(M,R){if(k(R))throw Error("division by zero");if(k(M))return new Y(T,T);if(G(M))return R=ie(U(M),R),new Y(U(R.g),U(R.h));if(G(R))return R=ie(M,U(R)),new Y(U(R.g),R.h);if(30<M.g.length){if(G(M)||G(R))throw Error("slowDivide_ only works with positive integers.");for(var b=C,I=R;0>=I.l(M);)b=re(b),I=re(I);var O=pe(b,1),j=pe(I,1);for(I=pe(I,2),b=pe(b,2);!k(I);){var N=j.add(I);0>=N.l(M)&&(O=O.add(b),j=N),I=pe(I,1),b=pe(b,1)}return R=z(M,O.j(R)),new Y(O,R)}for(O=T;0<=M.l(R);){for(b=Math.max(1,Math.floor(M.m()/R.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),j=g(b),N=j.j(R);G(N)||0<N.l(M);)b-=I,j=g(b),N=j.j(R);k(j)&&(j=C),O=O.add(j),M=z(M,N)}return new Y(O,M)}i.A=function(M){return ie(this,M).h},i.and=function(M){for(var R=Math.max(this.g.length,M.g.length),b=[],I=0;I<R;I++)b[I]=this.i(I)&M.i(I);return new h(b,this.h&M.h)},i.or=function(M){for(var R=Math.max(this.g.length,M.g.length),b=[],I=0;I<R;I++)b[I]=this.i(I)|M.i(I);return new h(b,this.h|M.h)},i.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),b=[],I=0;I<R;I++)b[I]=this.i(I)^M.i(I);return new h(b,this.h^M.h)};function re(M){for(var R=M.g.length+1,b=[],I=0;I<R;I++)b[I]=M.i(I)<<1|M.i(I-1)>>>31;return new h(b,M.h)}function pe(M,R){var b=R>>5;R%=32;for(var I=M.g.length-b,O=[],j=0;j<I;j++)O[j]=0<R?M.i(j+b)>>>R|M.i(j+b+1)<<32-R:M.i(j+b);return new h(O,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,m0=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=A,cs=h}).apply(typeof HE<"u"?HE:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p0,Zl,g0,vh,Zm,y0,_0,v0;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var F=c[S];if(!(F in _))break e;_=_[F]}c=c[c.length-1],S=_[c],y=y(S),y!=S&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,S=!1,F={next:function(){if(!S&&_<c.length){var X=_++;return{value:y(X,c[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function A(c,y,_){return c.call.apply(c.bind,arguments)}function T(c,y,_){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),c.apply(y,F)}}return function(){return c.apply(y,arguments)}}function C(c,y,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:T,C.apply(null,arguments)}function D(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function k(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(S,F,X){for(var se=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)se[qe-2]=arguments[qe];return y.prototype[F].apply(S,se)}}function G(c){const y=c.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=c[S];return _}return[]}function U(c,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const F=c.length||0,X=S.length||0;c.length=F+X;for(let se=0;se<X;se++)c[F+se]=S[se]}else c.push(S)}}class z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var re=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function pe(c,y,_){for(const S in c)y.call(_,c[S],S,c)}function M(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function R(c){const y={};for(const _ in c)y[_]=c[_];return y}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,y){let _,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(_ in S)c[_]=S[_];for(let X=0;X<b.length;X++)_=b[X],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function O(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function j(c){d.setTimeout(()=>{throw c},0)}function N(){var c=ge;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Be{constructor(){this.h=this.g=null}add(y,_){const S=et.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var et=new z(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,ve=!1,ge=new Be,P=()=>{const c=d.Promise.resolve(void 0);_e=()=>{c.then(te)}};var te=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){j(_)}var y=et;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ve=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return c}();function ue(c,y){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(re){e:{try{ie(y.nodeName);var F=!0;break e}catch{}F=!1}F||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ue.aa.h.call(this)}}k(ue,oe);var fe={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function de(c,y,_,S,F){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=F,this.key=++Ue,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function De(c){this.src=c,this.g={},this.h=0}De.prototype.add=function(c,y,_,S,F){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var se=ze(c,y,S,F);return-1<se?(y=c[se],_||(y.fa=!1)):(y=new de(y,this.src,X,!!S,F),y.fa=_,c.push(y)),y};function Xe(c,y){var _=y.type;if(_ in c.g){var S=c.g[_],F=Array.prototype.indexOf.call(S,y,void 0),X;(X=0<=F)&&Array.prototype.splice.call(S,F,1),X&&(me(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ze(c,y,_,S){for(var F=0;F<c.length;++F){var X=c[F];if(!X.da&&X.listener==y&&X.capture==!!_&&X.ha==S)return F}return-1}var Kn="closure_lm_"+(1e6*Math.random()|0),Qn={};function vn(c,y,_,S,F){if(Array.isArray(y)){for(var X=0;X<y.length;X++)vn(c,y[X],_,S,F);return null}return _=Uu(_),c&&c[rt]?c.K(y,_,g(S)?!!S.capture:!1,F):Oi(c,y,_,!1,S,F)}function Oi(c,y,_,S,F,X){if(!y)throw Error("Invalid event type");var se=g(F)?!!F.capture:!!F,qe=zo(c);if(qe||(c[Kn]=qe=new De(c)),_=qe.add(y,_,S,se,X),_.proxy)return _;if(S=Rs(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)le||(F=se),F===void 0&&(F=!1),c.addEventListener(y.toString(),S,F);else if(c.attachEvent)c.attachEvent(Yn(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Rs(){function c(_){return y.call(c.src,c.listener,_)}const y=Cs;return c}function ki(c,y,_,S,F){if(Array.isArray(y))for(var X=0;X<y.length;X++)ki(c,y[X],_,S,F);else S=g(S)?!!S.capture:!!S,_=Uu(_),c&&c[rt]?(c=c.i,y=String(y).toString(),y in c.g&&(X=c.g[y],_=ze(X,_,S,F),-1<_&&(me(X[_]),Array.prototype.splice.call(X,_,1),X.length==0&&(delete c.g[y],c.h--)))):c&&(c=zo(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ze(y,_,S,F)),(_=-1<c?y[c]:null)&&ht(_))}function ht(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[rt])Xe(y.i,c);else{var _=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(_,S,c.capture):y.detachEvent?y.detachEvent(Yn(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=zo(y))?(Xe(_,c),_.h==0&&(_.src=null,y[Kn]=null)):me(c)}}}function Yn(c){return c in Qn?Qn[c]:Qn[c]="on"+c}function Cs(c,y){if(c.da)c=!0;else{y=new ue(y,this);var _=c.listener,S=c.ha||c.src;c.fa&&ht(c),c=_.call(S,y)}return c}function zo(c){return c=c[Kn],c instanceof De?c:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uu(c){return typeof c=="function"?c:(c[hn]||(c[hn]=function(y){return c.handleEvent(y)}),c[hn])}function Ct(){Ee.call(this),this.i=new De(this),this.M=this,this.F=null}k(Ct,Ee),Ct.prototype[rt]=!0,Ct.prototype.removeEventListener=function(c,y,_,S){ki(this,c,y,_,S)};function Pt(c,y){var _,S=c.F;if(S)for(_=[];S;S=S.F)_.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new oe(y,c);else if(y instanceof oe)y.target=y.target||c;else{var F=y;y=new oe(S,c),I(y,F)}if(F=!0,_)for(var X=_.length-1;0<=X;X--){var se=y.g=_[X];F=Mi(se,S,!0,y)&&F}if(se=y.g=c,F=Mi(se,S,!0,y)&&F,F=Mi(se,S,!1,y)&&F,_)for(X=0;X<_.length;X++)se=y.g=_[X],F=Mi(se,S,!1,y)&&F}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],S=0;S<_.length;S++)me(_[S]);delete c.g[y],c.h--}}this.F=null},Ct.prototype.K=function(c,y,_,S){return this.i.add(String(c),y,!1,_,S)},Ct.prototype.L=function(c,y,_,S){return this.i.add(String(c),y,!0,_,S)};function Mi(c,y,_,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var F=!0,X=0;X<y.length;++X){var se=y[X];if(se&&!se.da&&se.capture==_){var qe=se.listener,Nt=se.ha||se.src;se.fa&&Xe(c.i,se),F=qe.call(Nt,S)!==!1&&F}}return F&&!S.defaultPrevented}function Vu(c,y,_){if(typeof c=="function")_&&(c=C(c,_));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(c,y||0)}function qo(c){c.g=Vu(()=>{c.g=null,c.i&&(c.i=!1,qo(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class wf extends Ee{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:qo(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(c){Ee.call(this),this.h=c,this.g={}}k(Is,Ee);var Er=[];function $t(c){pe(c.g,function(y,_){this.g.hasOwnProperty(_)&&ht(y)},c),c.g={}}Is.prototype.N=function(){Is.aa.N.call(this),$t(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=d.JSON.stringify,oi=d.JSON.parse,sn=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Fo(){}Fo.prototype.h=null;function Lu(c){return c.h||(c.h=c.i())}function ju(){}var li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ar(){oe.call(this,"d")}k(Ar,oe);function Xn(){oe.call(this,"c")}k(Xn,oe);var In={},Tr=null;function Sa(){return Tr=Tr||new Ct}In.La="serverreachability";function Go(c){oe.call(this,In.La,c)}k(Go,oe);function wr(c){const y=Sa();Pt(y,new Go(y))}In.STAT_EVENT="statevent";function ba(c,y){oe.call(this,In.STAT_EVENT,c),this.stat=y}k(ba,oe);function _t(c){const y=Sa();Pt(y,new ba(y,c))}In.Ma="timingevent";function Bu(c,y){oe.call(this,In.Ma,c),this.size=y}k(Bu,oe);function Sr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function br(){this.g=!0}br.prototype.xa=function(){this.g=!1};function zu(c,y,_,S,F,X){c.info(function(){if(c.g)if(X)for(var se="",qe=X.split("&"),Nt=0;Nt<qe.length;Nt++){var He=qe[Nt].split("=");if(1<He.length){var Lt=He[0];He=He[1];var xt=Lt.split("_");se=2<=xt.length&&xt[1]=="type"?se+(Lt+"="+He+"&"):se+(Lt+"=redacted&")}}else se=null;else se=X;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+y+`
`+_+`
`+se})}function qu(c,y,_,S,F,X,se){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+y+`
`+_+`
`+X+" "+se})}function Rr(c,y,_,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ut(c,_)+(S?" "+S:"")})}function ui(c,y){c.info(function(){return"TIMEOUT: "+y})}br.prototype.info=function(){};function Ut(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var S=_[c];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var se=1;se<F.length;se++)F[se]=""}}}}return Ho(_)}catch{return y}}var It={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ns;function Ra(){}k(Ra,Fo),Ra.prototype.g=function(){return new XMLHttpRequest},Ra.prototype.i=function(){return{}},Ns=new Ra;function ci(c,y,_,S){this.j=c,this.i=y,this.l=_,this.R=S||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ko}function Ko(){this.i=null,this.g="",this.h=!1}var Cr={},xs={};function $n(c,y,_){c.L=1,c.v=ks(ft(y)),c.m=_,c.P=!0,Ui(c,null)}function Ui(c,y){c.F=Date.now(),ot(c),c.A=ft(c.v);var _=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),ji(_.i,"t",S),c.C=0,_=c.j.J,c.h=new Ko,c.g=nc(c.j,_?y:null,!c.m),0<c.O&&(c.M=new wf(C(c.Y,c,c.g),c.O)),y=c.U,_=c.g,S=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(Er[0]=F.toString()),F=Er);for(var X=0;X<F.length;X++){var se=vn(_,F[X],S||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),wr(),zu(c.i,c.u,c.A,c.l,c.R,c.m)}ci.prototype.ca=function(c){c=c.target;const y=this.M;y&&kn(c)==3?y.j():this.Y(c)},ci.prototype.Y=function(c){try{if(c==this.g)e:{const xt=kn(this.g);var y=this.g.Ba();const Hi=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||xt!=4||y==7||(y==8||0>=Hi?wr(3):wr(2)),Ca(this);var _=this.g.Z();this.X=_;t:if(Ir(this)){var S=Yu(this.g);c="";var F=S.length,X=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),En(this);var se="";break t}this.h.i=new d.TextDecoder}for(y=0;y<F;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(X&&y==F-1)});S.length=0,this.h.g+=c,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=_==200,qu(this.i,this.u,this.A,this.l,this.R,xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Nt=this.g;if((qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(qe)){var He=qe;break t}}He=null}if(_=He)Rr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,An(this,_);else{this.o=!1,this.s=3,_t(12),fn(this),En(this);break e}}if(this.P){_=!0;let Ht;for(;!this.J&&this.C<se.length;)if(Ht=Nr(this,se),Ht==xs){xt==4&&(this.s=4,_t(14),_=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Cr){this.s=4,_t(15),Rr(this.i,this.l,se,"[Invalid Chunk]"),_=!1;break}else Rr(this.i,this.l,Ht,null),An(this,Ht);if(Ir(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||se.length!=0||this.h.h||(this.s=1,_t(16),_=!1),this.o=this.o&&_,!_)Rr(this.i,this.l,se,"[Invalid Chunked Response]"),fn(this),En(this);else if(0<se.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Bs(Lt),Lt.M=!0,_t(11))}}else Rr(this.i,this.l,se,null),An(this,se);xt==4&&fn(this),this.o&&!this.J&&(xt==4?Ju(this.j,this):(this.o=!1,ot(this)))}else Nf(this.g),_==400&&0<se.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),fn(this),En(this)}}}catch{}finally{}};function Ir(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Nr(c,y){var _=c.C,S=y.indexOf(`
`,_);return S==-1?xs:(_=Number(y.substring(_,S)),isNaN(_)?Cr:(S+=1,S+_>y.length?xs:(y=y.slice(S,S+_),c.C=S+_,y)))}ci.prototype.cancel=function(){this.J=!0,fn(this)};function ot(c){c.S=Date.now()+c.I,Qo(c,c.I)}function Qo(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Sr(C(c.ba,c),y)}function Ca(c){c.B&&(d.clearTimeout(c.B),c.B=null)}ci.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ui(this.i,this.A),this.L!=2&&(wr(),_t(17)),fn(this),this.s=2,En(this)):Qo(this,this.S-c)};function En(c){c.j.G==0||c.J||Ju(c.j,c)}function fn(c){Ca(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,$t(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function An(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||xr(_.h,c))){if(!c.K&&xr(_.h,c)&&_.G==3){try{var S=_.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Va(_),Pa(_);else break e;rl(_),_t(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Sr(C(_.Za,_),6e3));if(1>=Hu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else qi(_,11)}else if((c.K||_.g==c)&&Va(_),!H(y))for(F=_.Da.g.parse(y),y=0;y<F.length;y++){let He=F[y];if(_.T=He[0],He=He[1],_.G==2)if(He[0]=="c"){_.K=He[1],_.ia=He[2];const Lt=He[3];Lt!=null&&(_.la=Lt,_.j.info("VER="+_.la));const xt=He[4];xt!=null&&(_.Aa=xt,_.j.info("SVER="+_.Aa));const Hi=He[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(S=1.5*Hi,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Ht=c.g;if(Ht){const yi=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var X=S.h;X.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Dr(X,X.h),X.h=null))}if(S.D){const al=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(S.ya=al,Ke(S.I,S.D,al))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var se=c;if(S.qa=tc(S,S.J?S.ia:null,S.W),se.K){Nn(S.h,se);var qe=se,Nt=S.L;Nt&&(qe.I=Nt),qe.B&&(Ca(qe),ot(qe)),S.g=se}else Wu(S);0<_.i.length&&Ua(_)}else He[0]!="stop"&&He[0]!="close"||qi(_,7);else _.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?qi(_,7):nl(_):He[0]!="noop"&&_.l&&_.l.ta(He),_.v=0)}}wr(4)}catch{}}var Sf=class{constructor(c,y){this.g=c,this.map=y}};function Yo(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Hu(c){return c.h?1:c.g?c.g.size:0}function xr(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Dr(c,y){c.g?c.g.add(y):c.h=y}function Nn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Yo.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function an(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return G(c.i)}function Fu(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,S=0;S<_;S++)y.push(c[S]);return y}y=[],_=0;for(S in c)y[_++]=c[S];return y}function bf(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const S in c)y[_++]=S;return y}}}function Ds(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=bf(c),S=Fu(c),F=S.length,X=0;X<F;X++)y.call(void 0,S[X],_&&_[X],c)}var $o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ia(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var S=c[_].indexOf("="),F=null;if(0<=S){var X=c[_].substring(0,S);F=c[_].substring(S+1)}else X=c[_];y(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vi){this.h=c.h,Or(this,c.j),this.o=c.o,this.g=c.g,Os(this,c.s),this.l=c.l;var y=c.i,_=new hi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Na(this,_),this.m=c.m}else c&&(y=String(c).match($o))?(this.h=!1,Or(this,y[1]||"",!0),this.o=kr(y[2]||""),this.g=kr(y[3]||"",!0),Os(this,y[4]),this.l=kr(y[5]||"",!0),Na(this,y[6]||"",!0),this.m=kr(y[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}Vi.prototype.toString=function(){var c=[],y=this.j;y&&c.push(xn(y,Wo,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(xn(y,Wo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(xn(_,_.charAt(0)=="/"?Zo:Gu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",xn(_,If)),c.join("")};function ft(c){return new Vi(c)}function Or(c,y,_){c.j=_?kr(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Os(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Na(c,y,_){y instanceof hi?(c.i=y,Jo(c.i,c.h)):(_||(y=xn(y,Cf)),c.i=new hi(y,c.h))}function Ke(c,y,_){c.i.set(y,_)}function ks(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function kr(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xn(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Rf),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Rf(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wo=/[#\/\?@]/g,Gu=/[#\?:]/g,Zo=/[#\?]/g,Cf=/[#\?@]/g,If=/#/g;function hi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Dn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ia(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=hi.prototype,i.add=function(c,y){Dn(this),this.i=null,c=Bi(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function xa(c,y){Dn(c),y=Bi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Li(c,y){return Dn(c),y=Bi(c,y),c.g.has(y)}i.forEach=function(c,y){Dn(this),this.g.forEach(function(_,S){_.forEach(function(F){c.call(y,F,S,this)},this)},this)},i.na=function(){Dn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const F=c[S];for(let X=0;X<F.length;X++)_.push(y[S])}return _},i.V=function(c){Dn(this);let y=[];if(typeof c=="string")Li(this,c)&&(y=y.concat(this.g.get(Bi(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},i.set=function(c,y){return Dn(this),this.i=null,c=Bi(this,c),Li(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function ji(c,y,_){xa(c,y),0<_.length&&(c.i=null,c.g.set(Bi(c,y),G(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const X=encodeURIComponent(String(S)),se=this.V(S);for(S=0;S<se.length;S++){var F=X;se[S]!==""&&(F+="="+encodeURIComponent(String(se[S]))),c.push(F)}}return this.i=c.join("&")};function Bi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Jo(c,y){y&&!c.j&&(Dn(c),c.i=null,c.g.forEach(function(_,S){var F=S.toLowerCase();S!=F&&(xa(this,S),ji(this,F,_))},c)),c.j=y}function Ku(c,y){const _=new br;if(d.Image){const S=new Image;S.onload=D(On,_,"TestLoadImage: loaded",!0,y,S),S.onerror=D(On,_,"TestLoadImage: error",!1,y,S),S.onabort=D(On,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=D(On,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function Ms(c,y){const _=new br,S=new AbortController,F=setTimeout(()=>{S.abort(),On(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(X=>{clearTimeout(F),X.ok?On(_,"TestPingServer: ok",!0,y):On(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),On(_,"TestPingServer: error",!1,y)})}function On(c,y,_,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(_)}catch{}}function Ps(){this.g=new sn}function fi(c,y,_){const S=_||"";try{Ds(c,function(F,X){let se=F;g(F)&&(se=Ho(F)),y.push(S+X+"="+encodeURIComponent(se))})}catch(F){throw y.push(S+"type="+encodeURIComponent("_badmap")),F}}function Mr(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Mr,Fo),Mr.prototype.g=function(){return new zi(this.l,this.j)},Mr.prototype.i=function(c){return function(){return c}}({});function zi(c,y){Ct.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(zi,Ct),i=zi.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,mi(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;el(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function el(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?di(this):mi(this),this.readyState==3&&el(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,di(this))},i.Qa=function(c){this.g&&(this.response=c,di(this))},i.ga=function(){this.g&&di(this)};function di(c){c.readyState=4,c.l=null,c.j=null,c.v=null,mi(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function mi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function tl(c){let y="";return pe(c,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Vt(c,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=tl(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ke(c,y,_))}function $e(c){Ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k($e,Ct);var Da=/^https?$/i,Us=["POST","PUT"];i=$e.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ns.g(),this.v=this.o?Lu(this.o):Lu(Ns),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(X){Qu(this,X);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)_.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())_.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(X=>X.toLowerCase()=="content-type"),F=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Us,y,void 0))||S||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,se]of _)this.g.setRequestHeader(X,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vs(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Qu(this,X)}};function Qu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Oa(c),pi(c)}function Oa(c){c.A||(c.A=!0,Pt(c,"complete"),Pt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Pt(this,"complete"),Pt(this,"abort"),pi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),$e.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ka(this):this.bb())},i.bb=function(){ka(this)};function ka(c){if(c.h&&typeof h<"u"&&(!c.v[1]||kn(c)!=4||c.Z()!=2)){if(c.u&&kn(c)==4)Vu(c.Ea,0,c);else if(Pt(c,"readystatechange"),kn(c)==4){c.h=!1;try{const se=c.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=se===0){var F=String(c.D).match($o)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),S=!Da.test(F?F.toLowerCase():"")}_=S}if(_)Pt(c,"complete"),Pt(c,"success");else{c.m=6;try{var X=2<kn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",Oa(c)}}finally{pi(c)}}}}function pi(c,y){if(c.g){Vs(c);const _=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Pt(c,"ready");try{_.onreadystatechange=S}catch{}}}function Vs(c){c.I&&(d.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function kn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),oi(y)}};function Yu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nf(c){const y={};c=(c.g&&2<=kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(H(c[S]))continue;var _=O(c[S]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const X=y[F]||[];y[F]=X,X.push(_)}M(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Ma(c){this.Aa=0,this.i=[],this.j=new br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Yo(c&&c.concurrentRequestLimit),this.Da=new Ps,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ma.prototype,i.la=8,i.G=1,i.connect=function(c,y,_,S){_t(0),this.W=c,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=tc(this,null,this.W),Ua(this)};function nl(c){if(Xu(c),c.G==3){var y=c.U++,_=ft(c.I);if(Ke(_,"SID",c.K),Ke(_,"RID",y),Ke(_,"TYPE","terminate"),js(c,_),y=new ci(c,c.j,y),y.L=2,y.v=ks(ft(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.v,_=!0),_||(y.g=nc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ot(y)}ec(c)}function Pa(c){c.g&&(Bs(c),c.g.cancel(),c.g=null)}function Xu(c){Pa(c),c.u&&(d.clearTimeout(c.u),c.u=null),Va(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Ua(c){if(!Xo(c.h)&&!c.s){c.s=!0;var y=c.Ga;_e||P(),ve||(_e(),ve=!0),ge.add(y,c),c.B=0}}function xf(c,y){return Hu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Sr(C(c.Ga,c,y),sl(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new ci(this,this.j,c);let X=this.o;if(this.S&&(X?(X=R(X),I(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=$u(this,F,y),_=ft(this.I),Ke(_,"RID",c),Ke(_,"CVER",22),this.D&&Ke(_,"X-HTTP-Session-Id",this.D),js(this,_),X&&(this.O?y="headers="+encodeURIComponent(String(tl(X)))+"&"+y:this.m&&Vt(_,this.m,X)),Dr(this.h,F),this.Ua&&Ke(_,"TYPE","init"),this.P?(Ke(_,"$req",y),Ke(_,"SID","null"),F.T=!0,$n(F,_,null)):$n(F,_,y),this.G=2}}else this.G==3&&(c?il(this,c):this.i.length==0||Xo(this.h)||il(this))};function il(c,y){var _;y?_=y.l:_=c.U++;const S=ft(c.I);Ke(S,"SID",c.K),Ke(S,"RID",_),Ke(S,"AID",c.T),js(c,S),c.m&&c.o&&Vt(S,c.m,c.o),_=new ci(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=$u(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Dr(c.h,_),$n(_,S,y)}function js(c,y){c.H&&pe(c.H,function(_,S){Ke(y,S,_)}),c.l&&Ds({},function(_,S){Ke(y,S,_)})}function $u(c,y,_){_=Math.min(c.i.length,_);var S=c.l?C(c.l.Na,c.l,c):null;e:{var F=c.i;let X=-1;for(;;){const se=["count="+_];X==-1?0<_?(X=F[0].g,se.push("ofs="+X)):X=0:se.push("ofs="+X);let qe=!0;for(let Nt=0;Nt<_;Nt++){let He=F[Nt].g;const Lt=F[Nt].map;if(He-=X,0>He)X=Math.max(0,F[Nt].g-100),qe=!1;else try{fi(Lt,se,"req"+He+"_")}catch{S&&S(Lt)}}if(qe){S=se.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,S}function Wu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;_e||P(),ve||(_e(),ve=!0),ge.add(y,c),c.v=0}}function rl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Sr(C(c.Fa,c),sl(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Sr(C(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Pa(this),Zu(this))};function Bs(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Zu(c){c.g=new ci(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=ft(c.qa);Ke(y,"RID","rpc"),Ke(y,"SID",c.K),Ke(y,"AID",c.T),Ke(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(y,"TO",c.ja),Ke(y,"TYPE","xmlhttp"),js(c,y),c.m&&c.o&&Vt(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ks(ft(y)),_.m=null,_.P=!0,Ui(_,c)}i.Za=function(){this.C!=null&&(this.C=null,Pa(this),rl(this),_t(19))};function Va(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ju(c,y){var _=null;if(c.g==y){Va(c),Bs(c),c.g=null;var S=2}else if(xr(c.h,y))_=y.D,Nn(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var F=c.B;S=Sa(),Pt(S,new Bu(S,_)),Ua(c)}else Wu(c);else if(F=y.s,F==3||F==0&&0<y.X||!(S==1&&xf(c,y)||S==2&&rl(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),F){case 1:qi(c,5);break;case 4:qi(c,10);break;case 3:qi(c,6);break;default:qi(c,2)}}}function sl(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function qi(c,y){if(c.j.info("Error code "+y),y==2){var _=C(c.fb,c),S=c.Xa;const F=!S;S=new Vi(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Or(S,"https"),ks(S),F?Ku(S.toString(),_):Ms(S.toString(),_)}else _t(2);c.G=0,c.l&&c.l.sa(y),ec(c),Xu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function ec(c){if(c.G=0,c.ka=[],c.l){const y=an(c.h);(y.length!=0||c.i.length!=0)&&(U(c.ka,y),U(c.ka,c.i),c.h.i.length=0,G(c.i),c.i.length=0),c.l.ra()}}function tc(c,y,_){var S=_ instanceof Vi?ft(_):new Vi(_);if(S.g!="")y&&(S.g=y+"."+S.g),Os(S,S.s);else{var F=d.location;S=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;var X=new Vi(null);S&&Or(X,S),y&&(X.g=y),F&&Os(X,F),_&&(X.l=_),S=X}return _=c.D,y=c.ya,_&&y&&Ke(S,_,y),Ke(S,"VER",c.la),js(c,S),S}function nc(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new $e(new Mr({eb:_})):new $e(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}i=ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function La(){}La.prototype.g=function(c,y){return new on(c,y)};function on(c,y){Ct.call(this),this.g=new Ma(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!H(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!H(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new gi(this)}k(on,Ct),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){nl(this.g)},on.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Ho(c),c=_);y.i.push(new Sf(y.Ya++,c)),y.G==3&&Ua(y)},on.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,on.aa.N.call(this)};function rc(c){Ar.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}k(rc,Ar);function sc(){Xn.call(this),this.status=1}k(sc,Xn);function gi(c){this.g=c}k(gi,ic),gi.prototype.ua=function(){Pt(this.g,"a")},gi.prototype.ta=function(c){Pt(this.g,new rc(c))},gi.prototype.sa=function(c){Pt(this.g,new sc)},gi.prototype.ra=function(){Pt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,v0=function(){return new La},_0=function(){return Sa()},y0=In,Zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,vh=It,Pi.COMPLETE="complete",g0=Pi,ju.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Zl=ju,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,p0=$e}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const FE="@firebase/firestore",GE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Ep("@firebase/firestore");function fo(){return ga.logLevel}function ce(i,...e){if(ga.logLevel<=Ve.DEBUG){const t=e.map(zp);ga.debug(`Firestore (${ko}): ${i}`,...t)}}function pr(i,...e){if(ga.logLevel<=Ve.ERROR){const t=e.map(zp);ga.error(`Firestore (${ko}): ${i}`,...t)}}function bo(i,...e){if(ga.logLevel<=Ve.WARN){const t=e.map(zp);ga.warn(`Firestore (${ko}): ${i}`,...t)}}function zp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(i="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+i;throw pr(e),new Error(e)}function We(i,e){i||Re()}function Ne(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class eD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tD{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string"),new E0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new en(e)}}class nD{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class iD{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new nD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rD{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,yn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){We(this.o===void 0);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new KE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string"),this.R=t.token,new KE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=sD(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function ke(i,e){return i<e?-1:i>e?1:0}function Jm(i,e){let t=0;for(;t<i.length&&t<e.length;){const s=i.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return ke(s,o);{const u=A0(),h=aD(u.encode(QE(i,t)),u.encode(QE(e,t)));return h!==0?h:ke(s,o)}}t+=s>65535?2:1}return ke(i.length,e.length)}function QE(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function aD(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return ke(i[t],e[t]);return ke(i.length,e.length)}function Ro(i,e,t){return i.length===e.length&&i.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=-62135596800,XE=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*XE);return new kt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<YE)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XE}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-YE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new kt(0,0))}static max(){return new Ce(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="__name__";class wi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Re(),s===void 0?s=e.length-t:s>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=wi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return ke(e.length,t.length)}static compareSegments(e,t){const s=wi.isNumericId(e),o=wi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?wi.extractNumericId(e).compare(wi.extractNumericId(t)):Jm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class st extends wi{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new st(t)}static emptyPath(){return new st([])}}const oD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends wi{construct(e,t,s){return new Yt(e,t,s)}static isValidIdentifier(e){return oD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$E}static keyField(){return new Yt([$E])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(s+=d,o++):(u(),o++)}if(u(),h)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(st.fromString(e))}static fromName(e){return new we(st.fromString(e).popFirst(5))}static empty(){return new we(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new st(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function lD(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new kt(t+1,0):new kt(t,s));return new ds(o,we.empty(),e)}function uD(i){return new ds(i.readTime,i.key,du)}class ds{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ds(Ce.min(),we.empty(),du)}static max(){return new ds(Ce.max(),we.empty(),du)}}function cD(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(i.documentKey,e.documentKey),t!==0?t:ke(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==hD)throw i;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,s)=>{t(e)})}static reject(e){return new ee((t,s)=>{s(e)})}static waitFor(e){return new ee((t,s)=>{let o=0,u=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++u,h&&u===o&&t()},p=>s(p))}),h=!0,u===o&&t()})}static or(e){let t=ee.resolve(!1);for(const s of e)t=t.next(o=>o?ee.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new ee((s,o)=>{const u=e.length,h=new Array(u);let d=0;for(let p=0;p<u;p++){const g=p;t(e[g]).next(A=>{h[g]=A,++d,d===u&&s(h)},A=>o(A))}})}static doWhile(e,t){return new ee((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function dD(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Po(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ef.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function tf(i){return i==null}function Ph(i){return i===0&&1/i==-1/0}function mD(i){return typeof i=="number"&&Number.isInteger(i)&&!Ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="";function pD(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=WE(e)),e=gD(i.get(t),e);return WE(e)}function gD(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case w0:t+="";break;default:t+=u}}return t}function WE(i){return i+w0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function va(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function S0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=o??Qt.EMPTY,this.right=u??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Qt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,s,o,u){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JE(this.data.getIterator())}getIteratorFrom(e){return new JE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class JE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new ni([])}unionWith(e){let t=new Mt(Yt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new b0("Invalid base64 string: "+u):u}}(e);return new Xt(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const yD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(We(!!i),typeof i=="string"){let e=0;const t=yD.exec(i);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(i.seconds),nanos:Et(i.nanos)}}function Et(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ps(i){return typeof i=="string"?Xt.fromBase64String(i):Xt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="server_timestamp",C0="__type__",I0="__previous_value__",N0="__local_write_time__";function Hp(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[C0])===null||t===void 0?void 0:t.stringValue)===R0}function nf(i){const e=i.mapValue.fields[I0];return Hp(e)?nf(e):e}function mu(i){const e=ms(i.mapValue.fields[N0].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t,s,o,u,h,d,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g}}const Uh="(default)";class pu{constructor(e,t){this.projectId=e,this.database=t||Uh}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===Uh}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="__type__",vD="__max__",lh={mapValue:{}},D0="__vector__",Vh="value";function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Hp(i)?4:AD(i)?9007199254740991:ED(i)?10:11:Re()}function Ni(i,e){if(i===e)return!0;const t=gs(i);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return mu(i).isEqual(mu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ms(o.timestampValue),d=ms(u.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ps(o.bytesValue).isEqual(ps(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Et(o.geoPointValue.latitude)===Et(u.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Et(o.integerValue)===Et(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Et(o.doubleValue),d=Et(u.doubleValue);return h===d?Ph(h)===Ph(d):isNaN(h)&&isNaN(d)}return!1}(i,e);case 9:return Ro(i.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},d=u.mapValue.fields||{};if(ZE(h)!==ZE(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!Ni(h[p],d[p])))return!1;return!0}(i,e);default:return Re()}}function gu(i,e){return(i.values||[]).find(t=>Ni(t,e))!==void 0}function Co(i,e){if(i===e)return 0;const t=gs(i),s=gs(e);if(t!==s)return ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(i.booleanValue,e.booleanValue);case 2:return function(u,h){const d=Et(u.integerValue||u.doubleValue),p=Et(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return eA(i.timestampValue,e.timestampValue);case 4:return eA(mu(i),mu(e));case 5:return Jm(i.stringValue,e.stringValue);case 6:return function(u,h){const d=ps(u),p=ps(h);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const d=u.split("/"),p=h.split("/");for(let g=0;g<d.length&&g<p.length;g++){const A=ke(d[g],p[g]);if(A!==0)return A}return ke(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const d=ke(Et(u.latitude),Et(h.latitude));return d!==0?d:ke(Et(u.longitude),Et(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return tA(i.arrayValue,e.arrayValue);case 10:return function(u,h){var d,p,g,A;const T=u.fields||{},C=h.fields||{},D=(d=T[Vh])===null||d===void 0?void 0:d.arrayValue,k=(p=C[Vh])===null||p===void 0?void 0:p.arrayValue,G=ke(((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0,((A=k==null?void 0:k.values)===null||A===void 0?void 0:A.length)||0);return G!==0?G:tA(D,k)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===lh.mapValue&&h===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(h===lh.mapValue)return-1;const d=u.fields||{},p=Object.keys(d),g=h.fields||{},A=Object.keys(g);p.sort(),A.sort();for(let T=0;T<p.length&&T<A.length;++T){const C=Jm(p[T],A[T]);if(C!==0)return C;const D=Co(d[p[T]],g[A[T]]);if(D!==0)return D}return ke(p.length,A.length)}(i.mapValue,e.mapValue);default:throw Re()}}function eA(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ke(i,e);const t=ms(i),s=ms(e),o=ke(t.seconds,s.seconds);return o!==0?o:ke(t.nanos,s.nanos)}function tA(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=Co(t[o],s[o]);if(u)return u}return ke(t.length,s.length)}function Io(i){return ep(i)}function ep(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=ms(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ps(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return we.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=ep(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${ep(t.fields[h])}`;return o+"}"}(i.mapValue):Re()}function Eh(i){switch(gs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(i);return e?16+Eh(e):16;case 5:return 2*i.stringValue.length;case 6:return ps(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Eh(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return va(s.fields,(u,h)=>{o+=u.length+Eh(h)}),o}(i.mapValue);default:throw Re()}}function nA(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function tp(i){return!!i&&"integerValue"in i}function Fp(i){return!!i&&"arrayValue"in i}function iA(i){return!!i&&"nullValue"in i}function rA(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ah(i){return!!i&&"mapValue"in i}function ED(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[x0])===null||t===void 0?void 0:t.stringValue)===D0}function su(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return va(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=su(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(i.arrayValue.values[t]);return e}return Object.assign({},i)}function AD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===vD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=Yt.emptyPath(),s={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}h?s[d.lastSegment()]=su(h):o.push(d.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Ah(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){va(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Fn(su(this.value))}}function O0(i){const e=[];return va(i.fields,(t,s)=>{const o=new Yt([t]);if(Ah(s)){const u=O0(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,s,o,u,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=d}static newInvalidDocument(e){return new tn(e,0,Ce.min(),Ce.min(),Ce.min(),Fn.empty(),0)}static newFoundDocument(e,t,s,o){return new tn(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new tn(e,2,t,Ce.min(),Ce.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Ce.min(),Ce.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.position=e,this.inclusive=t}}function sA(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),t.key):s=Co(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function aA(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ni(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function TD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{}class Rt extends k0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new SD(e,t,s):t==="array-contains"?new CD(e,s):t==="in"?new ID(e,s):t==="not-in"?new ND(e,s):t==="array-contains-any"?new xD(e,s):new Rt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new bD(e,s):new RD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Co(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends k0{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ri(e,t)}matches(e){return M0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function M0(i){return i.op==="and"}function P0(i){return wD(i)&&M0(i)}function wD(i){for(const e of i.filters)if(e instanceof ri)return!1;return!0}function np(i){if(i instanceof Rt)return i.field.canonicalString()+i.op.toString()+Io(i.value);if(P0(i))return i.filters.map(e=>np(e)).join(",");{const e=i.filters.map(t=>np(t)).join(",");return`${i.op}(${e})`}}function U0(i,e){return i instanceof Rt?function(s,o){return o instanceof Rt&&s.op===o.op&&s.field.isEqual(o.field)&&Ni(s.value,o.value)}(i,e):i instanceof ri?function(s,o){return o instanceof ri&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,d)=>u&&U0(h,o.filters[d]),!0):!1}(i,e):void Re()}function V0(i){return i instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${Io(t.value)}`}(i):i instanceof ri?function(t){return t.op.toString()+" {"+t.getFilters().map(V0).join(" ,")+"}"}(i):"Filter"}class SD extends Rt{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class bD extends Rt{constructor(e,t){super(e,"in",t),this.keys=L0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RD extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=L0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function L0(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>we.fromName(s.referenceValue))}class CD extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fp(t)&&gu(t.arrayValue,this.value)}}class ID extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class ND extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!gu(this.value.arrayValue,t)}}class xD extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>gu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t=null,s=[],o=[],u=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=d,this.le=null}}function oA(i,e=null,t=[],s=[],o=null,u=null,h=null){return new DD(i,e,t,s,o,u,h)}function Gp(i){const e=Ne(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>np(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Io(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Io(s)).join(",")),e.le=t}return e.le}function Kp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!TD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!U0(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!aA(i.startAt,e.startAt)&&aA(i.endAt,e.endAt)}function ip(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t=null,s=[],o=[],u=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=d,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function OD(i,e,t,s,o,u,h,d){return new Uo(i,e,t,s,o,u,h,d)}function Qp(i){return new Uo(i)}function lA(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function j0(i){return i.collectionGroup!==null}function au(i){const e=Ne(i);if(e.he===null){e.he=[];const t=new Set;for(const u of e.explicitOrderBy)e.he.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Mt(Yt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.he.push(new yu(u,s))}),t.has(Yt.keyField().canonicalString())||e.he.push(new yu(Yt.keyField(),s))}return e.he}function Ri(i){const e=Ne(i);return e.Pe||(e.Pe=kD(e,au(i))),e.Pe}function kD(i,e){if(i.limitType==="F")return oA(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new yu(o.field,u)});const t=i.endAt?new Lh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Lh(i.startAt.position,i.startAt.inclusive):null;return oA(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function rp(i,e){const t=i.filters.concat([e]);return new Uo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function jh(i,e,t){return new Uo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function rf(i,e){return Kp(Ri(i),Ri(e))&&i.limitType===e.limitType}function B0(i){return`${Gp(Ri(i))}|lt:${i.limitType}`}function mo(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>V0(o)).join(", ")}]`),tf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Io(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Io(o)).join(",")),`Target(${s})`}(Ri(i))}; limitType=${i.limitType})`}function sf(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):we.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of au(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(h,d,p){const g=sA(h,d,p);return h.inclusive?g<=0:g<0}(s.startAt,au(s),o)||s.endAt&&!function(h,d,p){const g=sA(h,d,p);return h.inclusive?g>=0:g>0}(s.endAt,au(s),o))}(i,e)}function MD(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function z0(i){return(e,t)=>{let s=!1;for(const o of au(i)){const u=PD(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function PD(i,e,t){const s=i.field.isKeyField()?we.comparator(e.key,t.key):function(u,h,d){const p=h.data.field(u),g=d.data.field(u);return p!==null&&g!==null?Co(p,g):Re()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return S0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new ct(we.comparator);function gr(){return UD}const q0=new ct(we.comparator);function Jl(...i){let e=q0;for(const t of i)e=e.insert(t.key,t);return e}function H0(i){let e=q0;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function la(){return ou()}function F0(){return ou()}function ou(){return new Ea(i=>i.toString(),(i,e)=>i.isEqual(e))}const VD=new ct(we.comparator),LD=new Mt(we.comparator);function Le(...i){let e=LD;for(const t of i)e=e.add(t);return e}const jD=new Mt(ke);function BD(){return jD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function G0(i){return{integerValue:""+i}}function zD(i,e){return mD(e)?G0(e):Yp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function qD(i,e,t){return i instanceof Bh?function(o,u){const h={fields:{[C0]:{stringValue:R0},[N0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Hp(u)&&(u=nf(u)),u&&(h.fields[I0]=u),{mapValue:h}}(t,e):i instanceof _u?Q0(i,e):i instanceof vu?Y0(i,e):function(o,u){const h=K0(o,u),d=uA(h)+uA(o.Ie);return tp(h)&&tp(o.Ie)?G0(d):Yp(o.serializer,d)}(i,e)}function HD(i,e,t){return i instanceof _u?Q0(i,e):i instanceof vu?Y0(i,e):t}function K0(i,e){return i instanceof zh?function(s){return tp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Bh extends af{}class _u extends af{constructor(e){super(),this.elements=e}}function Q0(i,e){const t=X0(e);for(const s of i.elements)t.some(o=>Ni(o,s))||t.push(s);return{arrayValue:{values:t}}}class vu extends af{constructor(e){super(),this.elements=e}}function Y0(i,e){let t=X0(e);for(const s of i.elements)t=t.filter(o=>!Ni(o,s));return{arrayValue:{values:t}}}class zh extends af{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function uA(i){return Et(i.integerValue||i.doubleValue)}function X0(i){return Fp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function FD(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof _u&&o instanceof _u||s instanceof vu&&o instanceof vu?Ro(s.elements,o.elements,Ni):s instanceof zh&&o instanceof zh?Ni(s.Ie,o.Ie):s instanceof Bh&&o instanceof Bh}(i.transform,e.transform)}class GD{constructor(e,t){this.version=e,this.transformResults=t}}class Ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class of{}function $0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Xp(i.key,Ci.none()):new Iu(i.key,i.data,Ci.none());{const t=i.data,s=Fn.empty();let o=new Mt(Yt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new Aa(i.key,s,new ni(o.toArray()),Ci.none())}}function KD(i,e,t){i instanceof Iu?function(o,u,h){const d=o.value.clone(),p=hA(o.fieldTransforms,u,h.transformResults);d.setAll(p),u.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Aa?function(o,u,h){if(!Th(o.precondition,u))return void u.convertToUnknownDocument(h.version);const d=hA(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(W0(o)),p.setAll(d),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function lu(i,e,t,s){return i instanceof Iu?function(u,h,d,p){if(!Th(u.precondition,h))return d;const g=u.value.clone(),A=fA(u.fieldTransforms,p,h);return g.setAll(A),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(i,e,t,s):i instanceof Aa?function(u,h,d,p){if(!Th(u.precondition,h))return d;const g=fA(u.fieldTransforms,p,h),A=h.data;return A.setAll(W0(u)),A.setAll(g),h.convertToFoundDocument(h.version,A).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(i,e,t,s):function(u,h,d){return Th(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(i,e,t)}function QD(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=K0(s.transform,o||null);u!=null&&(t===null&&(t=Fn.empty()),t.set(s.field,u))}return t||null}function cA(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ro(s,o,(u,h)=>FD(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Iu extends of{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Aa extends of{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function W0(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function hA(i,e,t){const s=new Map;We(i.length===t.length);for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,d=e.data.field(u.field);s.set(u.field,HD(h,d,t[o]))}return s}function fA(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,qD(u,h,e))}return s}class Xp extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YD extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&KD(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=F0();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let d=this.applyToLocalView(h,u.mutatedFields);d=t.has(o.key)?null:d;const p=$0(h,d);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ce.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(t,s)=>cA(t,s))&&Ro(this.baseMutations,e.baseMutations,(t,s)=>cA(t,s))}}class $p{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length);let o=function(){return VD}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new $p(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ge;function ZD(i){switch(i){case J.OK:return Re();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Re()}}function Z0(i){if(i===void 0)return pr("GRPC error has no .code"),J.UNKNOWN;switch(i){case bt.OK:return J.OK;case bt.CANCELLED:return J.CANCELLED;case bt.UNKNOWN:return J.UNKNOWN;case bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case bt.INTERNAL:return J.INTERNAL;case bt.UNAVAILABLE:return J.UNAVAILABLE;case bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case bt.NOT_FOUND:return J.NOT_FOUND;case bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case bt.ABORTED:return J.ABORTED;case bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case bt.DATA_LOSS:return J.DATA_LOSS;default:return Re()}}(Ge=bt||(bt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new cs([4294967295,4294967295],0);function dA(i){const e=A0().encode(i),t=new m0;return t.update(e),new Uint8Array(t.digest())}function mA(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new cs([t,s],0),new cs([o,u],0)]}class Wp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(s<0)throw new eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=cs.fromNumber(this.Ee)}Ae(e,t,s){let o=e.add(t.multiply(cs.fromNumber(s)));return o.compare(JD)===1&&(o=new cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=dA(e),[s,o]=mA(t);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);if(!this.Re(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Wp(u,o,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=dA(e),[s,o]=mA(t);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lf(Ce.min(),o,new ct(ke),gr(),Le())}}class Nu{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Nu(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,s,o){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=o}}class J0{constructor(e,t){this.targetId=e,this.ge=t}}class ew{constructor(e,t,s=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class pA{constructor(){this.pe=0,this.ye=gA(),this.we=Xt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Le(),t=Le(),s=Le();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Re()}}),new Nu(this.we,this.Se,e,t,s)}Me(){this.be=!1,this.ye=gA()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,We(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class eO{constructor(e){this.ke=e,this.qe=new Map,this.Qe=gr(),this.$e=uh(),this.Ue=uh(),this.Ke=new ct(ke)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,s=e.ge.count,o=this.Xe(t);if(o){const u=o.target;if(ip(u))if(s===0){const h=new we(u.path);this.ze(t,h,tn.newNoDocument(h,Ce.min()))}else We(s===1);else{const h=this.et(t);if(h!==s){const d=this.tt(e),p=d?this.nt(d,e,h):1;if(p!==0){this.Ye(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,g)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,d;try{h=ps(s).toUint8Array()}catch(p){if(p instanceof b0)return bo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Wp(h,o,u)}catch(p){return bo(p instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ee===0?null:d}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,u,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((u,h)=>{const d=this.Xe(h);if(d){if(u.current&&ip(d.target)){const p=new we(d.target.path);this._t(p).has(h)||this.ut(h,p)||this.ze(h,p,tn.newNoDocument(p,e))}u.ve&&(t.set(h,u.Fe()),u.Me())}});let s=Le();this.Ue.forEach((u,h)=>{let d=!0;h.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(e));const o=new lf(e,t,this.Ke,this.Qe,s);return this.Qe=gr(),this.$e=uh(),this.Ue=uh(),this.Ke=new ct(ke),o}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new pA,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Mt(ke),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Mt(ke),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new pA),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function uh(){return new ct(we.comparator)}function gA(){return new ct(we.comparator)}const tO={asc:"ASCENDING",desc:"DESCENDING"},nO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iO={and:"AND",or:"OR"};class rO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(i,e){return i.useProto3Json||tf(e)?e:{value:e}}function qh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function sO(i,e){return qh(i,e.toTimestamp())}function Ii(i){return We(!!i),Ce.fromTimestamp(function(t){const s=ms(t);return new kt(s.seconds,s.nanos)}(i))}function Zp(i,e){return ap(i,e).canonicalString()}function ap(i,e){const t=function(o){return new st(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function nw(i){const e=st.fromString(i);return We(ow(e)),e}function op(i,e){return Zp(i.databaseId,e.path)}function Pm(i,e){const t=nw(e);if(t.get(1)!==i.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new we(rw(t))}function iw(i,e){return Zp(i.databaseId,e)}function aO(i){const e=nw(i);return e.length===4?st.emptyPath():rw(e)}function lp(i){return new st(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function rw(i){return We(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function yA(i,e,t){return{name:op(i,e),fields:t.value.mapValue.fields}}function oO(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,A){return g.useProto3Json?(We(A===void 0||typeof A=="string"),Xt.fromBase64String(A||"")):(We(A===void 0||A instanceof Buffer||A instanceof Uint8Array),Xt.fromUint8Array(A||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(g){const A=g.code===void 0?J.UNKNOWN:Z0(g.code);return new he(A,g.message||"")}(h);t=new ew(s,o,u,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Pm(i,s.document.name),u=Ii(s.document.updateTime),h=s.document.createTime?Ii(s.document.createTime):Ce.min(),d=new Fn({mapValue:{fields:s.document.fields}}),p=tn.newFoundDocument(o,u,h,d),g=s.targetIds||[],A=s.removedTargetIds||[];t=new wh(g,A,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Pm(i,s.document),u=s.readTime?Ii(s.readTime):Ce.min(),h=tn.newNoDocument(o,u),d=s.removedTargetIds||[];t=new wh([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Pm(i,s.document),u=s.removedTargetIds||[];t=new wh([],u,o,null)}else{if(!("filter"in e))return Re();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new WD(o,u),d=s.targetId;t=new J0(d,h)}}return t}function lO(i,e){let t;if(e instanceof Iu)t={update:yA(i,e.key,e.value)};else if(e instanceof Xp)t={delete:op(i,e.key)};else if(e instanceof Aa)t={update:yA(i,e.key,e.data),updateMask:yO(e.fieldMask)};else{if(!(e instanceof YD))return Re();t={verify:op(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const d=h.transform;if(d instanceof Bh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _u)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof vu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zh)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw Re()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:sO(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Re()}(i,e.precondition)),t}function uO(i,e){return i&&i.length>0?(We(e!==void 0),i.map(t=>function(o,u){let h=o.updateTime?Ii(o.updateTime):Ii(u);return h.isEqual(Ce.min())&&(h=Ii(u)),new GD(h,o.transformResults||[])}(t,e))):[]}function cO(i,e){return{documents:[iw(i,e.path)]}}function hO(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=iw(i,o);const u=function(g){if(g.length!==0)return aw(ri.create(g,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(A=>function(C){return{field:po(C.field),direction:mO(C.dir)}}(A))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=sp(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:t,parent:o}}function fO(i){let e=aO(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(T){const C=sw(T);return C instanceof ri&&P0(C)?C.getFilters():[C]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(C=>function(k){return new yu(go(k.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(C))}(t.orderBy));let d=null;t.limit&&(d=function(T){let C;return C=typeof T=="object"?T.value:T,tf(C)?null:C}(t.limit));let p=null;t.startAt&&(p=function(T){const C=!!T.before,D=T.values||[];return new Lh(D,C)}(t.startAt));let g=null;return t.endAt&&(g=function(T){const C=!T.before,D=T.values||[];return new Lh(D,C)}(t.endAt)),OD(e,o,h,u,d,"F",p,g)}function dO(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sw(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=go(t.unaryFilter.field);return Rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=go(t.unaryFilter.field);return Rt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return Rt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(i):i.fieldFilter!==void 0?function(t){return Rt.create(go(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return ri.create(t.compositeFilter.filters.map(s=>sw(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(i):Re()}function mO(i){return tO[i]}function pO(i){return nO[i]}function gO(i){return iO[i]}function po(i){return{fieldPath:i.canonicalString()}}function go(i){return Yt.fromServerFormat(i.fieldPath)}function aw(i){return i instanceof Rt?function(t){if(t.op==="=="){if(rA(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(iA(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rA(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(iA(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:pO(t.op),value:t.value}}}(i):i instanceof ri?function(t){const s=t.getFilters().map(o=>aw(o));return s.length===1?s[0]:{compositeFilter:{op:gO(t.op),filters:s}}}(i):Re()}function yO(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ow(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,s,o,u=Ce.min(),h=Ce.min(),d=Xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.Tt=e}}function vO(i){const e=fO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.Tn=new AO}addToCollectionParentIndex(e,t){return this.Tn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ds.min())}updateCollectionGroup(e,t,s){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class AO{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Mt(st.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Mt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lw=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(lw,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new No(0)}static Kn(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="LruGarbageCollector",TO=1048576;function EA([i,e],[t,s]){const o=ke(i,t);return o===0?ke(e,s):o}class wO{constructor(e){this.Hn=e,this.buffer=new Mt(EA),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();EA(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SO{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ce(vA,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Po(t)?ce(vA,"Ignoring IndexedDB error during garbage collection: ",t):await Mo(t)}await this.er(3e5)})}}class bO{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(ef.ae);const s=new wO(t);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(_A)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_A):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,o,u,h,d,p,g;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,d=Date.now(),this.removeTargets(e,s,t))).next(T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(g=Date.now(),fo()<=Ve.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-A}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${u} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-A}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}function RO(i,e){return new bO(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.changes=new Ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ee.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&lu(s.mutation,o,ni.empty(),kt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Le()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Le()){const o=la();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let h=Jl();return u.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=la();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Le()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,o){let u=gr();const h=ou(),d=function(){return ou()}();return t.forEach((p,g)=>{const A=s.get(g.key);o.has(g.key)&&(A===void 0||A.mutation instanceof Aa)?u=u.insert(g.key,g):A!==void 0?(h.set(g.key,A.mutation.getFieldMask()),lu(A.mutation,g,A.mutation.getFieldMask(),kt.now())):h.set(g.key,ni.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,A)=>h.set(g,A)),t.forEach((g,A)=>{var T;return d.set(g,new IO(A,(T=h.get(g))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const s=ou();let o=new ct((h,d)=>h-d),u=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let A=s.get(p)||ni.empty();A=d.applyToLocalView(g,A),s.set(p,A);const T=(o.get(d.batchId)||Le()).add(p);o=o.insert(d.batchId,T)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,A=p.value,T=F0();A.forEach(C=>{if(!u.has(C)){const D=$0(t.get(C),s.get(C));D!==null&&T.set(C,D),u=u.add(C)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ee.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):j0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ee.resolve(la());let d=du,p=u;return h.next(g=>ee.forEach(g,(A,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),u.get(A)?ee.resolve():this.remoteDocumentCache.getEntry(e,A).next(C=>{p=p.insert(A,C)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Le())).next(A=>({batchId:d,changes:H0(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(s=>{let o=Jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=Jl();return this.indexManager.getCollectionParents(e,u).next(d=>ee.forEach(d,p=>{const g=function(T,C){return new Uo(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(A=>{A.forEach((T,C)=>{h=h.insert(T,C)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(h=>{u.forEach((p,g)=>{const A=g.getKey();h.get(A)===null&&(h=h.insert(A,tn.newInvalidDocument(A)))});let d=Jl();return h.forEach((p,g)=>{const A=u.get(p);A!==void 0&&lu(A.mutation,g,ni.empty(),kt.now()),sf(t,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ee.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:vO(o.bundledQuery),readTime:Ii(o.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.overlays=new ct(we.comparator),this.Rr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const s=la();return ee.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.Et(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ee.resolve()}getOverlaysForCollection(e,t,s){const o=la(),u=t.length+1,h=new we(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new ct((g,A)=>g-A);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let A=u.get(g.largestBatchId);A===null&&(A=la(),u=u.insert(g.largestBatchId,A)),A.set(g.getKey(),g)}}const d=la(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,A)=>d.set(g,A)),!(d.size()>=o)););return ee.resolve(d)}Et(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new $D(t,s));let u=this.Rr.get(t);u===void 0&&(u=Le(),this.Rr.set(t,u)),this.Rr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.Vr=new Mt(qt.mr),this.gr=new Mt(qt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new qt(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new qt(e,t))}Sr(e,t){e.forEach(s=>this.removeReference(s,t))}br(e){const t=new we(new st([])),s=new qt(t,e),o=new qt(t,e+1),u=[];return this.gr.forEachInRange([s,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new we(new st([])),s=new qt(t,e),o=new qt(t,e+1);let u=Le();return this.gr.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new qt(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class qt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return we.comparator(e.key,t.key)||ke(e.Cr,t.Cr)}static pr(e,t){return ke(e.Cr,t.Cr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Mt(qt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new XD(u,t,s,o);this.mutationQueue.push(h);for(const d of o)this.Mr=this.Mr.add(new qt(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Nr(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?qp:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new qt(t,0),o=new qt(t,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],h=>{const d=this.Or(h.Cr);u.push(d)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Mt(ke);return t.forEach(o=>{const u=new qt(o,0),h=new qt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],d=>{s=s.add(d.Cr)})}),ee.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;we.isDocumentKey(u)||(u=u.child(""));const h=new qt(new we(u),0);let d=new Mt(ke);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Cr)),!0)},h),ee.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){We(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ee.forEach(t.mutations,o=>{const u=new qt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new qt(t,0),o=this.Mr.firstAfterOrEqual(s);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.kr=e,this.docs=function(){return new ct(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ee.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let s=gr();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=gr();const h=t.path,d=new we(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:A}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||cD(uD(A),s)<=0||(o.has(A.key)||sf(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Re()}qr(e,t){return ee.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new PO(this)}getSize(e){return ee.resolve(this.size)}}class PO extends CO{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ee.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.persistence=e,this.Qr=new Ea(t=>Gp(t),Kp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Jp,this.targetCount=0,this.Kr=No.Un()}forEachTarget(e,t){return this.Qr.forEach((s,o)=>t(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),ee.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new No(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.zn(t),ee.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return ee.resolve(s)}addMatchingKeys(e,t,s){return this.Ur.yr(t,s),ee.resolve()}removeMatchingKeys(e,t,s){this.Ur.Sr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ur.vr(t);return ee.resolve(s)}containsKey(e,t){return ee.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ef(0),this.zr=!1,this.zr=!0,this.jr=new OO,this.referenceDelegate=e(this),this.Hr=new UO(this),this.indexManager=new EO,this.remoteDocumentCache=function(o){return new MO(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new _O(t),this.Yr=new xO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new kO(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const o=new VO(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,t){return ee.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class VO extends fD{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.ti=new Jp,this.ni=null}static ri(e){return new eg(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),ee.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ee.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,s=>{const o=we.fromPath(s);return this.si(e,o).next(u=>{u||t.removeEntry(o,Ce.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ee.or([()=>ee.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Hh{constructor(e,t){this.persistence=e,this.oi=new Ea(s=>pD(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=RO(this,t)}static ri(e,t){return new Hh(e,t)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return ee.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ee.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,h=>this.ar(e,h,t).next(d=>{d||(s++,u.removeEntry(h,Ce.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ee.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eh(e.data.value)),t}ar(e,t,s){return ee.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=o}static Yi(e,t){let s=Le(),o=Le();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new tg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return aC()?8:dD(rn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.rs(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(e,t,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new LO;return this._s(e,t,h).next(d=>{if(u.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>u.result)}us(e,t,s,o){return s.documentReadCount<this.es?(fo()<=Ve.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(fo()<=Ve.DEBUG&&ce("QueryEngine","Query:",mo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(fo()<=Ve.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):ee.resolve())}rs(e,t){if(lA(t))return ee.resolve(null);let s=Ri(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=jh(t,null,"F"),s=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Le(...u);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(t,d);return this.ls(t,g,h,p.readTime)?this.rs(e,jh(t,null,"F")):this.hs(e,g,t,p)}))})))}ss(e,t,s,o){return lA(t)||o.isEqual(Ce.min())?ee.resolve(null):this.ns.getDocuments(e,s).next(u=>{const h=this.cs(t,u);return this.ls(t,h,s,o)?ee.resolve(null):(fo()<=Ve.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(t)),this.hs(e,h,t,lD(o,du)).next(d=>d))})}cs(e,t){let s=new Mt(z0(e));return t.forEach((o,u)=>{sf(e,u)&&(s=s.add(u))}),s}ls(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,t,s){return fo()<=Ve.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",mo(t)),this.ns.getDocumentsMatchingQuery(e,t,ds.min(),s)}hs(e,t,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="LocalStore",BO=3e8;class zO{constructor(e,t,s,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new ct(ke),this.Is=new Ea(u=>Gp(u),Kp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NO(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function qO(i,e,t,s){return new zO(i,e,t,s)}async function cw(i,e){const t=Ne(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],d=[];let p=Le();for(const g of o){h.push(g.batchId);for(const A of g.mutations)p=p.add(A.key)}for(const g of u){d.push(g.batchId);for(const A of g.mutations)p=p.add(A.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:h,addedBatchIds:d}))})})}function HO(i,e){const t=Ne(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,p,g,A){const T=g.batch,C=T.keys();let D=ee.resolve();return C.forEach(k=>{D=D.next(()=>A.getEntry(p,k)).next(G=>{const U=g.docVersions.get(k);We(U!==null),G.version.compareTo(U)<0&&(T.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),A.addEntry(G)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=Le();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function hw(i){const e=Ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function FO(i,e){const t=Ne(i),s=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const d=[];e.targetChanges.forEach((A,T)=>{const C=o.get(T);if(!C)return;d.push(t.Hr.removeMatchingKeys(u,A.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(u,A.addedDocuments,T)));let D=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(Xt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):A.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(A.resumeToken,s)),o=o.insert(T,D),function(G,U,z){return G.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=BO?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(C,D,A)&&d.push(t.Hr.updateTargetData(u,D))});let p=gr(),g=Le();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),d.push(GO(u,h,e.documentUpdates).next(A=>{p=A.Vs,g=A.fs})),!s.isEqual(Ce.min())){const A=t.Hr.getLastRemoteSnapshotVersion(u).next(T=>t.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));d.push(A)}return ee.waitFor(d).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(t.Ts=o,u))}function GO(i,e,t){let s=Le(),o=Le();return t.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=gr();return t.forEach((d,p)=>{const g=u.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):ce(ng,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{Vs:h,fs:o}})}function KO(i,e){const t=Ne(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=qp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function QO(i,e){const t=Ne(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Hr.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):t.Hr.allocateTargetId(s).next(h=>(o=new as(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function up(i,e,t){const s=Ne(i),o=s.Ts.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Po(h))throw h;ce(ng,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function AA(i,e,t){const s=Ne(i);let o=Ce.min(),u=Le();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,A){const T=Ne(p),C=T.Is.get(A);return C!==void 0?ee.resolve(T.Ts.get(C)):T.Hr.getTargetData(g,A)}(s,h,Ri(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?u:Le())).next(d=>(YO(s,MD(e),d),{documents:d,gs:u})))}function YO(i,e,t){let s=i.Es.get(e)||Ce.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class TA{constructor(){this.activeTargetIds=BD()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XO{constructor(){this.ho=new TA,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new TA,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="ConnectivityMonitor";class SA{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ce(wA,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ce(wA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function cp(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="RestConnection",WO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZO{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Uh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,t,s,o,u){const h=cp(),d=this.bo(e,t.toUriEncodedString());ce(Um,`Sending RPC '${e}' ${h}:`,d,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,d,p,s).then(g=>(ce(Um,`Received RPC '${e}' ${h}: `,g),g),g=>{throw bo(Um,`RPC '${e}' ${h} failed with error: `,g,"url: ",d,"request:",s),g})}Co(e,t,s,o,u,h){return this.So(e,t,s,o,u)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,t){const s=WO[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class e2 extends ZO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,o){const u=cp();return new Promise((h,d)=>{const p=new p0;p.setWithCredentials(!0),p.listenOnce(g0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case vh.NO_ERROR:const A=p.getResponseJson();ce(Jt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),h(A);break;case vh.TIMEOUT:ce(Jt,`RPC '${e}' ${u} timed out`),d(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const T=p.getStatus();if(ce(Jt,`RPC '${e}' ${u} failed with status:`,T,"response text:",p.getResponseText()),T>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C==null?void 0:C.error;if(D&&D.status&&D.message){const k=function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(z)>=0?z:J.UNKNOWN}(D.status);d(new he(k,D.message))}else d(new he(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new he(J.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ce(Jt,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);ce(Jt,`RPC '${e}' ${u} sending request:`,o),p.send(t,"POST",g,s,15)})}Wo(e,t,s){const o=cp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=v0(),d=_0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const A=u.join("");ce(Jt,`Creating RPC '${e}' stream ${o}: ${A}`,p);const T=h.createWebChannel(A,p);let C=!1,D=!1;const k=new JO({Fo:U=>{D?ce(Jt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(C||(ce(Jt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),ce(Jt,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Mo:()=>T.close()}),G=(U,z,H)=>{U.listen(z,Y=>{try{H(Y)}catch(ie){setTimeout(()=>{throw ie},0)}})};return G(T,Zl.EventType.OPEN,()=>{D||(ce(Jt,`RPC '${e}' stream ${o} transport opened.`),k.Qo())}),G(T,Zl.EventType.CLOSE,()=>{D||(D=!0,ce(Jt,`RPC '${e}' stream ${o} transport closed`),k.Uo())}),G(T,Zl.EventType.ERROR,U=>{D||(D=!0,bo(Jt,`RPC '${e}' stream ${o} transport errored:`,U),k.Uo(new he(J.UNAVAILABLE,"The operation could not be completed")))}),G(T,Zl.EventType.MESSAGE,U=>{var z;if(!D){const H=U.data[0];We(!!H);const Y=H,ie=(Y==null?void 0:Y.error)||((z=Y[0])===null||z===void 0?void 0:z.error);if(ie){ce(Jt,`RPC '${e}' stream ${o} received error:`,ie);const re=ie.status;let pe=function(b){const I=bt[b];if(I!==void 0)return Z0(I)}(re),M=ie.message;pe===void 0&&(pe=J.INTERNAL,M="Unknown error status: "+re+" with message "+ie.message),D=!0,k.Uo(new he(pe,M)),T.close()}else ce(Jt,`RPC '${e}' stream ${o} received:`,H),k.Ko(H)}}),G(d,y0.STAT_EVENT,U=>{U.stat===Zm.PROXY?ce(Jt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Zm.NOPROXY&&ce(Jt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(i){return new rO(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="PersistentStream";class dw{constructor(e,t,s,o,u,h,d,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new fw(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===t&&this.V_(s,o)},s=>{e(()=>{const o=new he(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ce(bA,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ce(bA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t2 extends dw{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=oO(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ce.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?Ii(h.readTime):Ce.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=lp(this.serializer),t.addTarget=function(u,h){let d;const p=h.target;if(d=ip(p)?{documents:cO(u,p)}:{query:hO(u,p).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=tw(u,h.resumeToken);const g=sp(u,h.expectedCount);g!==null&&(d.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ce.min())>0){d.readTime=qh(u,h.snapshotVersion.toTimestamp());const g=sp(u,h.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const s=dO(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=lp(this.serializer),t.removeTarget=e,this.I_(t)}}class n2 extends dw{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=uO(e.writeResults,e.commitTime),s=Ii(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=lp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>lO(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{}class r2 extends i2{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.So(e,ap(t,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(J.UNKNOWN,u.toString())})}Co(e,t,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,ap(t,s),o,h,d,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(J.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class s2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(pr(t),this.N_=!1):ce("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class a2{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{s.enqueueAndForget(async()=>{Ta(this)&&(ce(ya,"Restarting streams for network reachability change."),await async function(p){const g=Ne(p);g.W_.add(4),await xu(g),g.j_.set("Unknown"),g.W_.delete(4),await cf(g)}(this))})}),this.j_=new s2(s,o)}}async function cf(i){if(Ta(i))for(const e of i.G_)await e(!0)}async function xu(i){for(const e of i.G_)await e(!1)}function mw(i,e){const t=Ne(i);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),ag(t)?sg(t):Vo(t).c_()&&rg(t,e))}function ig(i,e){const t=Ne(i),s=Vo(t);t.K_.delete(e),s.c_()&&pw(t,e),t.K_.size===0&&(s.c_()?s.P_():Ta(t)&&t.j_.set("Unknown"))}function rg(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vo(i).y_(e)}function pw(i,e){i.H_.Ne(e),Vo(i).w_(e)}function sg(i){i.H_=new eO({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Vo(i).start(),i.j_.B_()}function ag(i){return Ta(i)&&!Vo(i).u_()&&i.K_.size>0}function Ta(i){return Ne(i).W_.size===0}function gw(i){i.H_=void 0}async function o2(i){i.j_.set("Online")}async function l2(i){i.K_.forEach((e,t)=>{rg(i,e)})}async function u2(i,e){gw(i),ag(i)?(i.j_.q_(e),sg(i)):i.j_.set("Unknown")}async function c2(i,e,t){if(i.j_.set("Online"),e instanceof ew&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const d of u.targetIds)o.K_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.K_.delete(d),o.H_.removeTarget(d))}(i,e)}catch(s){ce(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(i,s)}else if(e instanceof wh?i.H_.We(e):e instanceof J0?i.H_.Ze(e):i.H_.je(e),!t.isEqual(Ce.min()))try{const s=await hw(i.localStore);t.compareTo(s)>=0&&await function(u,h){const d=u.H_.ot(h);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const A=u.K_.get(g);A&&u.K_.set(g,A.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,g)=>{const A=u.K_.get(p);if(!A)return;u.K_.set(p,A.withResumeToken(Xt.EMPTY_BYTE_STRING,A.snapshotVersion)),pw(u,p);const T=new as(A.target,p,g,A.sequenceNumber);rg(u,T)}),u.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(s){ce(ya,"Failed to raise snapshot:",s),await Fh(i,s)}}async function Fh(i,e,t){if(!Po(e))throw e;i.W_.add(1),await xu(i),i.j_.set("Offline"),t||(t=()=>hw(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ce(ya,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await cf(i)})}function yw(i,e){return e().catch(t=>Fh(i,t,e))}async function hf(i){const e=Ne(i),t=ys(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:qp;for(;h2(e);)try{const o=await KO(e.localStore,s);if(o===null){e.U_.length===0&&t.P_();break}s=o.batchId,f2(e,o)}catch(o){await Fh(e,o)}_w(e)&&vw(e)}function h2(i){return Ta(i)&&i.U_.length<10}function f2(i,e){i.U_.push(e);const t=ys(i);t.c_()&&t.S_&&t.b_(e.mutations)}function _w(i){return Ta(i)&&!ys(i).u_()&&i.U_.length>0}function vw(i){ys(i).start()}async function d2(i){ys(i).C_()}async function m2(i){const e=ys(i);for(const t of i.U_)e.b_(t.mutations)}async function p2(i,e,t){const s=i.U_.shift(),o=$p.from(s,e,t);await yw(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await hf(i)}async function g2(i,e){e&&ys(i).S_&&await async function(s,o){if(function(h){return ZD(h)&&h!==J.ABORTED}(o.code)){const u=s.U_.shift();ys(s).h_(),await yw(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await hf(s)}}(i,e),_w(i)&&vw(i)}async function RA(i,e){const t=Ne(i);t.asyncQueue.verifyOperationInProgress(),ce(ya,"RemoteStore received new credentials");const s=Ta(t);t.W_.add(3),await xu(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await cf(t)}async function y2(i,e){const t=Ne(i);e?(t.W_.delete(2),await cf(t)):e||(t.W_.add(2),await xu(t),t.j_.set("Unknown"))}function Vo(i){return i.J_||(i.J_=function(t,s,o){const u=Ne(t);return u.M_(),new t2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:o2.bind(null,i),No:l2.bind(null,i),Lo:u2.bind(null,i),p_:c2.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),ag(i)?sg(i):i.j_.set("Unknown")):(await i.J_.stop(),gw(i))})),i.J_}function ys(i){return i.Y_||(i.Y_=function(t,s,o){const u=Ne(t);return u.M_(),new n2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:d2.bind(null,i),Lo:g2.bind(null,i),D_:m2.bind(null,i),v_:p2.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await hf(i)):(await i.Y_.stop(),i.U_.length>0&&(ce(ya,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,d=new og(e,t,h,o,u);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lg(i,e){if(pr("AsyncQueue",`${e}: ${i}`),Po(i))return new he(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=Jl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new To;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Z_=new ct(we.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class xo{constructor(e,t,s,o,u,h,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new xo(e,t,To.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class v2{constructor(){this.queries=IA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const o=Ne(t),u=o.queries;o.queries=IA(),u.forEach((h,d)=>{for(const p of d.ta)p.onError(s)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function IA(){return new Ea(i=>B0(i),rf)}async function Ew(i,e){const t=Ne(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new _2,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await t.onListen(o,!0);break;case 1:u.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=lg(h,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,u),u.ta.push(e),e.sa(t.onlineState),u.ea&&e.oa(u.ea)&&ug(t)}async function Aw(i,e){const t=Ne(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.ta.indexOf(e);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function E2(i,e){const t=Ne(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const d of h.ta)d.oa(o)&&(s=!0);h.ea=o}}s&&ug(t)}function A2(i,e,t){const s=Ne(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(t);s.queries.delete(e)}function ug(i){i.ia.forEach(e=>{e.next()})}var hp,NA;(NA=hp||(hp={}))._a="default",NA.Cache="cache";class Tw{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new xo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.key=e}}class Sw{constructor(e){this.key=e}}class T2{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=z0(e),this.wa=new To(this.ya)}get Sa(){return this.fa}ba(e,t){const s=t?t.Da:new CA,o=t?t.wa:this.wa;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,T)=>{const C=o.get(A),D=sf(this.query,T)?T:null,k=!!C&&this.mutatedKeys.has(C.key),G=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;C&&D?C.data.isEqual(D.data)?k!==G&&(s.track({type:3,doc:D}),U=!0):this.va(C,D)||(s.track({type:2,doc:D}),U=!0,(p&&this.ya(D,p)>0||g&&this.ya(D,g)<0)&&(d=!0)):!C&&D?(s.track({type:0,doc:D}),U=!0):C&&!D&&(s.track({type:1,doc:C}),U=!0,(p||g)&&(d=!0)),U&&(D?(h=h.add(D),u=G?u.add(A):u.delete(A)):(h=h.delete(A),u=u.delete(A)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const A=this.query.limitType==="F"?h.last():h.first();h=h.delete(A.key),u=u.delete(A.key),s.track({type:1,doc:A})}return{wa:h,Da:s,ls:d,mutatedKeys:u}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((A,T)=>function(D,k){const G=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return G(D)-G(k)}(A.type,T.type)||this.ya(A.doc,T.doc)),this.Ca(s),o=o!=null&&o;const d=t&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,h.length!==0||g?{snapshot:new xo(this.query,e.wa,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new CA,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Le(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new Sw(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new ww(s))}),t}Oa(e){this.fa=e.gs,this.pa=Le();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return xo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const cg="SyncEngine";class w2{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class S2{constructor(e){this.key=e,this.Ba=!1}}class b2{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new Ea(d=>B0(d),rf),this.qa=new Map,this.Qa=new Set,this.$a=new ct(we.comparator),this.Ua=new Map,this.Ka=new Jp,this.Wa={},this.Ga=new Map,this.za=No.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function R2(i,e,t=!0){const s=xw(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await bw(s,e,t,!0),o}async function C2(i,e){const t=xw(i);await bw(t,e,!0,!1)}async function bw(i,e,t,s){const o=await QO(i.localStore,Ri(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let d;return s&&(d=await I2(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&mw(i.remoteStore,o),d}async function I2(i,e,t,s,o){i.Ha=(T,C,D)=>async function(G,U,z,H){let Y=U.view.ba(z);Y.ls&&(Y=await AA(G.localStore,U.query,!1).then(({documents:M})=>U.view.ba(M,Y)));const ie=H&&H.targetChanges.get(U.targetId),re=H&&H.targetMismatches.get(U.targetId)!=null,pe=U.view.applyChanges(Y,G.isPrimaryClient,ie,re);return DA(G,U.targetId,pe.Ma),pe.snapshot}(i,T,C,D);const u=await AA(i.localStore,e,!0),h=new T2(e,u.gs),d=h.ba(u.documents),p=Nu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),g=h.applyChanges(d,i.isPrimaryClient,p);DA(i,t,g.Ma);const A=new w2(e,t,h);return i.ka.set(e,A),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),g.snapshot}async function N2(i,e,t){const s=Ne(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(h=>!rf(h,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await up(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&ig(s.remoteStore,o.targetId),fp(s,o.targetId)}).catch(Mo)):(fp(s,o.targetId),await up(s.localStore,o.targetId,!0))}async function x2(i,e){const t=Ne(i),s=t.ka.get(e),o=t.qa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ig(t.remoteStore,s.targetId))}async function D2(i,e,t){const s=L2(i);try{const o=await function(h,d){const p=Ne(h),g=kt.now(),A=d.reduce((D,k)=>D.add(k.key),Le());let T,C;return p.persistence.runTransaction("Locally write mutations","readwrite",D=>{let k=gr(),G=Le();return p.ds.getEntries(D,A).next(U=>{k=U,k.forEach((z,H)=>{H.isValidDocument()||(G=G.add(z))})}).next(()=>p.localDocuments.getOverlayedDocuments(D,k)).next(U=>{T=U;const z=[];for(const H of d){const Y=QD(H,T.get(H.key).overlayedDocument);Y!=null&&z.push(new Aa(H.key,Y,O0(Y.value.mapValue),Ci.exists(!0)))}return p.mutationQueue.addMutationBatch(D,g,z,d)}).next(U=>{C=U;const z=U.applyToLocalDocumentSet(T,G);return p.documentOverlayCache.saveOverlays(D,U.batchId,z)})}).then(()=>({batchId:C.batchId,changes:H0(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let g=h.Wa[h.currentUser.toKey()];g||(g=new ct(ke)),g=g.insert(d,p),h.Wa[h.currentUser.toKey()]=g}(s,o.batchId,t),await Du(s,o.changes),await hf(s.remoteStore)}catch(o){const u=lg(o,"Failed to persist write");t.reject(u)}}async function Rw(i,e){const t=Ne(i);try{const s=await FO(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Ua.get(u);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?We(h.Ba):o.removedDocuments.size>0&&(We(h.Ba),h.Ba=!1))}),await Du(t,s,e)}catch(s){await Mo(s)}}function xA(i,e,t){const s=Ne(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ka.forEach((u,h)=>{const d=h.view.sa(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Ne(h);p.onlineState=d;let g=!1;p.queries.forEach((A,T)=>{for(const C of T.ta)C.sa(d)&&(g=!0)}),g&&ug(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O2(i,e,t){const s=Ne(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ua.get(e),u=o&&o.key;if(u){let h=new ct(we.comparator);h=h.insert(u,tn.newNoDocument(u,Ce.min()));const d=Le().add(u),p=new lf(Ce.min(),new Map,new ct(ke),h,d);await Rw(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),hg(s)}else await up(s.localStore,e,!1).then(()=>fp(s,e,t)).catch(Mo)}async function k2(i,e){const t=Ne(i),s=e.batch.batchId;try{const o=await HO(t.localStore,e);Iw(t,s,null),Cw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Du(t,o)}catch(o){await Mo(o)}}async function M2(i,e,t){const s=Ne(i);try{const o=await function(h,d){const p=Ne(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let A;return p.mutationQueue.lookupMutationBatch(g,d).next(T=>(We(T!==null),A=T.keys(),p.mutationQueue.removeMutationBatch(g,T))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,A,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,A)).next(()=>p.localDocuments.getDocuments(g,A))})}(s.localStore,e);Iw(s,e,t),Cw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Du(s,o)}catch(o){await Mo(o)}}function Cw(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function Iw(i,e,t){const s=Ne(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function fp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),t&&i.La.Ja(s,t);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Nw(i,s)})}function Nw(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(ig(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ua.delete(t),hg(i))}function DA(i,e,t){for(const s of t)s instanceof ww?(i.Ka.addReference(s.key,e),P2(i,s)):s instanceof Sw?(ce(cg,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Nw(i,s.key)):Re()}function P2(i,e){const t=e.key,s=t.path.canonicalString();i.$a.get(t)||i.Qa.has(s)||(ce(cg,"New document in limbo: "+t),i.Qa.add(s),hg(i))}function hg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new we(st.fromString(e)),s=i.za.next();i.Ua.set(s,new S2(t)),i.$a=i.$a.insert(t,s),mw(i.remoteStore,new as(Ri(Qp(t.path)),s,"TargetPurposeLimboResolution",ef.ae))}}async function Du(i,e,t){const s=Ne(i),o=[],u=[],h=[];s.ka.isEmpty()||(s.ka.forEach((d,p)=>{h.push(s.Ha(p,e,t).then(g=>{var A;if((g||t)&&s.isPrimaryClient){const T=g?!g.fromCache:(A=t==null?void 0:t.targetChanges.get(p.targetId))===null||A===void 0?void 0:A.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){o.push(g);const T=tg.Yi(p.targetId,g);u.push(T)}}))}),await Promise.all(h),s.La.p_(o),await async function(p,g){const A=Ne(p);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ee.forEach(g,C=>ee.forEach(C.Hi,D=>A.persistence.referenceDelegate.addReference(T,C.targetId,D)).next(()=>ee.forEach(C.Ji,D=>A.persistence.referenceDelegate.removeReference(T,C.targetId,D)))))}catch(T){if(!Po(T))throw T;ce(ng,"Failed to update sequence numbers: "+T)}for(const T of g){const C=T.targetId;if(!T.fromCache){const D=A.Ts.get(C),k=D.snapshotVersion,G=D.withLastLimboFreeSnapshotVersion(k);A.Ts=A.Ts.insert(C,G)}}}(s.localStore,u))}async function U2(i,e){const t=Ne(i);if(!t.currentUser.isEqual(e)){ce(cg,"User change. New user:",e.toKey());const s=await cw(t.localStore,e);t.currentUser=e,function(u,h){u.Ga.forEach(d=>{d.forEach(p=>{p.reject(new he(J.CANCELLED,h))})}),u.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(t,s.Rs)}}function V2(i,e){const t=Ne(i),s=t.Ua.get(e);if(s&&s.Ba)return Le().add(s.key);{let o=Le();const u=t.qa.get(e);if(!u)return o;for(const h of u){const d=t.ka.get(h);o=o.unionWith(d.view.Sa)}return o}}function xw(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O2.bind(null,e),e.La.p_=E2.bind(null,e.eventManager),e.La.Ja=A2.bind(null,e.eventManager),e}function L2(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M2.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return qO(this.persistence,new jO,e.initialUser,this.serializer)}Xa(e){return new uw(eg.ri,this.serializer)}Za(e){return new XO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class j2 extends Gh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){We(this.persistence.referenceDelegate instanceof Hh);const s=this.persistence.referenceDelegate.garbageCollector;return new SO(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new uw(s=>Hh.ri(s,t),this.serializer)}}class dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xA(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=U2.bind(null,this.syncEngine),await y2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v2}()}createDatastore(e){const t=uf(e.databaseInfo.databaseId),s=function(u){return new e2(u)}(e.databaseInfo);return function(u,h,d,p){return new r2(u,h,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,h,d){return new a2(s,o,u,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>xA(this.syncEngine,t,0),function(){return SA.D()?new SA:new $O}())}createSyncEngine(e,t){return function(o,u,h,d,p,g,A){const T=new b2(o,u,h,d,p,g);return A&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=Ne(o);ce(ya,"RemoteStore shutting down."),u.W_.add(5),await xu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dp.provider={build:()=>new dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class B2{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=T0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{ce(_s,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(ce(_s,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=lg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Lm(i,e){i.asyncQueue.verifyOperationInProgress(),ce(_s,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await cw(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function OA(i,e){i.asyncQueue.verifyOperationInProgress();const t=await z2(i);ce(_s,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>RA(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>RA(e.remoteStore,o)),i._onlineComponents=e}async function z2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(_s,"Using user provided OfflineComponentProvider");try{await Lm(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;bo("Error using user provided cache. Falling back to memory cache: "+t),await Lm(i,new Gh)}}else ce(_s,"Using default OfflineComponentProvider"),await Lm(i,new j2(void 0));return i._offlineComponents}async function Ow(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(_s,"Using user provided OnlineComponentProvider"),await OA(i,i._uninitializedComponentsProvider._online)):(ce(_s,"Using default OnlineComponentProvider"),await OA(i,new dp))),i._onlineComponents}function q2(i){return Ow(i).then(e=>e.syncEngine)}async function kw(i){const e=await Ow(i),t=e.eventManager;return t.onListen=R2.bind(null,e.syncEngine),t.onUnlisten=N2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=x2.bind(null,e.syncEngine),t}function H2(i,e,t={}){const s=new hr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,d,p,g){const A=new Dw({next:C=>{A.su(),h.enqueueAndForget(()=>Aw(u,T));const D=C.docs.has(d);!D&&C.fromCache?g.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&C.fromCache&&p&&p.source==="server"?g.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new Tw(Qp(d.path),A,{includeMetadataChanges:!0,Ta:!0});return Ew(u,T)}(await kw(i),i.asyncQueue,e,t,s)),s.promise}function F2(i,e,t={}){const s=new hr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,d,p,g){const A=new Dw({next:C=>{A.su(),h.enqueueAndForget(()=>Aw(u,T)),C.fromCache&&p.source==="server"?g.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new Tw(d,A,{includeMetadataChanges:!0,Ta:!0});return Ew(u,T)}(await kw(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(i,e,t){if(!t)throw new he(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function G2(i,e,t,s){if(e===!0&&s===!0)throw new he(J.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function MA(i){if(!we.isDocumentKey(i))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function PA(i){if(we.isDocumentKey(i))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ff(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Re()}function vs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(i);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firestore.googleapis.com",UA=!0;class VA{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uw,this.ssl=UA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:UA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TO)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new J1;switch(s.type){case"firstParty":return new iD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=kA.get(t);s&&(ce("ComponentProvider","Removing Datastore"),kA.delete(t),s.terminate())}(this),Promise.resolve()}}function K2(i,e,t,s={}){var o;const u=(i=vs(i,df))._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),d=`${e}:${t}`;u.host!==Uw&&u.host!==d&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:d,ssl:!1,emulatorOptions:s});if(!ha(p,h)&&(i._setSettings(p),s.mockUserToken)){let g,A;if(typeof s.mockUserToken=="string")g=s.mockUserToken,A=en.MOCK_USER;else{g=lT(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new en(T)}i._authCredentials=new eD(new E0(g,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class _n{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class hs extends ws{constructor(e,t,s){super(e,t,Qp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new we(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Ou(i,e,...t){if(i=At(i),Pw("collection","path",e),i instanceof df){const s=st.fromString(e,...t);return PA(s),new hs(i,null,s)}{if(!(i instanceof _n||i instanceof hs))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...t));return PA(s),new hs(i.firestore,null,s)}}function mp(i,e,...t){if(i=At(i),arguments.length===1&&(e=T0.newId()),Pw("doc","path",e),i instanceof df){const s=st.fromString(e,...t);return MA(s),new _n(i,null,new we(s))}{if(!(i instanceof _n||i instanceof hs))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...t));return MA(s),new _n(i.firestore,i instanceof hs?i.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="AsyncQueue";class jA{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new fw(this,"async_queue_retry"),this.Su=()=>{const s=Vm();s&&ce(LA,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const t=Vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new hr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Po(e))throw e;ce(LA,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(s);throw pr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=og.createAndSchedule(this,e,t,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class ku extends df{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new jA,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jA(e),this._firestoreClient=void 0,await e}}}function Q2(i,e){const t=typeof i=="object"?i:Tp(),s=typeof i=="string"?i:Uh,o=$h(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=sT("firestore");u&&K2(o,...u)}return o}function fg(i){if(i._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Y2(i),i._firestoreClient}function Y2(i){var e,t,s;const o=i._freezeSettings(),u=function(d,p,g,A){return new _D(d,p,g,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,Mw(A.experimentalLongPollingOptions),A.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new B2(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(Xt.fromBase64String(e))}catch(t){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Do(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=/^__.*__$/;class $2{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}function Lw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class gg{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Kh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Lw(this.Lu)&&X2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class W2{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||uf(e)}ju(e,t,s,o=!1){return new gg({Lu:e,methodName:t,zu:s,path:Yt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jw(i){const e=i._freezeSettings(),t=uf(i._databaseId);return new W2(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Z2(i,e,t,s,o,u={}){const h=i.ju(u.merge||u.mergeFields?2:0,e,t,o);qw("Data must be an object, but it was:",h,s);const d=Bw(s,h);let p,g;if(u.merge)p=new ni(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const A=[];for(const T of u.mergeFields){const C=ek(e,T,t);if(!h.contains(C))throw new he(J.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);nk(A,C)||A.push(C)}p=new ni(A),g=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,g=h.fieldTransforms;return new $2(new Fn(d),p,g)}function J2(i,e,t,s=!1){return yg(t,i.ju(s?4:3,e))}function yg(i,e){if(zw(i=At(i)))return qw("Unsupported field value:",e,i),Bw(i,e);if(i instanceof Vw)return function(s,o){if(!Lw(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const d of s){let p=yg(d,o.Ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=At(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return zD(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=kt.fromDate(s);return{timestampValue:qh(o.serializer,u)}}if(s instanceof kt){const u=new kt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qh(o.serializer,u)}}if(s instanceof mg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Do)return{bytesValue:tw(o.serializer,s._byteString)};if(s instanceof _n){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Zp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof pg)return function(h,d){return{mapValue:{fields:{[x0]:{stringValue:D0},[Vh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw d.Wu("VectorValues must only contain numeric values.");return Yp(d.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${ff(s)}`)}(i,e)}function Bw(i,e){const t={};return S0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(i,(s,o)=>{const u=yg(o,e.qu(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function zw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof kt||i instanceof mg||i instanceof Do||i instanceof _n||i instanceof Vw||i instanceof pg)}function qw(i,e,t){if(!zw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=ff(t);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function ek(i,e,t){if((e=At(e))instanceof dg)return e._internalPath;if(typeof e=="string")return Hw(i,e);throw Kh("Field path arguments must be of type string or ",i,!1,void 0,t)}const tk=new RegExp("[~\\*/\\[\\]]");function Hw(i,e,t){if(e.search(tk)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new dg(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kh(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(J.INVALID_ARGUMENT,d+i+p)}function nk(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ik(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ik extends Fw{data(){return super.data()}}function mf(i,e){return typeof e=="string"?Hw(i,e):e instanceof dg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class vg extends _g{}function Eg(i,e,...t){let s=[];e instanceof _g&&s.push(e),s=s.concat(t),function(u){const h=u.filter(p=>p instanceof Ag).length,d=u.filter(p=>p instanceof pf).length;if(h>1||h>0&&d>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class pf extends vg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new pf(e,t,s)}_apply(e){const t=this._parse(e);return Kw(e._query,t),new ws(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=jw(e.firestore);return function(u,h,d,p,g,A,T){let C;if(g.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){zA(T,A);const k=[];for(const G of T)k.push(BA(p,u,G));C={arrayValue:{values:k}}}else C=BA(p,u,T)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||zA(T,A),C=J2(d,h,T,A==="in"||A==="not-in");return Rt.create(g,A,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function sk(i,e,t){const s=e,o=mf("where",i);return pf._create(o,s,t)}class Ag extends _g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ag(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const d=u.getFlattenedFilters();for(const p of d)Kw(h,p),h=rp(h,p)}(e._query,t),new ws(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tg extends vg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tg(e,t)}_apply(e){const t=function(o,u,h){if(o.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(u,h)}(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new Uo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function wg(i,e="asc"){const t=e,s=mf("orderBy",i);return Tg._create(s,t)}class Sg extends vg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Sg(e,t,s)}_apply(e){return new ws(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function Gw(i){return Sg._create("limit",i,"F")}function BA(i,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j0(e)&&t.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!we.isDocumentKey(s))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return nA(i,new we(s))}if(t instanceof _n)return nA(i,t._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function zA(i,e){if(!Array.isArray(i)||i.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kw(i,e){const t=function(o,u){for(const h of o)for(const d of h.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ak{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return va(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Vh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>Et(h.doubleValue));return new pg(u)}convertGeoPoint(e){return new mg(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=nf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const t=ms(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);We(ow(s));const o=new pu(s.get(1),s.get(3)),u=new we(s.popFirst(5));return o.isEqual(t)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qw extends Fw{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(mf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Sh extends Qw{data(e={}){return super.data(e)}}class lk{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Sh(this._firestore,this._userDataWriter,s.key,s,new tu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new Sh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new tu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>u||d.type!==3).map(d=>{const p=new Sh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new tu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,A=-1;return d.type!==0&&(g=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),A=h.indexOf(d.doc.key)),{type:uk(d.type),doc:p,oldIndex:g,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(i){i=vs(i,_n);const e=vs(i.firestore,ku);return H2(fg(e),i._key).then(t=>hk(e,i,t))}class Yw extends ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,t)}}function gf(i){i=vs(i,ws);const e=vs(i.firestore,ku),t=fg(e),s=new Yw(e);return rk(i._query),F2(t,i._query).then(o=>new lk(e,s,i,o))}function Xw(i,e,t){i=vs(i,_n);const s=vs(i.firestore,ku),o=ok(i.converter,e,t);return $w(s,[Z2(jw(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Ci.none())])}function bg(i){return $w(vs(i.firestore,ku),[new Xp(i._key,Ci.none())])}function $w(i,e){return function(s,o){const u=new hr;return s.asyncQueue.enqueueAndForget(async()=>D2(await q2(s),o,u)),u.promise}(fg(i),e)}function hk(i,e,t){const s=t.docs.get(e._key),o=new Yw(i);return new Qw(i,o,e._key,s,new tu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ko=o})(_a),fa(new fs("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),d=new ku(new tD(s.getProvider("auth-internal")),new rD(h,s.getProvider("app-check-internal")),function(g,A){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(g.options.projectId,A)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),Si(FE,GE,e),Si(FE,GE,"esm2017")})();const fk={apiKey:"AIzaSyDGZi1uR3vFV4hm1MhV8eVrs7kmuqxy_Ag",authDomain:"gemini-59757.firebaseapp.com",projectId:"gemini-59757",storageBucket:"gemini-59757.appspot.com",messagingSenderId:"654263215286",appId:"1:654263215286:web:ceb4f120b21b9e3b28b217"};let hh,mn,yf,Es;try{hh=hT(fk),mn=Bx(hh),yf=X1(hh),Es=Q2(hh),console.log("Firebase initialized successfully")}catch(i){console.error("Error initializing Firebase:",i)}const _f="users",vf="chats",Qh=async(i,e)=>{try{if(!i)return console.error("Cannot save chat: No user ID provided"),null;console.log(`Saving chat for user ${i}:`,e.id);const t=Ou(Es,_f,i,vf),s=mp(t,e.id),o={...e,userId:i,timestamp:e.timestamp||new Date().toISOString()};return await Xw(s,o),console.log("Chat saved successfully:",e.id),e.id}catch(t){return console.error("Error saving chat:",t),null}},Ww=async i=>{try{if(!i)return console.error("Cannot get chats: No user ID provided"),[];console.log(`Retrieving chats for user: ${i}`);const e=Ou(Es,_f,i,vf),t=Eg(e,wg("timestamp","desc"),Gw(5)),s=await gf(t),o=[];return s.forEach(u=>{o.push(u.data())}),console.log(`Retrieved ${o.length} chats for user: ${i}`),o}catch(e){return console.error("Error getting user chats:",e),[]}},pp=async i=>{try{if(!i){console.error("Cannot cleanup chats: No user ID provided");return}console.log(`Cleaning up old chats for user: ${i}`);const e=Ou(Es,_f,i,vf),t=Eg(e,wg("timestamp","desc")),s=await gf(t);if(s.size>5){const o=Array.from(s.docs).slice(5);console.log(`Deleting ${o.length} old chats for user: ${i}`);for(const u of o)await bg(u.ref),console.log(`Deleted chat: ${u.id}`)}}catch(e){console.error("Error cleaning up old chats:",e)}},dk=async i=>{try{if(!i){console.error("Cannot delete chats: No user ID provided");return}console.log(`Deleting all chats for user: ${i}`);const e=Ou(Es,_f,i,vf),t=await gf(e);let s=0;for(const o of t.docs)await bg(o.ref),s++;console.log(`Deleted ${s} chats for user: ${i}`)}catch(e){console.error("Error deleting user chats:",e)}},mk=async i=>{try{if(!i){console.error("Cannot migrate chats: No user ID provided");return}console.log(`Migrating chats for user: ${i}`);const e=Eg(Ou(Es,"chats"),sk("userId","==",i),wg("timestamp","desc"),Gw(5)),t=await gf(e);if(t.size===0){console.log(`No chats found to migrate for user: ${i}`);return}console.log(`Found ${t.size} chats to migrate for user: ${i}`);for(const s of t.docs){const o=s.data();await Qh(i,o),await bg(s.ref)}console.log(`Migration completed for user: ${i}`)}catch(e){console.error("Error migrating user chats:",e)}},bh=[],pk=i=>typeof i!="function"?(console.error("addUserChangeListener requires a callback function"),()=>{}):(bh.push(i),setTimeout(()=>i(null),0),()=>{const e=bh.indexOf(i);e!==-1&&bh.splice(e,1)}),qA=(i,e)=>{console.log(`Manually dispatching user change: ${i||"none"} -> ${e||"none"}`),e!==i&&gk(e)},gk=i=>{bh.forEach(e=>{try{e(i)}catch(t){console.error("Error in user change listener:",t)}})},Zw=V.createContext();function Ss(){return V.useContext(Zw)}function yk({children:i}){const[e,t]=V.useState(null),[s,o]=V.useState(!0),[u,h]=V.useState(null),d=V.useRef(null);async function p(U,z){try{const H=await wN(mn,U,z);return localStorage.setItem("currentUserId",H.user.uid),H}catch(H){throw console.error("Signup error:",H),H}}async function g(U,z){try{const H=await SN(mn,U,z);return localStorage.setItem("currentUserId",H.user.uid),H}catch(H){throw console.error("Login error:",H),H}}async function A(){try{const U=new sr,z=await xE(mn,U);return localStorage.setItem("currentUserId",z.user.uid),z}catch(U){throw console.error("Google login error:",U),U}}async function T(){try{const U=new ar,z=await xE(mn,U);return localStorage.setItem("currentUserId",z.user.uid),z}catch(U){throw console.error("GitHub login error:",U),U}}async function C(){var U;try{const z=(U=mn.currentUser)==null?void 0:U.uid;return localStorage.removeItem("userProfilePic"),localStorage.removeItem("userName"),localStorage.removeItem("currentUserId"),await xN(mn),t(null),h(null),qA(z,null),console.log("User logged out successfully"),!0}catch(z){throw console.error("Error during logout:",z),z}}async function D(U,z){if(!U)return console.error("No file provided for upload"),{error:"No file provided for upload"};try{console.log("Starting profile picture upload for user:",z),console.log("File info:",U.name,U.type,U.size);const H=new Date().getTime(),Y=U.name.split(".").pop(),ie=`user_${z}_${H}.${Y}`,re=Bp(yf,`Profiles/${ie}`);console.log("Storage reference created for:",ie);let pe;try{const b=await U.arrayBuffer();pe=new Blob([b],{type:U.type}),console.log("File converted to blob successfully, size:",pe.size)}catch(b){console.error("Error converting file to blob:",b),pe=U}console.log("Uploading file...");const M=await d0(re,pe);console.log("File uploaded successfully:",M.metadata.fullPath),console.log("Getting download URL...");const R=await jp(re);if(console.log("Download URL obtained:",R),mn.currentUser){console.log("Updating user profile in Auth");try{await RN(mn.currentUser,{photoURL:R}),console.log("Auth profile updated successfully")}catch(b){console.error("Error updating Auth profile:",b)}}try{console.log("Storing profile picture URL in Firestore"),await Xw(mp(Es,"userProfiles",z),{photoURL:R,lastUpdated:new Date().toISOString()},{merge:!0}),console.log("Firestore document updated successfully")}catch(b){console.error("Error updating Firestore:",b)}return h(R),console.log("Profile picture update complete"),R}catch(H){console.error("Error uploading profile picture:",H),console.error("Error details:",H.code,H.message);let Y=H.message||"Failed to upload profile picture";return H.code==="storage/unauthorized"?Y="You don't have permission to upload files. Check Firebase Storage rules.":H.code==="storage/canceled"?Y="Upload was canceled":H.code==="storage/unknown"?Y="Unknown error occurred during upload. Please try again.":H.code==="storage/quota-exceeded"&&(Y="Storage quota exceeded. Contact the administrator."),{error:Y}}}async function k(U){try{if(mn.currentUser&&mn.currentUser.photoURL)return h(mn.currentUser.photoURL),mn.currentUser.photoURL;const z=await ck(mp(Es,"userProfiles",U));return z.exists()&&z.data().photoURL?(h(z.data().photoURL),z.data().photoURL):null}catch(z){return console.error("Error getting profile picture:",z),null}}V.useEffect(()=>NN(mn,async z=>{const H=d.current,Y=(z==null?void 0:z.uid)||null;H!==Y&&(console.log(`Auth state changed: ${H||"none"} -> ${Y||"none"}`),d.current=Y,qA(H,Y),Y?localStorage.setItem("currentUserId",Y):localStorage.removeItem("currentUserId")),t(z),z?await k(z.uid):h(null),o(!1)}),[]);const G={currentUser:e,userProfilePic:u,signup:p,login:g,loginWithGoogle:A,loginWithGithub:T,logout:C,uploadProfilePicture:D,getProfilePicture:k};return v.jsx(Zw.Provider,{value:G,children:!s&&i})}const wa=V.createContext(),_k=i=>{const{currentUser:e}=Ss()||{},[t,s]=V.useState(""),[o,u]=V.useState(""),[h,d]=V.useState([]),[p,g]=V.useState(!1),[A,T]=V.useState(!1),[C,D]=V.useState(""),[k,G]=V.useState("User"),[U,z]=V.useState(null),[H,Y]=V.useState([]),[ie,re]=V.useState([]),[pe,M]=V.useState(null),[R,b]=V.useState(null),[I,O]=V.useState(!1),[j,N]=V.useState(!1),[Be,et]=V.useState(!1),ae=V.useRef(null),_e=V.useCallback(()=>{console.log("Resetting all chat data"),re([]),Y([]),M(null),g(!1),oE()},[]),ve=V.useCallback(async de=>{if(!de){console.log("Cannot load chats: No user ID provided"),_e();return}try{N(!0),console.log("Loading chats for user:",de),await mk(de);const me=await Ww(de);if(me&&me.length>0){const De=me.sort((Xe,ze)=>new Date(ze.timestamp)-new Date(Xe.timestamp));Y(De),console.log(`Loaded ${De.length} chats for user ${de}`)}else Y([]),console.log(`No chats found for user ${de}`)}catch(me){console.error("Error loading user chats:",me),Y([])}finally{N(!1)}},[_e]);V.useEffect(()=>{const me=pk((De,Xe)=>{console.log(`User change detected in Context: ${De||"none"} -> ${Xe||"none"}`),_e(),Xe&&ve(Xe)});return()=>{me()}},[_e,ve]);const ge=V.useCallback(()=>{if(!k||k==="User")return"U";const de=k.trim().split(" ");return de.length===1?de[0].charAt(0).toUpperCase():(de[0].charAt(0)+de[de.length-1].charAt(0)).toUpperCase()},[k]);V.useEffect(()=>{(()=>{const me=localStorage.getItem("theme");me&&O(me==="dark");const De=localStorage.getItem("userName");De&&G(De);const Xe=localStorage.getItem("userProfilePic");Xe&&z(Xe)})()},[]),V.useEffect(()=>{(async()=>{const me=(e==null?void 0:e.uid)||null,De=ae.current;De!==me&&(console.log(`User changed: ${De||"none"} -> ${me||"none"}`),_e(),ae.current=me,me&&await ve(me))})()},[e,_e,ve]),V.useEffect(()=>{I?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme"),localStorage.setItem("theme",I?"dark":"light")},[I]);const P=V.useCallback(()=>{O(de=>!de)},[]),te=V.useCallback((de,me)=>{setTimeout(function(){D(De=>De+me)},75*de)},[]),Ee=V.useCallback(async()=>{var de,me;if(T(!1),g(!1),ie.length>0){const De=Date.now().toString(),Xe={id:De,title:((me=(de=ie[0])==null?void 0:de.content)==null?void 0:me.slice(0,30))||"New Chat",messages:[...ie],timestamp:new Date().toISOString()};if(Y(ze=>[Xe,...ze]),M(De),e!=null&&e.uid)try{await Qh(e.uid,Xe),await pp(e.uid)}catch(ze){console.error("Error saving chat to Firebase:",ze)}}re([]),b(null),oE()},[ie,e]),oe=V.useCallback(de=>{const me=H.find(De=>De.id===de);me&&(re(me.messages),M(de),g(!0))},[H]),le=V.useCallback(de=>{de&&b(de)},[]),ue=V.useCallback(()=>{b(null)},[]),fe=V.useCallback(de=>{z(de),de?localStorage.setItem("userProfilePic",de):localStorage.removeItem("userProfilePic")},[]),Ue={prevPrompts:h,setPrevPrompts:d,onSent:async de=>{D(""),T(!0),g(!0);let me=de;if(de===void 0?(me=t,ie.length===0&&d(ze=>[...ze,t])):ie.length===0&&d(ze=>[...ze,de]),!me.trim()&&!R){T(!1);return}console.log("Sending prompt to AI:",me),u(me);let De=me;const Xe=[...ie,{role:"user",content:De,hasImage:!!R,imageUrl:R?URL.createObjectURL(R):null,timestamp:new Date().toISOString()}];re(Xe);try{let ze;const Kn=R?null:FR(me,{userName:k});Kn?(ze=Kn,console.log("Using custom response:",ze)):R?(ze=await zR(me,R),b(null)):ze=await qR(me,Xe);const Qn=[...Xe,{role:"model",content:ze,timestamp:new Date().toISOString()}];if(re(Qn),ie.length===0&&(e!=null&&e.uid)){const ht=Date.now().toString(),Yn={id:ht,title:De.slice(0,30)||"New Chat",messages:Qn,timestamp:new Date().toISOString()};Y(Cs=>[Yn,...Cs]),M(ht);try{await Qh(e.uid,Yn),await pp(e.uid)}catch(Cs){console.error("Error saving new chat to Firebase:",Cs)}}let vn=ze.split("**"),Oi="";for(let ht=0;ht<vn.length;ht++)ht===0||ht%2!==1?Oi+=vn[ht]:Oi+="<b>"+vn[ht]+"</b>";let ki=Oi.split("*").join("</br>").split(" ");for(let ht=0;ht<ki.length;ht++){const Yn=ki[ht];te(ht,Yn+" ")}}catch(ze){console.error("Error in chat:",ze),D("Sorry, there was an error processing your request. Please try again.")}finally{T(!1),s("")}},setRecentPrompt:u,recentPrompt:o,showResult:p,loading:A,resultData:C,input:t,setInput:s,newChat:Ee,loadChat:oe,userName:k,setUserName:G,getUserInitials:ge,userProfilePic:U,updateUserProfilePic:fe,currentChat:ie,chatHistory:H,activeChat:pe,handleImageUpload:le,selectedImage:R,removeImage:ue,isDarkTheme:I,toggleTheme:P,isLoadingChats:j,isMigrating:Be};return v.jsx(wa.Provider,{value:Ue,children:i.children})};var Yl={},HA;function vk(){if(HA)return Yl;HA=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.parse=h,Yl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function h(C,D){const k=new u,G=C.length;if(G<2)return k;const U=(D==null?void 0:D.decode)||A;let z=0;do{const H=C.indexOf("=",z);if(H===-1)break;const Y=C.indexOf(";",z),ie=Y===-1?G:Y;if(H>ie){z=C.lastIndexOf(";",H-1)+1;continue}const re=d(C,z,H),pe=p(C,H,re),M=C.slice(re,pe);if(k[M]===void 0){let R=d(C,H+1,ie),b=p(C,ie,R);const I=U(C.slice(R,b));k[M]=I}z=ie+1}while(z<G);return k}function d(C,D,k){do{const G=C.charCodeAt(D);if(G!==32&&G!==9)return D}while(++D<k);return k}function p(C,D,k){for(;D>k;){const G=C.charCodeAt(--D);if(G!==32&&G!==9)return D+1}return k}function g(C,D,k){const G=(k==null?void 0:k.encode)||encodeURIComponent;if(!i.test(C))throw new TypeError(`argument name is invalid: ${C}`);const U=G(D);if(!e.test(U))throw new TypeError(`argument val is invalid: ${D}`);let z=C+"="+U;if(!k)return z;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);z+="; Max-Age="+k.maxAge}if(k.domain){if(!t.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);z+="; Domain="+k.domain}if(k.path){if(!s.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);z+="; Path="+k.path}if(k.expires){if(!T(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);z+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(z+="; HttpOnly"),k.secure&&(z+="; Secure"),k.partitioned&&(z+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return z}function A(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function T(C){return o.call(C)==="[object Date]"}return Yl}vk();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var FA="popstate";function Ek(i={}){function e(s,o){let{pathname:u,search:h,hash:d}=s.location;return gp("",{pathname:u,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Eu(o)}return Tk(e,t,null,i)}function at(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function si(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ak(){return Math.random().toString(36).substring(2,10)}function GA(i,e){return{usr:i.state,key:i.key,idx:e}}function gp(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Lo(e):e,state:t,key:e&&e.key||s||Ak()}}function Eu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Lo(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Tk(i,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,d="POP",p=null,g=A();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function A(){return(h.state||{idx:null}).idx}function T(){d="POP";let U=A(),z=U==null?null:U-g;g=U,p&&p({action:d,location:G.location,delta:z})}function C(U,z){d="PUSH";let H=gp(G.location,U,z);g=A()+1;let Y=GA(H,g),ie=G.createHref(H);try{h.pushState(Y,"",ie)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;o.location.assign(ie)}u&&p&&p({action:d,location:G.location,delta:1})}function D(U,z){d="REPLACE";let H=gp(G.location,U,z);g=A();let Y=GA(H,g),ie=G.createHref(H);h.replaceState(Y,"",ie),u&&p&&p({action:d,location:G.location,delta:0})}function k(U){let z=o.location.origin!=="null"?o.location.origin:o.location.href,H=typeof U=="string"?U:Eu(U);return H=H.replace(/ $/,"%20"),at(z,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,z)}let G={get action(){return d},get location(){return i(o,h)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(FA,T),p=U,()=>{o.removeEventListener(FA,T),p=null}},createHref(U){return e(o,U)},createURL:k,encodeLocation(U){let z=k(U);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:C,replace:D,go(U){return h.go(U)}};return G}function Jw(i,e,t="/"){return wk(i,e,t,!1)}function wk(i,e,t,s){let o=typeof e=="string"?Lo(e):e,u=yr(o.pathname||"/",t);if(u==null)return null;let h=eS(i);Sk(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let g=Pk(u);d=kk(h[p],g,s)}return d}function eS(i,e=[],t=[],s=""){let o=(u,h,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(at(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=fr([s,p.relativePath]),A=t.concat(p);u.children&&u.children.length>0&&(at(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),eS(u.children,e,A,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:Dk(g,u.index),routesMeta:A})};return i.forEach((u,h)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))o(u,h);else for(let p of tS(u.path))o(u,h,p)}),e}function tS(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=tS(s.join("/")),d=[];return d.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&d.push(...h),d.map(p=>i.startsWith("/")&&p===""?"/":p)}function Sk(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:Ok(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var bk=/^:[\w-]+$/,Rk=3,Ck=2,Ik=1,Nk=10,xk=-2,KA=i=>i==="*";function Dk(i,e){let t=i.split("/"),s=t.length;return t.some(KA)&&(s+=xk),e&&(s+=Ck),t.filter(o=>!KA(o)).reduce((o,u)=>o+(bk.test(u)?Rk:u===""?Ik:Nk),s)}function Ok(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function kk(i,e,t=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let d=0;d<s.length;++d){let p=s[d],g=d===s.length-1,A=u==="/"?e:e.slice(u.length)||"/",T=Yh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},A),C=p.route;if(!T&&g&&t&&!s[s.length-1].route.index&&(T=Yh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},A)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:fr([u,T.pathname]),pathnameBase:jk(fr([u,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(u=fr([u,T.pathnameBase]))}return h}function Yh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=Mk(i.path,i.caseSensitive,i.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((g,{paramName:A,isOptional:T},C)=>{if(A==="*"){let k=d[C]||"";h=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const D=d[C];return T&&!D?g[A]=void 0:g[A]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function Mk(i,e=!1,t=!0){si(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Pk(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function yr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function Uk(i,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof i=="string"?Lo(i):i;return{pathname:t?t.startsWith("/")?t:Vk(t,e):e,search:Bk(s),hash:zk(o)}}function Vk(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function jm(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lk(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rg(i){let e=Lk(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Cg(i,e,t,s=!1){let o;typeof i=="string"?o=Lo(i):(o={...i},at(!o.pathname||!o.pathname.includes("?"),jm("?","pathname","search",o)),at(!o.pathname||!o.pathname.includes("#"),jm("#","pathname","hash",o)),at(!o.search||!o.search.includes("#"),jm("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,d;if(h==null)d=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),T-=1;o.pathname=C.join("/")}d=T>=0?e[T]:"/"}let p=Uk(o,d),g=h&&h!=="/"&&h.endsWith("/"),A=(u||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||A)&&(p.pathname+="/"),p}var fr=i=>i.join("/").replace(/\/\/+/g,"/"),jk=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Bk=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,zk=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function qk(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var nS=["POST","PUT","PATCH","DELETE"];new Set(nS);var Hk=["GET",...nS];new Set(Hk);var jo=V.createContext(null);jo.displayName="DataRouter";var Ef=V.createContext(null);Ef.displayName="DataRouterState";var iS=V.createContext({isTransitioning:!1});iS.displayName="ViewTransition";var Fk=V.createContext(new Map);Fk.displayName="Fetchers";var Gk=V.createContext(null);Gk.displayName="Await";var ai=V.createContext(null);ai.displayName="Navigation";var Mu=V.createContext(null);Mu.displayName="Location";var Di=V.createContext({outlet:null,matches:[],isDataRoute:!1});Di.displayName="Route";var Ig=V.createContext(null);Ig.displayName="RouteError";function Kk(i,{relative:e}={}){at(Bo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=V.useContext(ai),{hash:o,pathname:u,search:h}=Pu(i,{relative:e}),d=u;return t!=="/"&&(d=u==="/"?t:fr([t,u])),s.createHref({pathname:d,search:h,hash:o})}function Bo(){return V.useContext(Mu)!=null}function bs(){return at(Bo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Mu).location}var rS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sS(i){V.useContext(ai).static||V.useLayoutEffect(i)}function vr(){let{isDataRoute:i}=V.useContext(Di);return i?sM():Qk()}function Qk(){at(Bo(),"useNavigate() may be used only in the context of a <Router> component.");let i=V.useContext(jo),{basename:e,navigator:t}=V.useContext(ai),{matches:s}=V.useContext(Di),{pathname:o}=bs(),u=JSON.stringify(Rg(s)),h=V.useRef(!1);return sS(()=>{h.current=!0}),V.useCallback((p,g={})=>{if(si(h.current,rS),!h.current)return;if(typeof p=="number"){t.go(p);return}let A=Cg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:fr([e,A.pathname])),(g.replace?t.replace:t.push)(A,g.state,g)},[e,t,u,o,i])}V.createContext(null);function Pu(i,{relative:e}={}){let{matches:t}=V.useContext(Di),{pathname:s}=bs(),o=JSON.stringify(Rg(t));return V.useMemo(()=>Cg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function Yk(i,e){return aS(i,e)}function aS(i,e,t,s){var H;at(Bo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=V.useContext(ai),{matches:h}=V.useContext(Di),d=h[h.length-1],p=d?d.params:{},g=d?d.pathname:"/",A=d?d.pathnameBase:"/",T=d&&d.route;{let Y=T&&T.path||"";oS(g,!T||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let C=bs(),D;if(e){let Y=typeof e=="string"?Lo(e):e;at(A==="/"||((H=Y.pathname)==null?void 0:H.startsWith(A)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),D=Y}else D=C;let k=D.pathname||"/",G=k;if(A!=="/"){let Y=A.replace(/^\//,"").split("/");G="/"+k.replace(/^\//,"").split("/").slice(Y.length).join("/")}let U=!u&&t&&t.matches&&t.matches.length>0?t.matches:Jw(i,{pathname:G});si(T||U!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),si(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=Jk(U&&U.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:fr([A,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?A:fr([A,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),h,t,s);return e&&z?V.createElement(Mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},z):z}function Xk(){let i=rM(),e=qk(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:o},t):null,h)}var $k=V.createElement(Xk,null),Wk=class extends V.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?V.createElement(Di.Provider,{value:this.props.routeContext},V.createElement(Ig.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zk({routeContext:i,match:e,children:t}){let s=V.useContext(jo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Di.Provider,{value:i},t)}function Jk(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,u=t==null?void 0:t.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);at(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:A,errors:T}=t,C=g.route.loader&&!A.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||C){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,A)=>{let T,C=!1,D=null,k=null;t&&(T=u&&g.route.id?u[g.route.id]:void 0,D=g.route.errorElement||$k,h&&(d<0&&A===0?(oS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,k=null):d===A&&(C=!0,k=g.route.hydrateFallbackElement||null)));let G=e.concat(o.slice(0,A+1)),U=()=>{let z;return T?z=D:C?z=k:g.route.Component?z=V.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=p,V.createElement(Zk,{match:g,routeContext:{outlet:p,matches:G,isDataRoute:t!=null},children:z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||A===0)?V.createElement(Wk,{location:t.location,revalidation:t.revalidation,component:D,error:T,children:U(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):U()},null)}function Ng(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eM(i){let e=V.useContext(jo);return at(e,Ng(i)),e}function tM(i){let e=V.useContext(Ef);return at(e,Ng(i)),e}function nM(i){let e=V.useContext(Di);return at(e,Ng(i)),e}function xg(i){let e=nM(i),t=e.matches[e.matches.length-1];return at(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function iM(){return xg("useRouteId")}function rM(){var s;let i=V.useContext(Ig),e=tM("useRouteError"),t=xg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function sM(){let{router:i}=eM("useNavigate"),e=xg("useNavigate"),t=V.useRef(!1);return sS(()=>{t.current=!0}),V.useCallback(async(o,u={})=>{si(t.current,rS),t.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var QA={};function oS(i,e,t){!e&&!QA[i]&&(QA[i]=!0,si(!1,t))}V.memo(aM);function aM({routes:i,future:e,state:t}){return aS(i,void 0,t,e)}function oM({to:i,replace:e,state:t,relative:s}){at(Bo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(ai);si(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(Di),{pathname:h}=bs(),d=vr(),p=Cg(i,Rg(u),h,s==="path"),g=JSON.stringify(p);return V.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:s})},[d,g,s,e,t]),null}function aa(i){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lM({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){at(!Bo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=Lo(t));let{pathname:p="/",search:g="",hash:A="",state:T=null,key:C="default"}=t,D=V.useMemo(()=>{let k=yr(p,h);return k==null?null:{location:{pathname:k,search:g,hash:A,state:T,key:C},navigationType:s}},[h,p,g,A,T,C,s]);return si(D!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${A}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:V.createElement(ai.Provider,{value:d},V.createElement(Mu.Provider,{children:e,value:D}))}function uM({children:i,location:e}){return Yk(yp(i),e)}function yp(i,e=[]){let t=[];return V.Children.forEach(i,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){t.push.apply(t,yp(s.props.children,u));return}at(s.type===aa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=yp(s.props.children,u)),t.push(h)}),t}var Rh="get",Ch="application/x-www-form-urlencoded";function Af(i){return i!=null&&typeof i.tagName=="string"}function cM(i){return Af(i)&&i.tagName.toLowerCase()==="button"}function hM(i){return Af(i)&&i.tagName.toLowerCase()==="form"}function fM(i){return Af(i)&&i.tagName.toLowerCase()==="input"}function dM(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function mM(i,e){return i.button===0&&(!e||e==="_self")&&!dM(i)}var fh=null;function pM(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var gM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bm(i){return i!=null&&!gM.has(i)?(si(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ch}"`),null):i}function yM(i,e){let t,s,o,u,h;if(hM(i)){let d=i.getAttribute("action");s=d?yr(d,e):null,t=i.getAttribute("method")||Rh,o=Bm(i.getAttribute("enctype"))||Ch,u=new FormData(i)}else if(cM(i)||fM(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||d.getAttribute("action");if(s=p?yr(p,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||Rh,o=Bm(i.getAttribute("formenctype"))||Bm(d.getAttribute("enctype"))||Ch,u=new FormData(d,i),!pM()){let{name:g,type:A,value:T}=i;if(A==="image"){let C=g?`${g}.`:"";u.append(`${C}x`,"0"),u.append(`${C}y`,"0")}else g&&u.append(g,T)}}else{if(Af(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Rh,s=null,o=Ch,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:h}}function Dg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function _M(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vM(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function EM(i,e,t){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await _M(u,t);return h.links?h.links():[]}return[]}));return SM(s.flat(1).filter(vM).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function YA(i,e,t,s,o,u){let h=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var A;return t[g].pathname!==p.pathname||((A=t[g].route.path)==null?void 0:A.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>h(p,g)||d(p,g)):u==="data"?e.filter((p,g)=>{var T;let A=s.routes[p.route.id];if(!A||!A.hasLoader)return!1;if(h(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function AM(i,e,{includeHydrateFallback:t}={}){return TM(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function TM(i){return[...new Set(i)]}function wM(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function SM(i,e){let t=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(wM(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}function bM(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&yr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function lS(){let i=V.useContext(jo);return Dg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function RM(){let i=V.useContext(Ef);return Dg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Og=V.createContext(void 0);Og.displayName="FrameworkContext";function uS(){let i=V.useContext(Og);return Dg(i,"You must render this element inside a <HydratedRouter> element"),i}function CM(i,e){let t=V.useContext(Og),[s,o]=V.useState(!1),[u,h]=V.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:A,onTouchStart:T}=e,C=V.useRef(null);V.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let G=z=>{z.forEach(H=>{h(H.isIntersecting)})},U=new IntersectionObserver(G,{threshold:.5});return C.current&&U.observe(C.current),()=>{U.disconnect()}}},[i]),V.useEffect(()=>{if(s){let G=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(G)}}},[s]);let D=()=>{o(!0)},k=()=>{o(!1),h(!1)};return t?i!=="intent"?[u,C,{}]:[u,C,{onFocus:Xl(d,D),onBlur:Xl(p,k),onMouseEnter:Xl(g,D),onMouseLeave:Xl(A,k),onTouchStart:Xl(T,D)}]:[!1,C,{}]}function Xl(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function IM({page:i,...e}){let{router:t}=lS(),s=V.useMemo(()=>Jw(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?V.createElement(xM,{page:i,matches:s,...e}):null}function NM(i){let{manifest:e,routeModules:t}=uS(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return EM(i,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,t]),s}function xM({page:i,matches:e,...t}){let s=bs(),{manifest:o,routeModules:u}=uS(),{basename:h}=lS(),{loaderData:d,matches:p}=RM(),g=V.useMemo(()=>YA(i,e,p,o,s,"data"),[i,e,p,o,s]),A=V.useMemo(()=>YA(i,e,p,o,s,"assets"),[i,e,p,o,s]),T=V.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let k=new Set,G=!1;if(e.forEach(z=>{var Y;let H=o.routes[z.route.id];!H||!H.hasLoader||(!g.some(ie=>ie.route.id===z.route.id)&&z.route.id in d&&((Y=u[z.route.id])!=null&&Y.shouldRevalidate)||H.hasClientLoader?G=!0:k.add(z.route.id))}),k.size===0)return[];let U=bM(i,h);return G&&k.size>0&&U.searchParams.set("_routes",e.filter(z=>k.has(z.route.id)).map(z=>z.route.id).join(",")),[U.pathname+U.search]},[h,d,s,o,g,e,i,u]),C=V.useMemo(()=>AM(A,o),[A,o]),D=NM(A);return V.createElement(V.Fragment,null,T.map(k=>V.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),C.map(k=>V.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),D.map(({key:k,link:G})=>V.createElement("link",{key:k,...G})))}function DM(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var cS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cS&&(window.__reactRouterVersion="7.3.0")}catch{}function OM({basename:i,children:e,window:t}){let s=V.useRef();s.current==null&&(s.current=Ek({window:t,v5Compat:!0}));let o=s.current,[u,h]=V.useState({action:o.action,location:o.location}),d=V.useCallback(p=>{V.startTransition(()=>h(p))},[h]);return V.useLayoutEffect(()=>o.listen(d),[o,d]),V.createElement(lM,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var hS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tf=V.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:d,target:p,to:g,preventScrollReset:A,viewTransition:T,...C},D){let{basename:k}=V.useContext(ai),G=typeof g=="string"&&hS.test(g),U,z=!1;if(typeof g=="string"&&G&&(U=g,cS))try{let b=new URL(window.location.href),I=g.startsWith("//")?new URL(b.protocol+g):new URL(g),O=yr(I.pathname,k);I.origin===b.origin&&O!=null?g=O+I.search+I.hash:z=!0}catch{si(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=Kk(g,{relative:o}),[Y,ie,re]=CM(s,C),pe=UM(g,{replace:h,state:d,target:p,preventScrollReset:A,relative:o,viewTransition:T});function M(b){e&&e(b),b.defaultPrevented||pe(b)}let R=V.createElement("a",{...C,...re,href:U||H,onClick:z||u?e:M,ref:DM(D,ie),target:p,"data-discover":!G&&t==="render"?"true":void 0});return Y&&!G?V.createElement(V.Fragment,null,R,V.createElement(IM,{page:H})):R});Tf.displayName="Link";var kM=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:d,children:p,...g},A){let T=Pu(h,{relative:g.relative}),C=bs(),D=V.useContext(Ef),{navigator:k,basename:G}=V.useContext(ai),U=D!=null&&zM(T)&&d===!0,z=k.encodeLocation?k.encodeLocation(T).pathname:T.pathname,H=C.pathname,Y=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(H=H.toLowerCase(),Y=Y?Y.toLowerCase():null,z=z.toLowerCase()),Y&&G&&(Y=yr(Y,G)||Y);const ie=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let re=H===z||!o&&H.startsWith(z)&&H.charAt(ie)==="/",pe=Y!=null&&(Y===z||!o&&Y.startsWith(z)&&Y.charAt(z.length)==="/"),M={isActive:re,isPending:pe,isTransitioning:U},R=re?e:void 0,b;typeof s=="function"?b=s(M):b=[s,re?"active":null,pe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(M):u;return V.createElement(Tf,{...g,"aria-current":R,className:b,ref:A,style:I,to:h,viewTransition:d},typeof p=="function"?p(M):p)});kM.displayName="NavLink";var MM=V.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:h=Rh,action:d,onSubmit:p,relative:g,preventScrollReset:A,viewTransition:T,...C},D)=>{let k=jM(),G=BM(d,{relative:g}),U=h.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&hS.test(d),H=Y=>{if(p&&p(Y),Y.defaultPrevented)return;Y.preventDefault();let ie=Y.nativeEvent.submitter,re=(ie==null?void 0:ie.getAttribute("formmethod"))||h;k(ie||Y.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:o,state:u,relative:g,preventScrollReset:A,viewTransition:T})};return V.createElement("form",{ref:D,method:U,action:G,onSubmit:s?p:H,...C,"data-discover":!z&&i==="render"?"true":void 0})});MM.displayName="Form";function PM(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fS(i){let e=V.useContext(jo);return at(e,PM(i)),e}function UM(i,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let d=vr(),p=bs(),g=Pu(i,{relative:u});return V.useCallback(A=>{if(mM(A,e)){A.preventDefault();let T=t!==void 0?t:Eu(p)===Eu(g);d(i,{replace:T,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[p,d,g,t,s,e,i,o,u,h])}var VM=0,LM=()=>`__${String(++VM)}__`;function jM(){let{router:i}=fS("useSubmit"),{basename:e}=V.useContext(ai),t=iM();return V.useCallback(async(s,o={})=>{let{action:u,method:h,encType:d,formData:p,body:g}=yM(s,e);if(o.navigate===!1){let A=o.fetcherKey||LM();await i.fetch(A,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,t])}function BM(i,{relative:e}={}){let{basename:t}=V.useContext(ai),s=V.useContext(Di);at(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Pu(i||".",{relative:e})},h=bs();if(i==null){u.search=h.search;let d=new URLSearchParams(u.search),p=d.getAll("index");if(p.some(A=>A==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let A=d.toString();u.search=A?`?${A}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:fr([t,u.pathname])),Eu(u)}function zM(i,e={}){let t=V.useContext(iS);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=fS("useViewTransitionState"),o=Pu(i,{relative:e.relative});if(!t.isTransitioning)return!1;let u=yr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=yr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Yh(o.pathname,h)!=null||Yh(o.pathname,u)!=null}new TextEncoder;const qM=()=>{const i=vr(),[e,t]=V.useState(!1),{onSent:s,prevPrompts:o,setRecentPrompt:u,newChat:h,chatHistory:d,loadChat:p,activeChat:g,setInput:A,isLoadingChats:T}=V.useContext(wa),{logout:C,currentUser:D}=Ss(),k=async()=>{try{await C()}catch(H){console.error("Failed to log out:",H)}},G=()=>{h(),A("What can Phoenix do for me? Show me some examples and features.")},U=()=>{!g&&d.length>0?p(d[0].id):d.length===0&&(h(),A("Show me a summary of what we can do together."))},z=()=>{i("/profile")};return v.jsxs("div",{className:"sidebar",children:[v.jsxs("div",{className:"top",children:[v.jsx("img",{onClick:()=>t(H=>!H),src:pn.menu_icon,alt:"",className:"menu"}),v.jsxs("div",{onClick:()=>h(),className:"new-chat",children:[v.jsx("img",{src:pn.plus_icon,alt:""}),e?v.jsx("p",{children:"New Chat"}):null]}),e&&v.jsx(v.Fragment,{children:T?v.jsxs("div",{className:"recent",children:[v.jsx("p",{className:"recent-title",children:"Loading chats..."}),v.jsxs("div",{className:"chat-loader",children:[v.jsx("div",{className:"loader-dot"}),v.jsx("div",{className:"loader-dot"}),v.jsx("div",{className:"loader-dot"})]})]}):d.length>0?v.jsxs("div",{className:"recent",children:[v.jsx("p",{className:"recent-title",children:"Chat History (Last 5)"}),d.map(H=>v.jsxs("div",{onClick:()=>p(H.id),className:`recent-entry ${g===H.id?"active-chat":""}`,children:[v.jsx("img",{src:pn.message_icon,alt:""}),v.jsxs("p",{children:[H.title.slice(0,18),"..."]})]},H.id))]}):D?v.jsxs("div",{className:"recent",children:[v.jsx("p",{className:"recent-title",children:"No chat history"}),v.jsx("p",{className:"no-chats-message",children:"Start a new chat to see it here"})]}):null})]}),v.jsxs("div",{className:"bottom",children:[v.jsxs("div",{className:"bottom-item recent-entry",onClick:G,children:[v.jsx("img",{src:pn.question_icon,alt:""}),e?v.jsx("p",{children:"Help"}):null]}),v.jsxs("div",{className:"bottom-item recent-entry",onClick:U,children:[v.jsx("img",{src:pn.history_icon,alt:""}),e?v.jsx("p",{children:"Activity"}):null]}),v.jsxs("div",{className:"bottom-item recent-entry",onClick:z,children:[v.jsx("img",{src:pn.setting_icon,alt:""}),e?v.jsx("p",{children:"Settings"}):null]}),v.jsxs("div",{className:"bottom-item recent-entry",onClick:k,children:[v.jsx("span",{className:"logout-icon",children:""}),e?v.jsx("p",{children:"Sign Out"}):null]})]})]})},kg=()=>{const i=V.useRef(null),{isDarkTheme:e}=V.useContext(wa);return V.useEffect(()=>{const s=setInterval(()=>{if(!i.current)return;const h=i.current,d=h.getBoundingClientRect(),p=e?4:2;for(let g=0;g<p;g++){const A=document.createElement("div");A.className="phoenix-ember";const T=Math.floor(Math.random()*3);T===1?(A.style.backgroundColor="#ffcc00",A.style.width="2px",A.style.height="2px"):T===2&&(A.style.backgroundColor="#ff3300",A.style.width="4px",A.style.height="4px",A.style.boxShadow="0 0 15px #ff3300, 0 0 25px #ff6600");const C=Math.random()>.5;let D;C?D=d.width*.3+Math.random()*(d.width*.2):D=d.width*.5+Math.random()*(d.width*.2);const k=d.height*.4+Math.random()*(d.height*.3);A.style.left=`${D}px`,A.style.top=`${k}px`;const G=3+Math.random()*4,U=Math.random()*.5;A.style.animation=`ember-float ${G}s ${U}s ease-out forwards`,h.appendChild(A),setTimeout(()=>{h.contains(A)&&h.removeChild(A)},(G+U)*1e3)}},e?150:200),u=setInterval(()=>{if(!i.current)return;const h=i.current,d=h.getBoundingClientRect(),p=document.createElement("div");p.className="phoenix-ember",p.style.width="6px",p.style.height="6px",p.style.backgroundColor="#ff9500",p.style.boxShadow="0 0 20px #ff6d00, 0 0 30px #ff9500, 0 0 40px #ffcc00",p.style.filter="blur(2px)";const g=d.width*.4+Math.random()*(d.width*.2),A=d.height*.4+Math.random()*(d.height*.2);p.style.left=`${g}px`,p.style.top=`${A}px`;const T=5+Math.random()*3;p.style.animation=`ember-float ${T}s ease-out forwards`,h.appendChild(p),setTimeout(()=>{h.contains(p)&&h.removeChild(p)},T*1e3)},e?1500:2e3);return()=>{clearInterval(s),clearInterval(u)}},[e]),v.jsxs("div",{className:"phoenix-wings-container",ref:i,children:[v.jsx("div",{className:"phoenix-wing wing-left"}),v.jsx("div",{className:"phoenix-wing wing-right"})]})},HM=()=>{const i=vr(),{currentUser:e,logout:t,userProfilePic:s}=Ss(),o=V.useRef(null),[u,h]=V.useState(!1),[d,p]=V.useState(""),[g,A]=V.useState(!1),[T,C]=V.useState(!1),{onSent:D,recentPrompt:k,showResult:G,loading:U,resultData:z,setInput:H,input:Y,userName:ie,getUserInitials:re,userProfilePic:pe,currentChat:M,newChat:R,handleImageUpload:b,selectedImage:I,removeImage:O,isDarkTheme:j,toggleTheme:N}=V.useContext(wa),[Be,et]=V.useState(null);V.useEffect(()=>{et(s||pe||null)},[s,pe]);const ae=()=>{g||(A(!0),setTimeout(()=>{C(!0),setTimeout(()=>{R(),A(!1),C(!1)},800)},800))},_e=ue=>{H(ue)},ve=()=>{o.current.click()},ge=ue=>{const fe=ue.target.files[0];fe&&(fe.type==="image/jpeg"||fe.type==="image/png"||fe.type==="image/gif")?b(fe):fe&&alert("Please select a valid image file (JPEG, PNG, or GIF)"),ue.target.value=""},P=()=>{i("/profile")},te=()=>{u?le():oe()},Ee=ue=>{ue&&ue.trim()&&(console.log("Submitting voice command:",ue),D(ue))},oe=()=>{h(!0),p("");const ue=window.SpeechRecognition||window.webkitSpeechRecognition;if(!ue){alert("Your browser doesn't support speech recognition. Try Chrome or Edge."),h(!1);return}const fe=new ue;fe.continuous=!1,fe.interimResults=!0,fe.lang="en-US";let rt="";fe.onstart=()=>{console.log("Voice recognition activated"),rt=""},fe.onresult=de=>{let me="";for(let Xe=de.resultIndex;Xe<de.results.length;Xe++){const ze=de.results[Xe][0].transcript;de.results[Xe].isFinal?rt=ze:me+=ze}const De=rt||me;p(De),H(De),console.log("Speech recognized:",De)},fe.onerror=de=>{console.error("Speech recognition error",de.error),h(!1)},fe.onend=()=>{h(!1),Ee(d)};const Ue=setTimeout(()=>{fe&&fe.stop()},5e3);fe.start(),window.recognitionInstance=fe,window.recognitionTimeout=Ue},le=()=>{window.recognitionInstance&&window.recognitionInstance.stop(),window.recognitionTimeout&&clearTimeout(window.recognitionTimeout),h(!1)};return v.jsxs("div",{className:"main",children:[v.jsx(kg,{}),T&&v.jsx("div",{className:"logo-wings-flash active"}),v.jsxs("div",{className:"nav",children:[v.jsxs("div",{className:"logo-container",onClick:ae,children:[v.jsx("img",{src:wo,alt:"Phoenix Logo",className:`nav-logo ${g?"spinning":""}`}),v.jsx("p",{children:"phoeniX"})]}),v.jsxs("div",{className:"nav-right",children:[v.jsx("div",{className:"theme-toggle",onClick:N,children:j?v.jsx("span",{className:"theme-icon",children:""}):v.jsx("span",{className:"theme-icon",children:""})}),Be?v.jsx("div",{className:"user-profile",onClick:P,children:v.jsx("img",{src:Be,alt:ie,className:"user-profile-pic",title:ie})}):v.jsx("div",{className:"user-initials",onClick:P,title:ie,children:re()})]})]}),v.jsxs("div",{className:"main-container",children:[G?v.jsx("div",{className:"result",children:M.map((ue,fe)=>v.jsxs("div",{className:ue.role==="user"?"result-title":"result-data",children:[ue.role==="user"?Be?v.jsx("img",{src:Be,alt:ie,className:"user-profile-pic"}):v.jsx("div",{className:"user-initials",children:re()}):v.jsx("img",{src:pn.gemini_icon,alt:"Phoenix"}),v.jsx("div",{className:"message-content",children:ue.role==="user"?v.jsxs(v.Fragment,{children:[v.jsx("p",{children:ue.content}),ue.hasImage&&ue.imageUrl&&v.jsx("div",{className:"uploaded-image-container",children:v.jsx("img",{src:ue.imageUrl,alt:"Uploaded",className:"uploaded-image"})})]}):fe===M.length-1&&U?v.jsxs("div",{className:"loader",children:[v.jsx("hr",{}),v.jsx("hr",{}),v.jsx("hr",{})]}):v.jsx("p",{dangerouslySetInnerHTML:{__html:fe===M.length-1?z:ue.content}})})]},fe))}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"greet",children:[v.jsx("p",{children:v.jsxs("span",{children:["Relive, ",ie,"."]})}),v.jsx("p",{children:"Your AI Ally"})]}),v.jsxs("div",{className:"cards",children:[v.jsxs("div",{className:"card",onClick:()=>_e("Suggest beautiful places to see on an upcoming road trip"),children:[v.jsx("p",{children:"Suggest beautiful places to see on an upcoming road trip"}),v.jsx("img",{src:pn.compass_icon,alt:""})]}),v.jsxs("div",{className:"card",onClick:()=>_e("Briefly summarize this concept: urban planning"),children:[v.jsx("p",{children:"Briefly summarize this concept: urban planning"}),v.jsx("img",{src:pn.bulb_icon,alt:""})]}),v.jsxs("div",{className:"card",onClick:()=>_e("Brainstorm team bonding activities for our work retreat"),children:[v.jsx("p",{children:"Brainstorm team bonding activities for our work retreat"}),v.jsx("img",{src:pn.message_icon,alt:""})]}),v.jsxs("div",{className:"card",onClick:()=>_e("Improve the readability of the following code"),children:[v.jsx("p",{children:"Improve the readability of the following code"}),v.jsx("img",{src:pn.code_icon,alt:""})]})]})]}),v.jsxs("div",{className:"main-bottom",children:[v.jsxs("div",{className:`search-box ${u?"listening-active":""}`,children:[v.jsx("input",{onChange:ue=>H(ue.target.value),value:Y,type:"text",placeholder:u?"Listening...":"Enter a prompt here",onKeyDown:ue=>{ue.key==="Enter"&&(Y||I)&&D()}}),v.jsxs("div",{children:[I?v.jsx("div",{className:"image-preview-container",children:v.jsxs("div",{className:"image-preview",children:[v.jsx("img",{src:URL.createObjectURL(I),alt:"Selected",className:"preview-thumbnail"}),v.jsx("button",{className:"remove-image-btn",onClick:O,children:""})]})}):v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"file",ref:o,style:{display:"none"},accept:"image/jpeg,image/png,image/gif",onChange:ge}),v.jsx("img",{src:pn.gallery_icon,alt:"Upload",onClick:ve,style:{cursor:"pointer"}})]}),v.jsx("div",{className:`mic-container ${u?"listening":""}`,onClick:te,children:v.jsx("img",{src:pn.mic_icon,alt:"Voice"})}),Y||I?v.jsx("img",{onClick:()=>D(),src:pn.send_icon,alt:""}):null]})]}),v.jsxs("p",{className:"bottom-info",children:["Phoenix is powerful, but accuracy isn't guaranteeddouble-check responses!        ",v.jsx("br",{})," by~ Karan Trivedi"]})]})]})]})},FM=()=>{const i=vr(),{login:e,loginWithGoogle:t,loginWithGithub:s}=Ss(),{setUserName:o}=V.useContext(wa),[u,h]=V.useState(""),[d,p]=V.useState(""),[g,A]=V.useState(""),[T,C]=V.useState({}),[D,k]=V.useState(!1),[G,U]=V.useState(!1),[z,H]=V.useState({});V.useEffect(()=>{const R=localStorage.getItem("savedCredentials");R&&H(JSON.parse(R))},[]),V.useEffect(()=>{d&&z[d]&&(A(z[d].password),z[d].name&&h(z[d].name))},[d,z]);const Y=R=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R),ie=R=>R.length>=6,re=async R=>{var I;R.preventDefault();const b={};if(Y(d)||(b.email="Invalid email address"),ie(g)||(b.password="Password must be at least 6 characters"),Object.keys(b).length>0){C(b);return}try{if(k(!0),C({}),G){const j={...z,[d]:{password:g,name:u}};localStorage.setItem("savedCredentials",JSON.stringify(j)),H(j)}await e(d,g);const O=u||((I=z[d])==null?void 0:I.name)||d.split("@")[0]||"User";o(O),localStorage.setItem("userName",O),i("/home")}catch(O){C({submit:O.message||"An error occurred during login"})}finally{k(!1)}},pe=async()=>{var R,b,I;try{k(!0),C({});const O=await t(),j=((R=O==null?void 0:O.user)==null?void 0:R.displayName)||((I=(b=O==null?void 0:O.user)==null?void 0:b.email)==null?void 0:I.split("@")[0])||"User";o(j),localStorage.setItem("userName",j),i("/home")}catch(O){C({submit:O.message||"An error occurred during Google sign-in"})}finally{k(!1)}},M=async()=>{var R,b,I;try{k(!0),C({});const O=await s(),j=((R=O==null?void 0:O.user)==null?void 0:R.displayName)||((I=(b=O==null?void 0:O.user)==null?void 0:b.reloadUserInfo)==null?void 0:I.screenName)||"User";o(j),localStorage.setItem("userName",j),i("/home")}catch(O){C({submit:O.message||"An error occurred during GitHub sign-in"})}finally{k(!1)}};return v.jsxs("div",{className:"auth-page",children:[v.jsx(kg,{}),v.jsx("header",{className:"auth-header",children:v.jsxs("div",{className:"logo-container",onClick:()=>i("/"),children:[v.jsx("img",{src:wo,alt:"Phoenix Logo",className:"header-logo"}),v.jsx("h1",{children:"Phoenix"})]})}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-form-container",children:[v.jsx("h2",{children:"Welcome Back"}),v.jsx("p",{className:"auth-subtitle",children:"Sign in to your account to continue"}),v.jsxs("form",{onSubmit:re,className:"auth-form",children:[v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"name",children:"Name"}),v.jsx("input",{id:"name",type:"text",placeholder:"Enter your name",value:u,onChange:R=>h(R.target.value),className:T.name?"error":""}),T.name&&v.jsx("span",{className:"error-message",children:T.name})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"email",children:"Email"}),v.jsx("input",{id:"email",type:"email",placeholder:"Enter your email",value:d,onChange:R=>p(R.target.value),className:T.email?"error":""}),T.email&&v.jsx("span",{className:"error-message",children:T.email})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"password",children:"Password"}),v.jsx("input",{id:"password",type:"password",placeholder:"Enter your password",value:g,onChange:R=>A(R.target.value),className:T.password?"error":""}),T.password&&v.jsx("span",{className:"error-message",children:T.password})]}),v.jsxs("div",{className:"remember-forgot",children:[v.jsxs("label",{className:"remember-me",children:[v.jsx("input",{type:"checkbox",checked:G,onChange:R=>U(R.target.checked)}),"Remember me"]}),v.jsx("a",{href:"/forgot-password",className:"forgot-link",children:"Forgot Password?"})]}),v.jsx("button",{type:"submit",className:"auth-button",disabled:D,children:D?"Signing in...":"Sign In"})]}),T.submit&&v.jsx("div",{className:"error-message submit-error",children:T.submit}),v.jsx("div",{className:"auth-divider",children:v.jsx("span",{children:"OR"})}),v.jsxs("div",{className:"social-login",children:[v.jsxs("button",{className:"google-button",onClick:pe,disabled:D,children:[v.jsx("img",{src:"https://img.icons8.com/color/48/000000/google-logo.png",alt:"Google"}),"Sign in with Google"]}),v.jsxs("button",{className:"github-button",onClick:M,disabled:D,children:[v.jsx("img",{src:"https://img.icons8.com/ios-filled/50/000000/github.png",alt:"GitHub"}),"Sign in with GitHub"]})]}),v.jsxs("div",{className:"auth-footer",children:["Don't have an account?"," ",v.jsx(Tf,{to:"/signup",className:"auth-link",children:"Sign up"})]})]})})]})},GM=()=>{const i=vr(),{signup:e,loginWithGoogle:t,loginWithGithub:s}=Ss(),{setUserName:o}=V.useContext(wa),[u,h]=V.useState(""),[d,p]=V.useState(""),[g,A]=V.useState(""),[T,C]=V.useState(""),[D,k]=V.useState("+1"),[G,U]=V.useState({}),[z,H]=V.useState(!1),Y=I=>I.length>=2,ie=I=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I),re=I=>I.length>=6,pe=I=>/^\d{10}$/.test(I),M=async I=>{I.preventDefault();const O={};if(Y(u)||(O.name="Name must be at least 2 characters"),ie(d)||(O.email="Invalid email address"),re(g)||(O.password="Password must be at least 6 characters"),pe(T)||(O.phone="Invalid phone number"),Object.keys(O).length>0){U(O);return}try{H(!0),U({}),await e(d,g),o(u||"User"),localStorage.setItem("userName",u||"User"),i("/home")}catch(j){U({submit:j.message||"An error occurred during signup"})}finally{H(!1)}},R=async()=>{var I,O,j;try{H(!0),U({});const N=await t(),Be=((I=N==null?void 0:N.user)==null?void 0:I.displayName)||((j=(O=N==null?void 0:N.user)==null?void 0:O.email)==null?void 0:j.split("@")[0])||"User";o(Be),localStorage.setItem("userName",Be),i("/home")}catch(N){U({submit:N.message||"An error occurred during Google sign-in"})}finally{H(!1)}},b=async()=>{var I,O,j;try{H(!0),U({});const N=await s(),Be=((I=N==null?void 0:N.user)==null?void 0:I.displayName)||((j=(O=N==null?void 0:N.user)==null?void 0:O.reloadUserInfo)==null?void 0:j.screenName)||"User";o(Be),localStorage.setItem("userName",Be),i("/home")}catch(N){U({submit:N.message||"An error occurred during GitHub sign-in"})}finally{H(!1)}};return v.jsxs("div",{className:"auth-page",children:[v.jsx(kg,{}),v.jsx("header",{className:"auth-header",children:v.jsxs("div",{className:"logo-container",onClick:()=>i("/"),children:[v.jsx("img",{src:wo,alt:"Phoenix Logo",className:"header-logo"}),v.jsx("h1",{children:"Phoenix"})]})}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-form-container",children:[v.jsx("h2",{children:"Create an Account"}),v.jsx("p",{className:"auth-subtitle",children:"Join Phoenix to start your AI journey"}),v.jsxs("form",{onSubmit:M,className:"auth-form",children:[v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"name",children:"Name"}),v.jsx("input",{id:"name",type:"text",placeholder:"Enter your name",value:u,onChange:I=>h(I.target.value),className:G.name?"error":""}),G.name&&v.jsx("span",{className:"error-message",children:G.name})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"email",children:"Email"}),v.jsx("input",{id:"email",type:"email",placeholder:"Enter your email",value:d,onChange:I=>p(I.target.value),className:G.email?"error":""}),G.email&&v.jsx("span",{className:"error-message",children:G.email})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"password",children:"Password"}),v.jsx("input",{id:"password",type:"password",placeholder:"Create a password",value:g,onChange:I=>A(I.target.value),className:G.password?"error":""}),G.password&&v.jsx("span",{className:"error-message",children:G.password})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"phone",children:"Phone Number"}),v.jsxs("div",{className:"phone-input",children:[v.jsxs("select",{id:"countryCode",value:D,onChange:I=>k(I.target.value),children:[v.jsx("option",{value:"+1",children:"+1 (US)"}),v.jsx("option",{value:"+91",children:"+91 (IN)"})]}),v.jsx("input",{id:"phone",type:"text",placeholder:"Enter your number",value:T,onChange:I=>C(I.target.value),className:G.phone?"error":""})]}),G.phone&&v.jsx("span",{className:"error-message",children:G.phone})]}),v.jsx("button",{type:"submit",className:"auth-button",disabled:z,children:z?"Creating account...":"Sign Up"})]}),G.submit&&v.jsx("div",{className:"error-message submit-error",children:G.submit}),v.jsx("div",{className:"auth-divider",children:v.jsx("span",{children:"OR"})}),v.jsxs("div",{className:"social-login",children:[v.jsxs("button",{className:"google-button",onClick:R,disabled:z,children:[v.jsx("img",{src:"https://img.icons8.com/color/48/000000/google-logo.png",alt:"Google"}),"Sign up with Google"]}),v.jsxs("button",{className:"github-button",onClick:b,disabled:z,children:[v.jsx("img",{src:"https://img.icons8.com/ios-filled/50/000000/github.png",alt:"GitHub"}),"Sign up with GitHub"]})]}),v.jsxs("div",{className:"auth-footer",children:["Already have an account?"," ",v.jsx(Tf,{to:"/login",className:"auth-link",children:"Sign in"})]})]})})]})},KM=async()=>{try{console.log("Starting Firebase Storage test...");const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",t=`Profiles/tests/${`test_${new Date().getTime()}.png`}`;console.log(`Creating reference to test file: ${t}`);const s=Bp(yf,t);console.log("Uploading test data...");const o=await Y1(s,i,"data_url");console.log("Test upload successful:",o),console.log("Getting download URL...");const u=await jp(s);return console.log("Test download URL retrieved:",u),{success:!0,message:"Firebase Storage test passed successfully",downloadURL:u}}catch(i){return console.error("Firebase Storage test failed:",i),{success:!1,message:`Storage test failed: ${i.message}`,error:i}}},QM=async(i,e)=>{if(!i)return console.error("No file provided for direct upload"),{success:!1,message:"No file provided"};try{console.log("Starting direct profile picture upload"),console.log("User ID:",e),console.log("File info:",i.name,i.type,i.size);const t=new Date().getTime(),s=i.name.split(".").pop(),u=`Profiles/${`user_${e}_${t}.${s}`}`;console.log(`Creating reference to file: ${u}`);const h=Bp(yf,u);let d;try{const A=await i.arrayBuffer();d=new Blob([A],{type:i.type}),console.log("File converted to blob successfully, size:",d.size)}catch(A){console.error("Error converting file to blob:",A),d=i}console.log("Directly uploading file...");const p=await d0(h,d);console.log("Direct upload successful:",p),console.log("Getting download URL...");const g=await jp(h);return console.log("Download URL retrieved:",g),{success:!0,message:"Direct upload completed successfully",downloadURL:g}}catch(t){console.error("Direct upload failed:",t),console.error("Error code:",t.code),console.error("Error message:",t.message);let s=t.message;return t.code==="storage/unauthorized"?s="You don't have permission to upload files. Check Firebase Storage rules.":t.code==="storage/canceled"?s="Upload was canceled.":t.code==="storage/unknown"?s="Unknown error occurred during upload.":t.code==="storage/quota-exceeded"&&(s="Storage quota exceeded. Contact the administrator."),{success:!1,message:s,error:t}}},YM=()=>{const i=vr(),{currentUser:e,uploadProfilePicture:t,userProfilePic:s,signOut:o}=Ss(),{userName:u,setUserName:h,updateUserProfilePic:d,getUserInitials:p}=V.useContext(wa),[g,A]=V.useState(!1),[T,C]=V.useState(u),[D,k]=V.useState(null),[G,U]=V.useState(null),[z,H]=V.useState({text:"",type:""}),[Y,ie]=V.useState(!1),[re,pe]=V.useState(!1),M=V.useRef(null),R=V.useRef(null);V.useEffect(()=>{s&&U(s)},[s]);const b=ge=>{R.current&&!R.current.contains(ge.target)&&i("/home")},I=ge=>{C(ge.target.value)},O=()=>{M.current.click()},j=ge=>{const P=ge.target.files[0];if(P){if(P.size>2*1024*1024){H({text:"File is too large. Please select an image under 2MB.",type:"error"});return}if(!["image/jpeg","image/png","image/gif"].includes(P.type)){H({text:"Please select a valid image file (JPEG, PNG, or GIF)",type:"error"});return}H({text:"",type:""}),k(P);const te=new FileReader;te.onloadend=()=>{U(te.result)},te.readAsDataURL(P)}},N=()=>{k(null),U(null),H({text:"",type:""})},Be=async()=>{ie(!0),H({text:"Testing storage connectivity...",type:"info"});try{const ge=await KM();ge.success?H({text:"Storage test passed! You should be able to upload images now.",type:"success"}):H({text:`Storage test failed: ${ge.message}. Please check your Firebase settings.`,type:"error"})}catch(ge){H({text:`Storage test error: ${ge.message}`,type:"error"})}finally{ie(!1)}},et=async()=>{if(!D||!e){H({text:"Please select a file first",type:"error"});return}pe(!0),H({text:"Directly uploading image... This may take a moment.",type:"info"});try{const ge=await QM(D,e.uid);ge.success?(console.log("Direct upload successful:",ge.downloadURL),H({text:"Direct upload successful! URL: "+ge.downloadURL.substring(0,20)+"...",type:"success"}),d(ge.downloadURL)):H({text:`Direct upload failed: ${ge.message}`,type:"error"})}catch(ge){H({text:`Direct upload error: ${ge.message}`,type:"error"})}finally{pe(!1)}},ae=async()=>{if(!g){A(!0),H({text:"",type:""});try{if(T!==u&&(h(T),localStorage.setItem("userName",T)),D&&e){console.log("Attempting to upload profile picture"),H({text:"Uploading image... This may take a moment.",type:"info"});const ge=await t(D,e.uid);if(ge&&ge.error)throw new Error(ge.error);if(ge)console.log("Profile picture uploaded successfully, URL:",ge),d(ge),H({text:"Profile picture uploaded successfully!",type:"success"});else throw new Error("Failed to get download URL for the uploaded file")}H({text:"Profile saved successfully!",type:"success"}),setTimeout(()=>{i("/home")},1500)}catch(ge){console.error("Error saving profile:",ge),H({text:ge.message||"Something went wrong. Please try again.",type:"error"})}finally{A(!1)}}},_e=()=>{i("/home")},ve=async()=>{try{await o(),i("/")}catch(ge){console.error("Error signing out:",ge),H({text:"Failed to sign out. Please try again.",type:"error"})}};return v.jsx("div",{className:"profile-container",onClick:b,children:v.jsxs("div",{className:"profile-card",ref:R,children:[v.jsxs("div",{className:"profile-header",children:[v.jsx("h2",{children:"Edit Profile"}),v.jsx("button",{className:"close-button",onClick:_e,children:""})]}),v.jsx("div",{className:"profile-picture-section",children:v.jsxs("div",{className:"profile-picture-container",children:[G?v.jsx("img",{src:G,alt:"Profile",className:"profile-picture"}):v.jsx("div",{className:"profile-initials",children:p()}),v.jsxs("div",{className:"picture-actions",children:[v.jsx("button",{className:"picture-button upload",onClick:O,disabled:g||Y||re,children:"Upload Picture"}),G&&v.jsx("button",{className:"picture-button remove",onClick:N,disabled:g||Y||re,children:"Remove"}),v.jsx("input",{type:"file",ref:M,style:{display:"none"},accept:"image/jpeg,image/png,image/gif",onChange:j,disabled:g||Y||re}),D&&v.jsx("button",{className:"picture-button direct",onClick:et,disabled:g||Y||re,children:re?"Uploading...":"Direct Upload"})]}),v.jsx("button",{className:"picture-button test",onClick:Be,disabled:g||Y||re,children:Y?"Testing...":"Test Upload"}),z.text&&v.jsx("div",{className:`error-message ${z.type}`,children:z.text})]})}),v.jsxs("div",{className:"profile-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"name",children:"Display Name"}),v.jsx("input",{type:"text",id:"name",value:T,onChange:I,placeholder:"Enter your name",disabled:g||Y||re})]}),v.jsxs("div",{className:"profile-email",children:[v.jsx("strong",{children:"Email:"})," ",(e==null?void 0:e.email)||"Not available"]}),v.jsxs("div",{className:"profile-actions",children:[v.jsx("button",{className:"sign-out-button",onClick:ve,disabled:g||Y||re,children:"Sign Out"}),v.jsxs("div",{className:"right-actions",children:[v.jsx("button",{className:"cancel-button",onClick:_e,disabled:g||Y||re,children:"Cancel"}),v.jsx("button",{className:"save-button",onClick:ae,disabled:g||Y||re,children:g?"Saving...":"Save Changes"})]})]})]})]})})},XM=()=>v.jsx("div",{className:"app-preview-container",children:v.jsxs("div",{className:"app-mockup",children:[v.jsxs("div",{className:"app-header",children:[v.jsxs("div",{className:"header-actions",children:[v.jsx("div",{className:"action-dot red"}),v.jsx("div",{className:"action-dot yellow"}),v.jsx("div",{className:"action-dot green"})]}),v.jsx("div",{className:"header-title",children:"Phoenix Notes"}),v.jsx("div",{className:"header-spacer"})]}),v.jsxs("div",{className:"app-content",children:[v.jsxs("div",{className:"sidebar",children:[v.jsx("div",{className:"sidebar-item active"}),v.jsx("div",{className:"sidebar-item"}),v.jsx("div",{className:"sidebar-item"}),v.jsx("div",{className:"sidebar-item"}),v.jsx("div",{className:"sidebar-spacer"}),v.jsx("div",{className:"sidebar-item small"})]}),v.jsxs("div",{className:"main-content",children:[v.jsx("div",{className:"note-title"}),v.jsxs("div",{className:"note-content",children:[v.jsx("div",{className:"text-line"}),v.jsx("div",{className:"text-line"}),v.jsx("div",{className:"text-line",style:{width:"80%"}}),v.jsx("div",{className:"text-line",style:{width:"65%"}}),v.jsx("div",{className:"space"}),v.jsx("div",{className:"text-line"}),v.jsx("div",{className:"text-line"}),v.jsx("div",{className:"text-line",style:{width:"70%"}})]}),v.jsxs("div",{className:"connections",children:[v.jsx("div",{className:"connection-title"}),v.jsx("div",{className:"connection-item"}),v.jsx("div",{className:"connection-item"})]})]})]})]})}),$M=()=>{const[i,e]=V.useState(!1),t=vr(),s=()=>{e(!i)},o=()=>{e(!1)},u=d=>{o();const p=document.getElementById(d);if(p){const T=p.getBoundingClientRect().top+window.pageYOffset-70;window.scrollTo({top:T,behavior:"smooth"})}},h=d=>{o(),t(d)};return v.jsxs("div",{className:"mobile-nav-container",children:[v.jsxs("button",{className:`hamburger-btn ${i?"active":""}`,onClick:s,"aria-label":"Toggle menu",children:[v.jsx("span",{}),v.jsx("span",{}),v.jsx("span",{})]}),v.jsxs("div",{className:`mobile-menu ${i?"open":""}`,children:[v.jsx("nav",{children:v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("button",{onClick:()=>u("features"),children:"Features"})}),v.jsx("li",{children:v.jsx("button",{onClick:()=>u("ai"),children:"AI"})}),v.jsx("li",{children:v.jsx("button",{onClick:()=>u("pricing"),children:"Pricing"})}),v.jsx("li",{children:v.jsx("button",{onClick:()=>u("testimonials"),children:"Testimonials"})})]})}),v.jsxs("div",{className:"mobile-auth-buttons",children:[v.jsx("button",{className:"mobile-login-btn",onClick:()=>h("/login"),children:"Login"}),v.jsx("button",{className:"mobile-signup-btn",onClick:()=>h("/signup"),children:"Start free trial"})]})]}),i&&v.jsx("div",{className:"menu-backdrop",onClick:o})]})},WM=()=>{const i=vr(),[e,t]=V.useState(!1);return V.useEffect(()=>{document.title="Phoenix - Your AI Note-Taking Assistant";const s=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),v.jsxs("div",{className:"reflect-landing",children:[v.jsx("header",{className:`reflect-header ${e?"scrolled":""}`,children:v.jsxs("div",{className:"header-content",children:[v.jsxs("div",{className:"logo-container",onClick:()=>i("/"),children:[v.jsx("img",{src:wo,alt:"Logo",className:"logo"}),v.jsx("span",{className:"logo-text",children:"Phoenix"})]}),v.jsx("nav",{className:"main-nav",children:v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("a",{href:"#features",children:"Features"})}),v.jsx("li",{children:v.jsx("a",{href:"#ai",children:"AI"})}),v.jsx("li",{children:v.jsx("a",{href:"#pricing",children:"Pricing"})}),v.jsx("li",{children:v.jsx("a",{href:"#testimonials",children:"Testimonials"})})]})}),v.jsxs("div",{className:"auth-buttons",children:[v.jsx("button",{className:"login-btn",onClick:()=>i("/login"),children:"Login"}),v.jsx("button",{className:"signup-btn",onClick:()=>i("/signup"),children:"Start free trial"})]}),v.jsx($M,{})]})}),v.jsx("section",{className:"hero-section",children:v.jsxs("div",{className:"hero-content",children:[v.jsxs("h1",{className:"hero-title",children:[v.jsx("span",{className:"gradient-text",children:"Think better"})," with Phoenix"]}),v.jsx("p",{className:"hero-subtitle",children:"Never miss a note, idea or connection."}),v.jsx("div",{className:"cta-container",children:v.jsx("button",{className:"cta-button",onClick:()=>i("/signup"),children:"Start your 14-day trial"})}),v.jsx("div",{className:"hero-image",children:v.jsx(XM,{})})]})}),v.jsxs("section",{id:"features",className:"features-section",children:[v.jsx("div",{className:"section-header",children:v.jsx("h2",{className:"section-title",children:v.jsx("span",{className:"gradient-text",children:"Built for speed"})})}),v.jsxs("div",{className:"features-grid",children:[v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:""}),v.jsx("h3",{children:"Instantly sync"}),v.jsx("p",{children:"Your notes across all your devices"})]}),v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:""}),v.jsx("h3",{children:"Networked notes"}),v.jsx("p",{children:"Form a graph of ideas with backlinked notes"})]}),v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:""}),v.jsx("h3",{children:"Mobile app"}),v.jsx("p",{children:"Capture ideas on the go, online or offline"})]}),v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:""}),v.jsx("h3",{children:"End-to-end encryption"}),v.jsx("p",{children:"Only you can access your notes"})]})]})]}),v.jsxs("section",{id:"ai",className:"ai-section",children:[v.jsxs("div",{className:"section-header",children:[v.jsxs("h2",{className:"section-title",children:[v.jsx("span",{className:"gradient-text",children:"Notes with an"})," AI assistant"]}),v.jsx("p",{className:"section-description",children:"Phoenix uses AI to improve your writing, organize your thoughts, and act as your intellectual thought partner."})]}),v.jsx("div",{className:"ai-demo",children:v.jsxs("div",{className:"ai-card",children:[v.jsx("div",{className:"ai-card-header",children:v.jsx("span",{children:"Ask anything to AI..."})}),v.jsxs("div",{className:"ai-card-content",children:[v.jsx("p",{children:"What can AI do for my note-taking?"}),v.jsx("div",{className:"ai-response",children:v.jsx("p",{children:"AI can help you organize thoughts, summarize long content, generate outlines, extract key points from meetings, transcribe voice notes, and connect related ideas across your notes."})})]})]})})]}),v.jsxs("section",{className:"brain-section",children:[v.jsxs("div",{className:"section-header",children:[v.jsxs("h2",{className:"section-title",children:[v.jsx("span",{className:"gradient-text",children:"Give your brain"})," superpowers"]}),v.jsx("p",{className:"section-description",children:"Mirror the way your mind works by associating notes through backlinks. Phoenix builds you a second brain that you can reference anytime."})]}),v.jsxs("div",{className:"brain-features",children:[v.jsxs("div",{className:"brain-feature",children:[v.jsx("h3",{children:"Your thoughts connected"}),v.jsx("p",{children:"Backlink your notes to make everything easily searchable."})]}),v.jsxs("div",{className:"brain-feature",children:[v.jsx("h3",{children:"Frictionless thought capture"}),v.jsx("p",{children:"Record your ideas and to-do's easily, so you never miss a thing."})]})]})]}),v.jsxs("section",{id:"pricing",className:"pricing-section",children:[v.jsxs("div",{className:"section-header",children:[v.jsx("h2",{className:"section-title",children:v.jsx("span",{children:"We like keeping things simple"})}),v.jsx("p",{className:"pricing-tagline",children:"One plan, one price."})]}),v.jsxs("div",{className:"pricing-card",children:[v.jsxs("div",{className:"price",children:[v.jsx("span",{className:"amount",children:"$10"}),v.jsxs("span",{className:"period",children:["/month",v.jsx("br",{}),"(billed annually)"]})]}),v.jsxs("ul",{className:"features-list",children:[v.jsx("li",{children:"Networked note-taking"}),v.jsx("li",{children:"AI assistant integration"}),v.jsx("li",{children:"End-to-end encryption"}),v.jsx("li",{children:"Mobile app access"}),v.jsx("li",{children:"Unlimited notes"})]}),v.jsx("button",{className:"pricing-cta",onClick:()=>i("/signup"),children:"Start your 14-day trial"})]})]}),v.jsxs("section",{id:"testimonials",className:"testimonials-section",children:[v.jsx("h2",{className:"section-title",children:"Loved by thinkers"}),v.jsxs("div",{className:"testimonials-grid",children:[v.jsxs("div",{className:"testimonial-card",children:[v.jsx("p",{className:"testimonial-text",children:`"Really liking Phoenix so far. It's just the right amount of simple/fast for a personal note taking app and does most of the hard work of organizing in the background."`}),v.jsx("div",{className:"testimonial-author",children:v.jsx("p",{className:"author-name",children:"@seanrose"})})]}),v.jsxs("div",{className:"testimonial-card",children:[v.jsx("p",{className:"testimonial-text",children:`"Don't take it from me: Phoenix is magic."`}),v.jsx("div",{className:"testimonial-author",children:v.jsx("p",{className:"author-name",children:"@delk"})})]}),v.jsxs("div",{className:"testimonial-card",children:[v.jsx("p",{className:"testimonial-text",children:`"I'm keeping Phoenix open *all* the time, and I'm using it both for simple journaling and long form writing. It's rare to see a single app work so well for both."`}),v.jsx("div",{className:"testimonial-author",children:v.jsx("p",{className:"author-name",children:"@linuz90"})})]})]})]}),v.jsxs("section",{className:"final-cta-section",children:[v.jsxs("h2",{className:"section-title",children:[v.jsx("span",{className:"gradient-text",children:"Think better"})," with Phoenix"]}),v.jsx("p",{className:"cta-subtitle",children:"Never miss a note, idea or connection."}),v.jsx("button",{className:"final-cta-button",onClick:()=>i("/signup"),children:"Start your 14-day trial"})]}),v.jsxs("footer",{className:"reflect-footer",children:[v.jsxs("div",{className:"footer-content",children:[v.jsxs("div",{className:"footer-logo",children:[v.jsx("img",{src:wo,alt:"Logo",className:"logo"}),v.jsx("span",{children:"Phoenix"})]}),v.jsxs("div",{className:"footer-links",children:[v.jsxs("div",{className:"footer-column",children:[v.jsx("h3",{children:"Product"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("a",{href:"#features",children:"Features"})}),v.jsx("li",{children:v.jsx("a",{href:"#ai",children:"AI Assistant"})}),v.jsx("li",{children:v.jsx("a",{href:"#pricing",children:"Pricing"})})]})]}),v.jsxs("div",{className:"footer-column",children:[v.jsx("h3",{children:"Company"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("a",{href:"#about",children:"About Us"})}),v.jsx("li",{children:v.jsx("a",{href:"#values",children:"Our Values"})}),v.jsx("li",{children:v.jsx("a",{href:"#blog",children:"Blog"})})]})]}),v.jsxs("div",{className:"footer-column",children:[v.jsx("h3",{children:"Resources"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("a",{href:"#downloads",children:"Downloads"})}),v.jsx("li",{children:v.jsx("a",{href:"#documentation",children:"Documentation"})}),v.jsx("li",{children:v.jsx("a",{href:"#contact",children:"Contact"})})]})]})]})]}),v.jsxs("div",{className:"footer-bottom",children:[v.jsxs("p",{className:"copyright",children:[" ",new Date().getFullYear()," Phoenix App. All rights reserved."]}),v.jsxs("div",{className:"legal-links",children:[v.jsx("a",{href:"#privacy",children:"Privacy Policy"}),v.jsx("span",{children:""}),v.jsx("a",{href:"#terms",children:"Terms of Service"})]})]})]})]})},ZM=()=>{const{currentUser:i}=Ss(),[e,t]=V.useState([]),[s,o]=V.useState(!1),[u,h]=V.useState("");V.useEffect(()=>{i&&p()},[i]);const d=async()=>{if(!i){h("You must be logged in to create a chat");return}o(!0),h("");try{const T=Date.now().toString(),C={id:T,title:`Test Chat ${new Date().toLocaleTimeString()}`,messages:[{role:"user",content:"This is a test message"},{role:"model",content:"This is a test response"}]};await Qh(i.uid,C),h(`Chat saved successfully with ID: ${T}`),await p()}catch(T){console.error("Error creating test chat:",T),h(`Error creating test chat: ${T.message}`)}finally{o(!1)}},p=async()=>{if(!i){h("You must be logged in to load chats");return}o(!0),h("");try{const T=await Ww(i.uid);t(T),h(`Loaded ${T.length} chats`)}catch(T){console.error("Error loading chats:",T),h(`Error loading chats: ${T.message}`)}finally{o(!1)}},g=async()=>{if(!i){h("You must be logged in to clean up chats");return}o(!0),h("");try{await pp(i.uid),h("Cleaned up old chats"),await p()}catch(T){console.error("Error cleaning up chats:",T),h(`Error cleaning up chats: ${T.message}`)}finally{o(!1)}},A=async()=>{if(!i){h("You must be logged in to delete chats");return}o(!0),h("");try{await dk(i.uid),h("Deleted all chats"),await p()}catch(T){console.error("Error deleting chats:",T),h(`Error deleting chats: ${T.message}`)}finally{o(!1)}};return v.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[v.jsx("h2",{children:"Chat Service Tester"}),i?v.jsxs("p",{children:["Logged in as: ",i.email]}):v.jsx("p",{children:"Not logged in"}),v.jsxs("div",{style:{marginBottom:"20px"},children:[v.jsx("button",{onClick:d,disabled:s||!i,style:{marginRight:"10px",padding:"8px 16px"},children:"Create Test Chat"}),v.jsx("button",{onClick:p,disabled:s||!i,style:{marginRight:"10px",padding:"8px 16px"},children:"Load Chats"}),v.jsx("button",{onClick:g,disabled:s||!i,style:{marginRight:"10px",padding:"8px 16px"},children:"Cleanup Old Chats"}),v.jsx("button",{onClick:A,disabled:s||!i,style:{padding:"8px 16px",backgroundColor:"#ff4d4d",color:"white",border:"none"},children:"Delete All Chats"})]}),u&&v.jsx("div",{style:{padding:"10px",backgroundColor:u.includes("Error")?"#ffebee":"#e8f5e9",borderRadius:"4px",marginBottom:"20px"},children:u}),v.jsxs("h3",{children:["Chats (",e.length,")"]}),s?v.jsx("p",{children:"Loading..."}):e.length>0?v.jsx("div",{children:e.map(T=>v.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"4px",padding:"10px",marginBottom:"10px"},children:[v.jsx("h4",{children:T.title}),v.jsxs("p",{children:["ID: ",T.id]}),v.jsxs("p",{children:["Created: ",new Date(T.timestamp).toLocaleString()]}),v.jsxs("p",{children:["Messages: ",T.messages.length]}),v.jsxs("details",{children:[v.jsx("summary",{children:"View Messages"}),v.jsx("div",{style:{marginTop:"10px"},children:T.messages.map((C,D)=>v.jsxs("div",{style:{padding:"8px",backgroundColor:C.role==="user"?"#e3f2fd":"#f1f8e9",borderRadius:"4px",marginBottom:"8px"},children:[v.jsxs("strong",{children:[C.role,":"]})," ",C.content]},D))})]})]},T.id))}):v.jsx("p",{children:"No chats found"})]})},zm=({children:i})=>{const{currentUser:e}=Ss();return e?i:v.jsx(oM,{to:"/"})},JM=()=>v.jsx(yk,{children:v.jsx(OM,{children:v.jsxs(uM,{children:[v.jsx(aa,{path:"/",element:v.jsx(WM,{})}),v.jsx(aa,{path:"/login",element:v.jsx(FM,{})}),v.jsx(aa,{path:"/signup",element:v.jsx(GM,{})}),v.jsx(aa,{path:"/home",element:v.jsx(zm,{children:v.jsxs("div",{className:"protected-container",children:[v.jsx(qM,{}),v.jsx(HM,{})]})})}),v.jsx(aa,{path:"/profile",element:v.jsx(zm,{children:v.jsx(YM,{})})}),v.jsx(aa,{path:"/chat-test",element:v.jsx(zm,{children:v.jsx(ZM,{})})})]})})});Kb.createRoot(document.getElementById("root")).render(v.jsx(_k,{children:v.jsx(JM,{})}));
